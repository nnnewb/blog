<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ è¿˜è®°å¾—å¾ˆä¹…ä»¥å‰å­¦æ•°æ®ç»“æ„åªçœ‹åˆ°äºŒå‰æ ‘ï¼Œè®²åˆ°å¹³è¡¡ï¼Œä½†å¹³è¡¡æ–¹æ³•å½“æ—¶çœ‹çº¸è´¨ä¹¦æ‰‹å¤´ä¹Ÿæ²¡æœ‰å®éªŒç¯å¢ƒï¼Œåæ¥å°±æ²¡ç»§ç»­å­¦ä¸‹å»ã€‚ç°åœ¨æœ‰é—²å°±é‡æ–°æ¡èµ·æ¥å­¦ä¸€ä¸‹"><title>AVLæ ‘</title>
<link rel=canonical href=https://nnnewb.github.io/p/avl-tree/>
<link rel=stylesheet href=/scss/style.min.709d4f89582c5a09dc94158a722a16093cdffe24d9a8c77dd3f422c786203c41.css><script src=https://unpkg.com/dayjs@1.8.21/dayjs.min.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/plugin/relativeTime.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/locale/zh-cn.js></script>
<script>dayjs.locale('zh-cn'),dayjs.extend(dayjs_plugin_relativeTime)</script><meta property="og:title" content="AVLæ ‘">
<meta property="og:description" content="å‰è¨€ è¿˜è®°å¾—å¾ˆä¹…ä»¥å‰å­¦æ•°æ®ç»“æ„åªçœ‹åˆ°äºŒå‰æ ‘ï¼Œè®²åˆ°å¹³è¡¡ï¼Œä½†å¹³è¡¡æ–¹æ³•å½“æ—¶çœ‹çº¸è´¨ä¹¦æ‰‹å¤´ä¹Ÿæ²¡æœ‰å®éªŒç¯å¢ƒï¼Œåæ¥å°±æ²¡ç»§ç»­å­¦ä¸‹å»ã€‚ç°åœ¨æœ‰é—²å°±é‡æ–°æ¡èµ·æ¥å­¦ä¸€ä¸‹">
<meta property="og:url" content="https://nnnewb.github.io/p/avl-tree/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="æ•°æ®ç»“æ„"><meta property="article:tag" content="python"><meta property="article:published_time" content="2022-02-11T15:07:00+08:00"><meta property="article:modified_time" content="2022-02-11T15:07:00+08:00">
<meta name=twitter:title content="AVLæ ‘">
<meta name=twitter:description content="å‰è¨€ è¿˜è®°å¾—å¾ˆä¹…ä»¥å‰å­¦æ•°æ®ç»“æ„åªçœ‹åˆ°äºŒå‰æ ‘ï¼Œè®²åˆ°å¹³è¡¡ï¼Œä½†å¹³è¡¡æ–¹æ³•å½“æ—¶çœ‹çº¸è´¨ä¹¦æ‰‹å¤´ä¹Ÿæ²¡æœ‰å®éªŒç¯å¢ƒï¼Œåæ¥å°±æ²¡ç»§ç»­å­¦ä¸‹å»ã€‚ç°åœ¨æœ‰é—²å°±é‡æ–°æ¡èµ·æ¥å­¦ä¸€ä¸‹">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.setItem(a,"light")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/>
<img src=/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<li>
<a href=/tags><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>æ ‡ç­¾</span>
</a>
</li>
<li>
<a href=/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span>
</a>
</li>
<li>
<a href=/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span>
</a>
</li>
<div class=menu-bottom-section>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/python/>
python
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/p/avl-tree/>AVLæ ‘</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2022-02-11T15:07:00+08:00>2022å¹´ 2æœˆ 11æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>è¿˜è®°å¾—å¾ˆä¹…ä»¥å‰å­¦æ•°æ®ç»“æ„åªçœ‹åˆ°äºŒå‰æ ‘ï¼Œè®²åˆ°å¹³è¡¡ï¼Œä½†å¹³è¡¡æ–¹æ³•å½“æ—¶çœ‹çº¸è´¨ä¹¦æ‰‹å¤´ä¹Ÿæ²¡æœ‰å®éªŒç¯å¢ƒï¼Œåæ¥å°±æ²¡ç»§ç»­å­¦ä¸‹å»ã€‚ç°åœ¨æœ‰é—²å°±é‡æ–°æ¡èµ·æ¥å­¦ä¸€ä¸‹ã€‚å…ˆä»AVLæ ‘ç»§ç»­çœ‹ã€‚</p>
<h2 id=avlæ ‘>AVLæ ‘</h2>
<p>AVL æ ‘æ˜¯ä»¥æå‡ºè€…åå­—å‘½åçš„ï¼ŒAdelson-Velskii & Landisï¼Œä¿„å›½äººï¼Œåæ¥ç§»å±…ä»¥è‰²åˆ—ã€‚äººæ€ä¹ˆæ ·ä¸ç®¡å•¦ã€‚</p>
<p>AVL æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æ ‘ï¼Œå·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1ã€‚ä¿æŒå¹³è¡¡çš„æ–¹æ³•æ˜¯æ¯æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™å‘ç°å­æ ‘ä¸å¹³è¡¡ï¼Œå°±æŠŠè¾ƒé«˜çš„å­æ ‘æå‡ä¸ºæ ¹ï¼ŒæŠŠæ ¹å˜æˆæ–°çš„æ ¹çš„å­æ ‘ï¼ŒæŠŠè¾ƒé«˜çš„å­æ ‘å˜çŸ®ï¼Œè¾ƒçŸ®çš„å­æ ‘å˜é«˜ï¼Œå®ç°å¹³è¡¡ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«å«åšæ—‹è½¬ï¼Œä¸‹é¢ä»‹ç»æ—‹è½¬ã€‚</p>
<h2 id=å·¦æ—‹è½¬å³æ—‹è½¬>å·¦æ—‹è½¬/å³æ—‹è½¬</h2>
<p><img src=/p/avl-tree/640.webp width=1080 height=302 srcset="/p/avl-tree/640_hue4f2eb0b84b4ee9edbff095635b31765_16328_480x0_resize_q75_h2_box_2.webp 480w, /p/avl-tree/640_hue4f2eb0b84b4ee9edbff095635b31765_16328_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=å³æ—‹è½¬ class=gallery-image data-flex-grow=357 data-flex-basis=858px></p>
<p><img src=/p/avl-tree/640-16445510501782.webp width=1080 height=265 srcset="/p/avl-tree/640-16445510501782_hu6ffc1b8ea7f9226d8e679d85cbb8998e_14524_480x0_resize_q75_h2_box_2.webp 480w, /p/avl-tree/640-16445510501782_hu6ffc1b8ea7f9226d8e679d85cbb8998e_14524_1024x0_resize_q75_h2_box_2.webp 1024w" loading=lazy alt=å·¦æ—‹è½¬ class=gallery-image data-flex-grow=407 data-flex-basis=978px></p>
<p>å·¦æ—‹è½¬å’Œå³æ—‹è½¬çš„é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœå³å­æ ‘æ¯”å·¦å­æ ‘é«˜ï¼Œå°±æŠŠå³å­æ ‘æå‡æˆæ ¹ã€‚å¦‚æœå·¦å­æ ‘æ¯”å³å­æ ‘é«˜ï¼Œå°±æŠŠå·¦å­æ ‘æå‡æˆæ ¹ã€‚æå‡å³å­æ ‘å«å·¦æ—‹è½¬ï¼Œæå‡å·¦å­æ ‘å«å³æ—‹è½¬ã€‚</p>
<p>æŠŠå­æ ‘æå‡æˆæ ¹ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚æ¯”å¦‚å³å­æ ‘æå‡ä¸ºæ ¹ï¼ŒåŸæ¥çš„æ ¹å’Œå·¦å­æ ‘æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¹¶ä¸æƒ³é‡æ–°å¹³è¡¡æ ‘çš„æ—¶å€™æŠŠæ•´ä¸ªå·¦å­æ ‘éƒ½åˆ æ‰ï¼Œé‚£åŸæ¥çš„æ ¹å’Œå·¦å­æ ‘å°±å¿…é¡»æ’å›æ–°çš„æ ‘é‡Œã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“å³å­æ ‘çš„ key è‚¯å®šæ¯”æ ¹å’Œå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å¤§ï¼Œæ‰€ä»¥æ ¹è¦æ’å›æ ‘çš„è¯ï¼Œä¸€ä¸ªå¾ˆç›´æ¥çš„æƒ³æ³•å°±æ˜¯æŠŠæ—§çš„æ ¹æ¥åˆ°å³å­æ ‘å·¦ä¸‹è§’çš„å¶å­èŠ‚ç‚¹ã€‚</p>
<p><img src=/p/avl-tree/image-20220211115435552.png width=442 height=352 srcset="/p/avl-tree/image-20220211115435552_hudaf66137716a342688a9fcb78a9ab8fa_32310_480x0_resize_box_3.png 480w, /p/avl-tree/image-20220211115435552_hudaf66137716a342688a9fcb78a9ab8fa_32310_1024x0_resize_box_3.png 1024w" loading=lazy alt=æ—§çš„æ ¹æ’å›æ–°æ ¹ class=gallery-image data-flex-grow=125 data-flex-basis=301px></p>
<p>çš„ç¡®ï¼Œè¿™æ ·ä¿æŒäº†äºŒå‰æœç´¢æ ‘çš„ç‰¹å¾ï¼Œä½†æ–°çš„æ ‘ä¾ç„¶ä¸å¹³è¡¡ï¼šèŠ‚ç‚¹5çš„å·¦å­æ ‘é«˜åº¦2ï¼Œå³å­æ ‘é«˜åº¦0ï¼Œé«˜åº¦å·®è¶…è¿‡äº†1ã€‚ç¨å¾®æƒ³æƒ³å°±çŸ¥é“ï¼Œæ—§çš„æ ¹å’Œå·¦å­æ ‘ç›´æ¥æ¥åˆ°å·¦ä¸‹è§’å¶å­èŠ‚ç‚¹çš„è¯ï¼Œä¼šè®©åŸæœ¬å¹³è¡¡çš„æ–°æ ‘å·¦å­æ ‘é«˜åº¦å¢åŠ ï¼Œè¿›è€Œå¤±å»å¹³è¡¡ã€‚</p>
<p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸è¦æŠŠæ—§çš„æ ‘æ¥åˆ°æ–°çš„æ ‘æœ€å°å€¼ä¸Šï¼Œè€Œæ˜¯æŠŠæ–°æ ‘çš„å·¦å­æ ‘ï¼Œç§»æ¤æˆæ—§æ ‘çš„å³å­æ ‘ï¼Œå†æŠŠæ—§æ ‘ç§»æ¤æˆæ–°æ ‘çš„å·¦å­æ ‘ã€‚è¿™æ ·ä¸€æ¥ï¼Œå³å­æ ‘çš„å·¦å­æ ‘å’Œå·¦å­æ ‘çš„å³å­æ ‘ä¸ç®¡æ€ä¹ˆæ—‹è½¬ï¼Œé«˜åº¦éƒ½ä¸€æ ·ã€‚</p>
<p><img src=/p/avl-tree/image-20220211135807095.png width=559 height=367 srcset="/p/avl-tree/image-20220211135807095_huce0ca6d6e6da680d37b57191522379d3_34024_480x0_resize_box_3.png 480w, /p/avl-tree/image-20220211135807095_huce0ca6d6e6da680d37b57191522379d3_34024_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220211135807095 class=gallery-image data-flex-grow=152 data-flex-basis=365px></p>
<p>ä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥ä¿æŒå¹³è¡¡å‘¢ï¼Ÿé¦–å…ˆAVLæ ‘çš„å­æ ‘ä¹Ÿæ˜¯AVLæ ‘ï¼Œæ‰€ä»¥å­æ ‘çš„å­æ ‘ä¹‹é—´é«˜åº¦å·®ä¹Ÿä¸è¶…è¿‡1ã€‚å·¦æ—‹è½¬ã€å³æ—‹è½¬çš„çš„ä½œç”¨æ˜¯è®©å­æ ‘é«˜åº¦ä¸€ä¾§å‡é«˜ï¼Œä¸€ä¾§é™ä½â€”â€”æ³¨æ„ï¼Œå·¦æ—‹è½¬åªèƒ½é™ä½å³å„¿å­çš„å³å­æ ‘é«˜åº¦ï¼Œå³å„¿å­çš„å·¦å­æ ‘é«˜åº¦ä¸å˜ã€‚å³æ—‹è½¬åªèƒ½é™ä½å·¦å„¿å­çš„å·¦å­æ ‘é«˜åº¦ï¼Œå·¦å„¿å­çš„å³å­æ ‘é«˜åº¦ä¸å˜ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œä¸Šå›¾ä¸­å³å„¿å­çš„å³å­æ ‘ï¼ˆ4-6-7-8ï¼‰è¾ƒé«˜ï¼Œæ—‹è½¬åå˜æˆäº†ï¼ˆ6-7-8ï¼‰ï¼Œè€ŒåŸæœ¬çš„ï¼ˆ4-6-5ï¼‰å˜æˆäº†ï¼ˆ6-4-5ï¼‰ï¼Œé«˜åº¦ä¸å˜ã€‚</p>
<p>è¿™ä¸ªè§„å¾‹å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºåŸæ¥çš„å³å­æ ‘å˜æˆäº†æ ¹ï¼Œæ•´ä¸ªå³å­æ ‘å‰©ä¸‹çš„èŠ‚ç‚¹é«˜åº¦éƒ½é™ä½äº†ã€‚è€Œå³å­æ ‘çš„å·¦å­æ ‘å˜æˆäº†ç°åœ¨çš„å·¦å­æ ‘çš„å³å­æ ‘ï¼Œå’Œæ ¹çš„è·ç¦»ä¸€æ ·ï¼Œæ‰€ä»¥é«˜åº¦ä¸å˜ã€‚</p>
<p><strong>å·¦æ—‹è½¬è®©å³å­æ ‘çš„å³å­æ ‘é«˜åº¦-1ï¼Œå·¦å­æ ‘çš„å·¦å­æ ‘é«˜åº¦+1ã€‚å·¦å­æ ‘çš„å³å­æ ‘é«˜åº¦ç­‰äºå³å­æ ‘çš„å·¦å­æ ‘ï¼Œæ—‹è½¬åæ–°æ ‘çš„å·¦å³å­æ ‘çš„é«˜åº¦ç›¸ç­‰ã€‚</strong></p>
<h2 id=åŒæ—‹è½¬>åŒæ—‹è½¬</h2>
<p>å¯¹äºå¾€å·¦å„¿å­çš„å·¦å­æ ‘æ’å…¥èŠ‚ç‚¹é€ æˆçš„ä¸å¹³è¡¡ï¼Œå³æ—‹è½¬å¯ä»¥å®ç°é™ä½å·¦å„¿å­çš„å·¦å­æ ‘é«˜åº¦ï¼Œå†æ¬¡å¹³è¡¡ã€‚å¾€å³å„¿å­çš„å³å­æ ‘æ’å…¥èŠ‚ç‚¹é€ æˆçš„ä¸å¹³è¡¡ï¼Œå·¦æ—‹è½¬å¯ä»¥é™ä½å³å„¿å­çš„å³å­æ ‘é«˜åº¦ï¼Œå†æ¬¡å¹³è¡¡ã€‚ä½†å¯¹äºå·¦å„¿å­çš„å³å­æ ‘æˆ–å³å„¿å­çš„å·¦å­æ ‘æ’å…¥èŠ‚ç‚¹é€ æˆçš„ä¸å¹³è¡¡ï¼Œä¸€æ¬¡å·¦ã€å³æ—‹è½¬æ— æ³•å®ç°å†å¹³è¡¡ã€‚</p>
<p>å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<p><img src=/p/avl-tree/image-20220211141652944.png width=535 height=399 srcset="/p/avl-tree/image-20220211141652944_hue06f3e4447c8c13119165b1bee1e7d22_36072_480x0_resize_box_3.png 480w, /p/avl-tree/image-20220211141652944_hue06f3e4447c8c13119165b1bee1e7d22_36072_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220211141652944 class=gallery-image data-flex-grow=134 data-flex-basis=321px></p>
<p>æ—‹è½¬å‰ï¼Œå³å„¿å­çš„å·¦å­æ ‘ï¼ˆ4-7-6-5ï¼‰é«˜åº¦æ˜¯4ï¼Œæ—‹è½¬åï¼ˆ7-4-6-5ï¼‰é«˜åº¦ä¸å˜ï¼Œä¾ç„¶æ˜¯4ï¼Œæ ‘ä»ç„¶ä¸å¹³è¡¡ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå…ˆæŠŠå³å­æ ‘ï¼ˆ7ï¼‰å³æ—‹ï¼Œè®©å³å„¿å­çš„å·¦å­æ ‘é«˜åº¦ä½äºå³å­æ ‘ï¼Œå†å¯¹æ•´æ£µæ ‘å·¦æ—‹ï¼Œä¹Ÿå°±æ˜¯AVLæ ‘çš„åŒæ—‹è½¬ã€‚</p>
<p>ä¸€æ­¥ä¸€æ­¥çœ‹åŒæ—‹è½¬æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œå³å„¿å­çš„å·¦å­æ ‘æ¯”å³å„¿å­å³å­æ ‘é«˜ï¼Œæ‰€ä»¥å°†å³å„¿å­å³æ—‹ï¼Œä½¿å¾—å³å„¿å­çš„å³å­æ ‘é«˜äºå³å„¿å­çš„å·¦å­æ ‘ã€‚</p>
<p><img src=/p/avl-tree/image-20220211142847329.png width=490 height=346 srcset="/p/avl-tree/image-20220211142847329_hudfe01573f636ba8f14106612b6b86fbd_23701_480x0_resize_box_3.png 480w, /p/avl-tree/image-20220211142847329_hudfe01573f636ba8f14106612b6b86fbd_23701_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220211142847329 class=gallery-image data-flex-grow=141 data-flex-basis=339px></p>
<p>æˆ‘ä»¬çŸ¥é“çš„å·¦æ—‹è½¬æ—¶å³å„¿å­çš„å·¦å­æ ‘é«˜åº¦ä¸å˜ï¼Œå³å„¿å­çš„å³å­æ ‘é«˜åº¦-1ã€‚è¿™ä¸€æ­¥å‰ï¼Œç›´æ¥å¯¹æ•´æ£µæ ‘å·¦æ—‹æ—¶ï¼Œæœ€é«˜çš„é‚£é¢—å­æ ‘ï¼ˆå³å„¿å­çš„å·¦å­æ ‘ï¼‰é«˜åº¦æ²¡æœ‰å˜åŒ–ï¼Œæ ‘ä¾ç„¶ä¸å¹³è¡¡ï¼Œåªæ˜¯å˜æˆäº†å³å­æ ‘æ›´çŸ®ï¼Œå·¦å­æ ‘æ›´é«˜è€Œå·²ã€‚</p>
<p>è€Œè¿™ä¸€æ­¥ä¹‹åï¼Œæœ€é«˜çš„å­æ ‘å˜æˆäº†å³å­æ ‘çš„å³å­æ ‘ã€‚ç°åœ¨å¯¹æ•´æ£µæ ‘å·¦æ—‹ï¼Œå³å­æ ‘çš„å³å­æ ‘é«˜åº¦ä¸‹é™äº†ï¼Œå’ŒåŸæœ¬å³å­æ ‘çš„å·¦å­æ ‘é«˜åº¦ä¸€è‡´ï¼Œè¾¾æˆå¹³è¡¡ã€‚</p>
<p><img src=/p/avl-tree/image-20220211151253277.png width=573 height=352 srcset="/p/avl-tree/image-20220211151253277_hu3754058aad682cd96a93972186837210_33976_480x0_resize_box_3.png 480w, /p/avl-tree/image-20220211151253277_hu3754058aad682cd96a93972186837210_33976_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220211151253277 class=gallery-image data-flex-grow=162 data-flex-basis=390px></p>
<p>è¿™ä¸ªåŸåˆ™ç®€å•åœ°è¯´ï¼Œå°±æ˜¯å·¦å­æ ‘ä¸‹æœ€é«˜çš„å­æ ‘åº”è¯¥æ˜¯å·¦å­æ ‘ï¼Œå³å­æ ‘ä¸‹æœ€é«˜çš„å­æ ‘åº”è¯¥æ˜¯å³å­æ ‘ã€‚å¦‚æœæ–°å¢èŠ‚ç‚¹åä¸æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå°±è¦å…ˆå¯¹å·¦å­æ ‘å·¦æ—‹ï¼Œæˆ–è€…å¯¹å³å­æ ‘å³æ—‹ï¼Œæ¥æ»¡è¶³è¿™ä¸ªæ¡ä»¶ã€‚</p>
<h2 id=ä»£ç å®ç°>ä»£ç å®ç°</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>


<span class=k>class</span> <span class=nc>AVLTreeNode</span><span class=p>:</span>
    <span class=s2>&#34;&#34;&#34;æ ‘èŠ‚ç‚¹
</span><span class=s2>    &#34;&#34;&#34;</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>parent</span><span class=p>:</span> <span class=s1>&#39;AVLTreeNode&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s1>&#39;AVLTreeNode&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s1>&#39;AVLTreeNode&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>height</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;å­æ ‘é«˜åº¦
</span><span class=s2>
</span><span class=s2>        Returns:
</span><span class=s2>            int: å­æ ‘é«˜åº¦
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>return</span> <span class=nb>max</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_left_height</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_right_height</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>_left_height</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>height</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=mi>0</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>_right_height</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>height</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=mi>0</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>balance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;æ˜¯å¦å¹³è¡¡
</span><span class=s2>
</span><span class=s2>        Returns:
</span><span class=s2>            bool: æ˜¯å¦å¹³è¡¡
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_left_height</span><span class=o>-</span><span class=bp>self</span><span class=o>.</span><span class=n>_right_height</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>right_rotate</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=s2>&#34;&#34;&#34;èŠ‚ç‚¹å³æ—‹
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s1>&#39;can not rotate tree with empty left node&#39;</span><span class=p>)</span>
        <span class=c1># æ—§çš„æ ¹æˆä¸ºå³èŠ‚ç‚¹</span>
        <span class=c1># æ—§çš„æ ¹çš„å·¦èŠ‚ç‚¹æˆä¸ºæ–°çš„æ ¹</span>
        <span class=c1># æ–°çš„æ ¹çš„å³èŠ‚ç‚¹å˜æˆæ—§çš„æ ¹çš„å·¦èŠ‚ç‚¹</span>
        <span class=c1># æ—§çš„æ ¹å˜æˆæ–°çš„æ ¹çš„å³èŠ‚ç‚¹</span>
        <span class=n>old_root</span> <span class=o>=</span> <span class=bp>self</span>
        <span class=n>new_root</span> <span class=o>=</span> <span class=n>old_root</span><span class=o>.</span><span class=n>left</span>

        <span class=n>old_root</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>new_root</span><span class=o>.</span><span class=n>right</span>
        <span class=n>new_root</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>old_root</span>

        <span class=c1># æ–°æ ¹æ›¿æ¢æ—§æ ¹</span>
        <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>left</span> <span class=o>==</span> <span class=n>old_root</span><span class=p>:</span>
                <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>new_root</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>new_root</span>

        <span class=n>new_root</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span>
        <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>new_root</span>
        <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>old_root</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>old_root</span>

    <span class=k>def</span> <span class=nf>left_rotate</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=s2>&#34;&#34;&#34;èŠ‚ç‚¹å·¦æ—‹
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s1>&#39;can not rotate tree with empty right node&#39;</span><span class=p>)</span>
        <span class=c1># æ—§çš„æ ¹æˆä¸ºå·¦èŠ‚ç‚¹</span>
        <span class=c1># æ—§çš„æ ¹çš„å³èŠ‚ç‚¹æˆä¸ºæ–°çš„æ ¹</span>
        <span class=c1># æ–°çš„æ ¹çš„å·¦èŠ‚ç‚¹ä½œä¸ºæ—§çš„æ ¹çš„å³å­æ ‘</span>
        <span class=c1># æ—§çš„æ ¹å˜æˆæ–°çš„æ ¹çš„å·¦å­æ ‘</span>
        <span class=n>old_root</span> <span class=o>=</span> <span class=bp>self</span>
        <span class=n>new_root</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span>

        <span class=n>old_root</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>new_root</span><span class=o>.</span><span class=n>left</span>
        <span class=n>new_root</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>old_root</span>

        <span class=c1># æ–°æ ¹æ›¿æ¢æ—§æ ¹</span>
        <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>left</span> <span class=o>==</span> <span class=n>old_root</span><span class=p>:</span>
                <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>new_root</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>new_root</span>

        <span class=n>new_root</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span>
        <span class=n>old_root</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>new_root</span>
        <span class=k>if</span> <span class=n>old_root</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>old_root</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>old_root</span>

        <span class=k>assert</span> <span class=n>new_root</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=n>new_root</span><span class=o>.</span><span class=n>value</span>
        <span class=k>assert</span> <span class=n>new_root</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>value</span> <span class=o>&lt;</span> <span class=n>new_root</span><span class=o>.</span><span class=n>value</span>

    <span class=k>def</span> <span class=nf>_rebalance</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>balance</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_left_height</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>_right_height</span><span class=p>:</span>
            <span class=c1># å¦‚æœæœ€é«˜çš„å­æ ‘æ˜¯å·¦å­æ ‘çš„å³å­æ ‘ï¼Œå…ˆå¯¹å·¦å­æ ‘å·¦æ—‹</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> \
                    <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> \
                    <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>height</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>height</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>left_rotate</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>right_rotate</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># å¦‚æœæœ€é«˜çš„å­æ ‘æ˜¯å³å­æ ‘çš„å·¦å­æ ‘ï¼Œå…ˆå¯¹å³å­æ ‘å³æ—‹</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> \
                    <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> \
                    <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>height</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>height</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>right_rotate</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>left_rotate</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>insert</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;æ’å…¥æ–°èŠ‚ç‚¹
</span><span class=s2>
</span><span class=s2>        Args:
</span><span class=s2>            value (int): è¦æ’å…¥çš„æ•°æ®
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>AVLTreeNode</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>&lt;</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>AVLTreeNode</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_rebalance</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>search</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;æœç´¢å€¼
</span><span class=s2>
</span><span class=s2>        Args:
</span><span class=s2>            value (int): å¾…æœç´¢çš„å€¼
</span><span class=s2>
</span><span class=s2>        Returns:
</span><span class=s2>            bool: å€¼æ˜¯å¦å­˜åœ¨
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=n>value</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>&lt;</span> <span class=n>value</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>




<span class=k>class</span> <span class=nc>AVLTree</span><span class=p>:</span>
    <span class=s2>&#34;&#34;&#34;AVL tree
</span><span class=s2>    &#34;&#34;&#34;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>root</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>AVLTreeNode</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>height</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=s2>&#34;&#34;&#34;AVLæ ‘é«˜åº¦
</span><span class=s2>
</span><span class=s2>        Returns:
</span><span class=s2>            int: æ ‘é«˜åº¦
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>height</span>
        <span class=k>return</span> <span class=mi>0</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>balance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;æ ‘æ˜¯å¦å¹³è¡¡
</span><span class=s2>
</span><span class=s2>        Returns:
</span><span class=s2>            bool: æ ‘æ˜¯å¦å¹³è¡¡
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>balance</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span> <span class=nf>insert</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
        <span class=s2>&#34;&#34;&#34;insert new value
</span><span class=s2>
</span><span class=s2>        Args:
</span><span class=s2>            value (int): new value
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=o>=</span> <span class=n>AVLTreeNode</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=c1># AVL æ ‘æ—‹è½¬åæ ¹èŠ‚ç‚¹å¯èƒ½ä¸å†æ˜¯ç°åœ¨è¿™ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦é‡æ–°å¯»æ‰¾æ ¹èŠ‚ç‚¹</span>
        <span class=n>top</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span>
        <span class=k>while</span> <span class=n>top</span><span class=o>.</span><span class=n>parent</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>top</span> <span class=o>=</span> <span class=n>top</span><span class=o>.</span><span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=o>=</span> <span class=n>top</span>

    <span class=k>def</span> <span class=nf>search</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=s2>&#34;&#34;&#34;search a value
</span><span class=s2>
</span><span class=s2>        Args:
</span><span class=s2>            value (int): searching value
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

</code></pre></td></tr></table>
</div>
</div><h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>AVLæ ‘åªè¦ç†è§£å’Œå·¦å³æ—‹è½¬çš„æ–¹æ³•å’Œä½œç”¨ï¼Œå°±ä¸éš¾ç†è§£å·¦å³æ—‹è½¬ä¸åŒæ—‹è½¬çš„æ„ä¹‰äº†ã€‚</p>
<p>å•æ¬¡æ—‹è½¬çš„ç›®çš„éƒ½æ˜¯å°†ä¸¤ä¾§å­æ ‘ï¼Œä¸€é¢—å­æ ‘é«˜åº¦+1ï¼Œä¸€é¢—å­æ ‘é«˜åº¦-1ï¼Œå°†é«˜åº¦ç›¸å·®2çš„ä¸¤é¢—å­æ ‘é‡æ–°å¹³è¡¡ã€‚</p>
<p>å•æ¬¡æ—‹è½¬çš„é™åˆ¶æ˜¯åªèƒ½é™ä½å­æ ‘ä¸­ä¸€é¢—å­æ ‘çš„é«˜åº¦ï¼Œå·¦å­æ ‘çš„å·¦å­æ ‘æˆ–å³å­æ ‘çš„å³å­æ ‘ï¼Œæ‰€ä»¥ä¸€æ—¦å‡ºç°å·¦å³å­æ ‘ä¸­æœ€é«˜çš„å­æ ‘ä¸æ˜¯å·¦-å·¦æˆ–å³-å³ï¼Œå•æ¬¡æ—‹è½¬å°±ä¸èƒ½é‡æ–°å¹³è¡¡ã€‚å¯¹è¿™ç§æƒ…å†µï¼Œå…ˆæ—‹è½¬å­æ ‘ï¼Œä»¤å·¦-å·¦æˆ–å³-å³æˆä¸ºæœ€é«˜çš„å­æ ‘åï¼Œå†å¯¹æ ¹èŠ‚ç‚¹æ—‹è½¬ï¼Œå°±èƒ½é‡æ–°å¹³è¡¡äº†ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>æ•°æ®ç»“æ„</a>
<a href=/tags/python/>python</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/b-tree/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>Bæ ‘</h2>
</div>
</a>
</article>
<article>
<a href=/p/pattern-match-in-python310/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>pattern-match-in-python310</h2>
</div>
</a>
</article>
<article>
<a href=/p/flask%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0wsgi/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>Flaskæºç é˜…è¯»ç¬”è®°ï¼šWSGI</h2>
</div>
</a>
</article>
<article>
<a href=/p/django-%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£</h2>
</div>
</a>
</article>
<article>
<a href=/p/%E8%BD%BB%E9%87%8F%E7%BA%A7-django-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E6%9C%80%E5%B0%8F%E7%9A%84-django-%E5%BA%94%E7%94%A8/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>è½»é‡çº§ django é˜…è¯»ç¬”è®°ï¼šæœ€å°çš„ django åº”ç”¨</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2024 weakptr's ç¬”è®°
</section>
<section class=powerby>
<a href=https://beian.miit.gov.cn/>æµ™ICPå¤‡2021032371å·-1</a>
<span style=margin-left:16px></span>
<a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33032402002231" style=display:inline-block;text-decoration:none;height:20px;line-height:20px>
<img src=/blog/image/beian.png style=float:left>
æµ™å…¬ç½‘å®‰å¤‡ 33032402002231å·
</a>
<br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡
ï¼Œç”± <a href=https://nnnewb.github.io/blog/>nnnewb</a> ä¿®æ”¹
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#å‰è¨€>å‰è¨€</a></li>
<li><a href=#avlæ ‘>AVLæ ‘</a></li>
<li><a href=#å·¦æ—‹è½¬å³æ—‹è½¬>å·¦æ—‹è½¬/å³æ—‹è½¬</a></li>
<li><a href=#åŒæ—‹è½¬>åŒæ—‹è½¬</a></li>
<li><a href=#ä»£ç å®ç°>ä»£ç å®ç°</a></li>
<li><a href=#æ€»ç»“>æ€»ç»“</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>