<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ è¿™æ¬¡çœ‹ä¸‹ DVWA çš„ CSRF é¢˜ã€‚ æ˜¨å¤©å¿™å®Œäº†å·¥ä½œï¼Œé—²ä¸‹æ¥çš„æ—¶é—´é¡ºä¾¿çœ‹äº†ä¸‹ DVWA çš„éƒ¨ç½²ã€‚åœ¨æˆ‘çš„ fork åˆ†æ”¯é‡Œæ·»åŠ äº† docker æ”¯æŒã€‚å› ä¸ºæ˜¯çº¯æ–°å¢ï¼Œä¸å¤ªå¯èƒ½æœ‰ breaking changeï¼Œç›´"><title>DVWAä¸Šæ‰‹è®°å½•-CSRF</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/get-start-dvwa-03/>
<link rel=stylesheet href=/blog/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="DVWAä¸Šæ‰‹è®°å½•-CSRF">
<meta property="og:description" content="å‰è¨€ è¿™æ¬¡çœ‹ä¸‹ DVWA çš„ CSRF é¢˜ã€‚ æ˜¨å¤©å¿™å®Œäº†å·¥ä½œï¼Œé—²ä¸‹æ¥çš„æ—¶é—´é¡ºä¾¿çœ‹äº†ä¸‹ DVWA çš„éƒ¨ç½²ã€‚åœ¨æˆ‘çš„ fork åˆ†æ”¯é‡Œæ·»åŠ äº† docker æ”¯æŒã€‚å› ä¸ºæ˜¯çº¯æ–°å¢ï¼Œä¸å¤ªå¯èƒ½æœ‰ breaking changeï¼Œç›´">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/get-start-dvwa-03/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="security"><meta property="article:tag" content="DVWA"><meta property="article:published_time" content="2022-04-25T16:33:00+08:00"><meta property="article:modified_time" content="2022-04-25T16:33:00+08:00">
<meta name=twitter:title content="DVWAä¸Šæ‰‹è®°å½•-CSRF">
<meta name=twitter:description content="å‰è¨€ è¿™æ¬¡çœ‹ä¸‹ DVWA çš„ CSRF é¢˜ã€‚ æ˜¨å¤©å¿™å®Œäº†å·¥ä½œï¼Œé—²ä¸‹æ¥çš„æ—¶é—´é¡ºä¾¿çœ‹äº†ä¸‹ DVWA çš„éƒ¨ç½²ã€‚åœ¨æˆ‘çš„ fork åˆ†æ”¯é‡Œæ·»åŠ äº† docker æ”¯æŒã€‚å› ä¸ºæ˜¯çº¯æ–°å¢ï¼Œä¸å¤ªå¯èƒ½æœ‰ breaking changeï¼Œç›´">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<li>
<a href=/blog/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span>
</a>
</li>
<li>
<a href=/blog/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/security/>
security
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/get-start-dvwa-03/>DVWAä¸Šæ‰‹è®°å½•-CSRF</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022å¹´ 4æœˆ 25æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>è¿™æ¬¡çœ‹ä¸‹ DVWA çš„ CSRF é¢˜ã€‚</p>
<p>æ˜¨å¤©å¿™å®Œäº†å·¥ä½œï¼Œé—²ä¸‹æ¥çš„æ—¶é—´é¡ºä¾¿çœ‹äº†ä¸‹ DVWA çš„éƒ¨ç½²ã€‚åœ¨æˆ‘çš„ fork åˆ†æ”¯é‡Œæ·»åŠ äº† docker æ”¯æŒã€‚å› ä¸ºæ˜¯çº¯æ–°å¢ï¼Œä¸å¤ªå¯èƒ½æœ‰ breaking changeï¼Œç›´æ¥åœ¨ GitHub ç½‘é¡µç‚¹ç‚¹é¼ æ ‡å°±èƒ½åŒæ­¥ä¸Šæ¸¸ä»£ç ã€‚è¿™æ ·å°±èƒ½ç”¨ä¸Šæœ€æ–°çš„ DVWA åŒæ—¶äº«å— docker ä¸€é”®å¯åŠ¨ DVWA ç¯å¢ƒçš„å¿«ä¹äº†ã€‚</p>
<p>ç”¨æ³•å¾ˆç®€å•ï¼š</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>git clone https://github.com/nnnewb/dvwa
<span class=nb>cd</span> dvwa
docker-compose up -d --build
</code></pre></td></tr></table>
</div>
</div><p>å°±è¿™æ ·ï¼</p>
<p>å½“ç„¶è¿˜æœ‰å¯èƒ½é‡åˆ°ä¸€äº›ç½‘ç»œé—®é¢˜ï¼Œä»€ä¹ˆ<code>deb.debian.org</code>è®¿é—®æ…¢æˆ–è€…<code>timeout</code>ã€<code>connection reset</code>ä¹‹ç±»çš„ï¼Œä½†æˆ‘è§‰å¾—æƒ³ç©è¿™ä¸ªçš„å¤šå°‘å¾—æœ‰ç‚¹è‡ªå·±åŠ¨æ‰‹è§£å†³é—®é¢˜çš„èƒ½åŠ›å§ï¼Œä¸èƒ½è·Ÿä¸‰å²å°å­©ä¸€æ ·ç­‰åˆ«äººå–‚å˜´é‡Œã€‚</p>
<h2 id=åŸç†>åŸç†</h2>
<h3 id=åˆ©ç”¨æ–¹å¼>åˆ©ç”¨æ–¹å¼</h3>
<p>CSRF å…¨åæ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€  <em>Cross Site Request Forgery</em> ã€‚</p>
<p>ç®€å•åœ°è¯´ï¼ŒæœåŠ¡å™¨ç›¸ä¿¡æ”¶åˆ°çš„è¯·æ±‚æ˜¯ç”¨æˆ·æ§åˆ¶æµè§ˆå™¨å‘èµ·çš„ï¼Œæ˜¯å‡ºäºç”¨æˆ·è‡ªèº«çš„æ„å›¾åšæŸäº›æ“ä½œã€‚ä½†å®é™…ä¸Šï¼Œæ˜¯å¦ä¸€ä¸ªæ¶æ„ç½‘ç«™çš„ js è„šæœ¬æ§åˆ¶äº†ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œåœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå†’å……ç”¨æˆ·çš„èº«ä»½è¯·æ±‚æœåŠ¡å™¨åšä¸€äº›å¹¶éå‡ºè‡ªç”¨æˆ·æœ¬æ„çš„æ“ä½œã€‚</p>
<p>CSRF åˆ©ç”¨ä¸­æœ‰ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li>ç”¨æˆ·æµè§ˆå™¨</li>
<li>ç›®æ ‡æœåŠ¡å™¨</li>
<li>æ¶æ„ç½‘ç«™</li>
</ul>
<p>ç”¨æˆ·ä¸è®¿é—®æ¶æ„ç½‘ç«™ï¼ŒCSRF æ”»å‡»å°±æ— ä»è°ˆèµ·ã€‚</p>
<h3 id=å’Œcorsçš„å…³ç³»>å’ŒCORSçš„å…³ç³»</h3>
<p>è¯´æ²¡å…³ç³»å…¶å®ä¹Ÿæœ‰ã€‚CORSå…¨ç§°æ˜¯ <em>Cross Origin Resource Sharing</em>ï¼Œè·¨åŸŸèµ„æºå…±äº«ï¼Œä¹Ÿæ˜¯é˜²æµè§ˆå™¨è¢«æ¶æ„ç½‘ç«™æ§åˆ¶ç€ï¼ŒèƒŒç€ç”¨æˆ·æ‹¿è‡ªå·±çš„æ•°æ®ã€‚ä½†æœ‰æ‰€ä¸åŒçš„æ˜¯ï¼ŒCORS å…¶å®æ˜¯ç›¸å½“å®½æ¾çš„ï¼Œå› ä¸º CORS åªè¦æ±‚æµè§ˆå™¨å¯¹ â€œå¤æ‚è¯·æ±‚â€ å‘é€é¢„æ£€ï¼Œä½†ç®€å•è¯·æ±‚ï¼ˆæ³¨æ„å“¦ï¼ŒåŒ…æ‹¬ POST è¯·æ±‚ï¼Œä½†åªèƒ½åŒ…å«æŒ‡å®šçš„ Header å’Œé™å®šçš„ <code>Content-Type</code>ï¼‰ä¼šç›´æ¥å‘ˆäº¤ç»™æœåŠ¡å™¨ã€‚</p>
<p>è€Œä¸”è¿™ä¸ªè¯·æ±‚æ˜¯å¯ä»¥å¸¦ Cookies çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æ¥å£æ»¡è¶³æ¡ä»¶ï¼ˆæ¥å—é™å®šçš„ <code>Content-Type</code>ï¼Œå¯¹ Header æ²¡æœ‰è¦æ±‚ï¼‰ï¼ŒCORS ç­–ç•¥å°±æ²¡æ³•é˜»æ­¢ CSRF æ”»å‡»ã€‚</p>
<p>ä¸¾ä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­ï¼Œå“ªæ€•æ¶æ„ç½‘ç«™åªæ˜¯å†™äº†ä¸€ä¸ªç®€å•çš„è¡¨å•ï¼š</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>form</span> <span class=na>method</span><span class=o>=</span><span class=s>&#34;POST&#34;</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;http://good.com/some/action&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;hello&#34;</span><span class=p>/&gt;</span>
    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span><span class=p>&gt;</span>submit<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿæ»¡è¶³ CORS å¯¹äº <em>ç®€å•è¯·æ±‚</em> çš„å®šä¹‰ï¼Œæµè§ˆå™¨ä¸ä¼šé˜»æ­¢æˆ–é¢„æ£€ã€‚</p>
<p>å› æ­¤ï¼Œå³ä½¿é…ç½®è‰¯å¥½çš„ CORSï¼Œä¹Ÿæ— æ³•æœç» CSRF æ”»å‡»ã€‚ä½† CORS ç¡®å®æ˜¯é˜²å¾¡ CSRF æ”»å‡»çš„é‡è¦ç¯èŠ‚ã€‚</p>
<h3 id=é˜²å¾¡>é˜²å¾¡</h3>
<p>é˜²å¾¡CSRFæ”»å‡»è¯´éš¾ä¸éš¾ï¼Œå› ä¸º<a class=link href=https://portswigger.net/web-security/CSRF target=_blank rel=noopener>å‘èµ· CSRF æ”»å‡»æœ‰å‡ ä¸ªé‡è¦å‰æ</a>ï¼š</p>
<ul>
<li>åŸºäº Cookies çš„ä¼šè¯æ§åˆ¶</li>
<li>æ²¡æœ‰ä¸å¯é¢„æµ‹çš„è¯·æ±‚å‚æ•°</li>
</ul>
<p>åŸºäºä¸Šé¢ä¸¤ç‚¹ï¼š</p>
<p>å¦‚æœä¼šè¯æ§åˆ¶å­˜åœ¨äºè‡ªå®šä¹‰çš„ HTTP å¤´æˆ– Cookies ä¹‹å¤–çš„ HTTP å¤´ï¼ˆæ¯”å¦‚<code>Authorization</code>ï¼‰ï¼Œé‚£ä¹ˆ CORS å°±ä¼šè¦æ±‚å…ˆå‘å‡ºä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼Œåªæœ‰åœ¨æœåŠ¡å™¨è¿”å› <code>Access-Control-Allow-Origin</code> åŒ…å«å½“å‰åŸŸåçš„æ—¶å€™æ‰ä¼šæ­£å¼å‘å‡ºè¯·æ±‚ã€‚è¿™æ ·ä¸€æ¥é™¤éå…ˆ bypass CORS ï¼Œä¸ç„¶å°±æ— æ³•å‘èµ· CSRF æ”»å‡»ã€‚</p>
<p>å¦ä¸€ç§å°±æ˜¯å¢åŠ ä¸€ä¸ªæ”»å‡»è€…ä¸å¯é¢„æµ‹çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ CSRF Tokenã€‚</p>
<p>CSRF Token æ˜¯ä¸€ä¸ªå’Œä¼šè¯ç»‘å®šçš„éšæœºï¼ˆè‡³å°‘å¯¹æ”»å‡»è€…æ¥è¯´ä¸å¯é¢„çŸ¥çš„ï¼‰å­—ç¬¦ä¸²ï¼ˆæˆ–åˆ«çš„æ•°æ®ç±»å‹ï¼‰ã€‚CSRF çš„ä½œç”¨åŸç†ä¾ç„¶æ˜¯è¦ä¾é  CORSï¼Œæ¶æ„ç½‘ç«™å¦‚æœè¦ä¼ªé€ è¯·æ±‚æäº¤ä¸€ä¸ªè¡¨å•ï¼Œé‚£å°±å¿…é¡»æ‹¿åˆ° CSRF Tokenï¼Œæƒ³è·å– CSRF Token å°±å¿…é¡»æ‹¿åˆ°è¡¨å•æ‰€åœ¨çš„é¡µé¢ï¼Œè€Œè¯·æ±‚è¡¨å•é¡µé¢å°±å¿…é¡»æ»¡è¶³ CORS ç­–ç•¥â€”â€”å³ä½¿æ˜¯ç®€å•è¯·æ±‚ï¼Œæ²¡æœ‰é¢„æ£€ï¼Œæµè§ˆå™¨åœ¨æ”¶åˆ°å“åº”åä¹Ÿä¼šæ ¹æ® <code>Access-Control-Allow-Origin</code> çš„è®¾å®šæ‹’ç»ç»™ XHR è¿”å›æ•°æ®ã€‚ç½‘é¡µæ‹¿ä¸åˆ° CSRF Tokenï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡åŠæ³•ä¼ªé€ å‡ºè¯·æ±‚ã€‚</p>
<h2 id=è§£é¢˜>è§£é¢˜</h2>
<h3 id=ä¿¡æ¯æ”¶é›†>ä¿¡æ¯æ”¶é›†</h3>
<p>å¥½çš„ï¼Œå°±æ˜¯è¸©ç‚¹ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113359872.png width=694 height=384 srcset="/blog/p/get-start-dvwa-03/image-20220425113359872_hu9f65ffe27ceedc88d5a5d4b939cdbb89_29651_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113359872_hu9f65ffe27ceedc88d5a5d4b939cdbb89_29651_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113359872 class=gallery-image data-flex-grow=180 data-flex-basis=433px></p>
<p>ä¸€ä¸ªä¿®æ”¹å¯†ç çš„é¡µé¢ï¼Œåªæœ‰ç™»é™†ç”¨æˆ·èƒ½ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼ˆå› ä¸ºä¸ç™»é™†æ ¹æœ¬çœ‹ä¸åˆ°è¿™ä¸ªé¡µé¢ï¼‰ã€‚å¦å¤–è¿˜æä¾›äº†ä¸€ä¸ªæµ‹è¯•ç™»é™†çš„åœ°æ–¹ï¼Œå°±æ˜¯é‚£ä¸ª <em>Test Credentials</em> æŒ‰é’®ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113529432.png width=602 height=462 srcset="/blog/p/get-start-dvwa-03/image-20220425113529432_hu6562a17a4cfa6d40103e315209b7dae1_19442_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113529432_hu6562a17a4cfa6d40103e315209b7dae1_19442_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113529432 class=gallery-image data-flex-grow=130 data-flex-basis=312px></p>
<p>åœ¨æµ‹è¯•ç™»é™†è¿™é‡Œè¾“å…¥è‡ªå·±çš„ç”¨æˆ·åå¯†ç ï¼ˆé»˜è®¤æ˜¯ <code>admin</code>,<code>password</code>ï¼‰ä¼šæç¤º<code>valid password for 'admin'</code>ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113619471.png width=602 height=462 srcset="/blog/p/get-start-dvwa-03/image-20220425113619471_hu7a377251ca067ccef2deefe4b718b765_20140_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113619471_hu7a377251ca067ccef2deefe4b718b765_20140_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113619471 class=gallery-image data-flex-grow=130 data-flex-basis=312px></p>
<p>ä¿®æ”¹å¯†ç çš„åœ°æ–¹æˆ‘ä»¬ä¹Ÿè¯•ä¸€è¯•ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113707665.png width=681 height=359 srcset="/blog/p/get-start-dvwa-03/image-20220425113707665_hu83b45cf6d41374fdab532da43f4da5fb_27229_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113707665_hu83b45cf6d41374fdab532da43f4da5fb_27229_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113707665 class=gallery-image data-flex-grow=189 data-flex-basis=455px></p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113713949.png width=691 height=361 srcset="/blog/p/get-start-dvwa-03/image-20220425113713949_hub982db786f97e05051e2c58967ba7a51_22558_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113713949_hub982db786f97e05051e2c58967ba7a51_22558_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113713949 class=gallery-image data-flex-grow=191 data-flex-basis=459px></p>
<p>ä¿®æ”¹åæç¤º <code>Password changed</code>ï¼Œè§‚å¯Ÿä¸‹ F12 è°ƒè¯•å™¨é‡Œçš„è¯·æ±‚å’Œå“åº”å¤´ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425143614395.png width=1008 height=449 srcset="/blog/p/get-start-dvwa-03/image-20220425143614395_hu218a45c37329024b7d96f4732fad50d1_41557_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425143614395_hu218a45c37329024b7d96f4732fad50d1_41557_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425143614395 class=gallery-image data-flex-grow=224 data-flex-basis=538px></p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425143623579.png width=450 height=287 srcset="/blog/p/get-start-dvwa-03/image-20220425143623579_hu33b023caf2ec6ec6032bf544565c0cbf_18590_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425143623579_hu33b023caf2ec6ec6032bf544565c0cbf_18590_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425143623579 class=gallery-image data-flex-grow=156 data-flex-basis=376px></p>
<p>æ¥ç€çœ‹ä¸€çœ¼è¡¨å•ä»£ç ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425113815152.png width=520 height=218 srcset="/blog/p/get-start-dvwa-03/image-20220425113815152_hu5f2daf098704a2b708824ee309756675_18422_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425113815152_hu5f2daf098704a2b708824ee309756675_18422_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425113815152 class=gallery-image data-flex-grow=238 data-flex-basis=572px></p>
<p>åªæœ‰æˆ‘è§‰å¾—<code>form</code>é‡Œ<code>method=GET</code>æ˜¯å¾ˆæ€ªçš„äº‹æƒ…å—ï¼Ÿæ„Ÿè§‰å­¦ä¼šå†™ HTML ä»¥æ¥å°±æ²¡æƒ³è¿‡åœ¨ <code>form</code> é‡Œç”¨ <code>GET</code> æ–¹æ³•&mldr;</p>
<p>å’³ï¼Œå›åˆ°æ­£é¢˜ã€‚</p>
<p>åˆ°è¿™é‡Œè¸©ç‚¹å·®ä¸å¤šå°±ç»“æŸäº†ï¼Œå¯ä»¥å‘ç° Low éš¾åº¦ä¸‹è¡¨å•æ²¡æœ‰ CSRF Token ä¿æŠ¤ï¼Œå› æ­¤å¯ä»¥ç®€å•ç›´æ¥å†™ä¸€ä¸ª XHR ä¿®æ”¹æ‰å¯†ç ã€‚</p>
<h3 id=é¢˜è§£>é¢˜è§£</h3>
<p>å¿…é¡»å…ˆæä¸€ä¸ªæˆ‘å®é™…ä¸‹æ‰‹å†™çš„æ—¶å€™æ‰è¸©åˆ°çš„å‘ï¼Œæµè§ˆå™¨å‘å±•é€Ÿåº¦å®åœ¨å¤ªå¿«äº†ã€‚</p>
<p>åœ¨<a class=link href=https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-05#section-5.3.7 target=_blank rel=noopener>RFC6265bis</a>é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„ Cookies å±æ€§ï¼Œ<code>SameSite</code>ã€‚<a class=link href="https://developers.google.com/search/blog/2020/01/get-ready-for-new-samesitenone-secure?hl=zh-cn" target=_blank rel=noopener>2019å¹´5æœˆä»½ï¼Œè°·æ­Œå®£å¸ƒæ¨å‡ºäº†ä¸€ä¸ªé»˜è®¤å®‰å…¨çš„ Cookie å®‰å…¨æ¨¡å‹</a>ï¼Œç”±æ–°çš„ Cookie åˆ†ç±»ç³»ç»Ÿï¼ˆ<a class=link href=https://tools.ietf.org/html/draft-west-cookie-incrementalism-00 target=_blank rel=noopener>è§„èŒƒ</a>ï¼‰æä¾›æ”¯æŒã€‚åœ¨è§„èŒƒï¼ˆPSï¼šåŒæ ·æ˜¯è°·æ­Œæå‡ºçš„ï¼‰ä¸­å°† <code>SameSite</code> é»˜è®¤è®¾ç½®ä¸º <code>Lax</code>ï¼Œåªå…è®¸ Cookies ä¸é¡¶çº§å¯¼èˆªï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹ç½‘ç«™å‘èµ·çš„GETè¯·æ±‚ï¼‰ä¸€èµ·å‘é€ã€‚</p>
<p>è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„ demoï¼Œåœ¨è¿™é¡¹æ”¹åŠ¨ä¹‹å‰åº”è¯¥æ˜¯å¸¦ä¸Š Cookies ç›´æ¥å‘å‡ºçš„è¯·æ±‚ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
<span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s2>&#34;get&#34;</span><span class=p>,</span> <span class=s2>&#34;http://localhost:8080/vulnerabilities/csrf/?password_new=admin&amp;password_conf=admin&amp;Change=Change&#34;</span><span class=p>);</span>
<span class=nx>xhr</span><span class=p>.</span><span class=nx>withCredentials</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=nx>xhr</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½†åœ¨è¿™é¡¹æ”¹åŠ¨ä¹‹åï¼ˆç°åœ¨æ˜¯2022å¹´4æœˆ25æ—¥ï¼ŒChromeå†…æ ¸ç‰ˆæœ¬ 100ï¼ŒEdge æµè§ˆå™¨ï¼‰ï¼Œè™½ç„¶è¿™æ˜¯ä¸ªç®€å•è¯·æ±‚ï¼Œæ— éœ€é¢„æ£€å°±ä¼šå‘é€ï¼Œä½†å› ä¸º Cookies çš„ <code>SameSite</code> å±æ€§å˜æ›´ä¸ºé»˜è®¤ <code>Lax</code> çš„åŸå› ï¼Œå³ä½¿è®¾ç½®äº† <code>withCredentials=true</code> è¯·æ±‚é‡Œä¹Ÿä¸ä¼šå¸¦ä¸Š Cookiesã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425150932251.png width=951 height=115 srcset="/blog/p/get-start-dvwa-03/image-20220425150932251_huaa8a43c2711e3dfb7b7a9ac3a293cc3a_19838_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425150932251_huaa8a43c2711e3dfb7b7a9ac3a293cc3a_19838_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425150932251 class=gallery-image data-flex-grow=826 data-flex-basis=1984px></p>
<p>è¿™å°±æœ‰ç‚¹æ¼äººï¼Œä¸è¿‡ç¨ä½œå˜é€šï¼Œè¿˜æ˜¯å¯ä»¥ç›´æ¥æ§åˆ¶ç”¨æˆ·çš„æµè§ˆå™¨å‘èµ·ä¿®æ”¹å¯†ç çš„è¯·æ±‚ï¼Œåªæ˜¯æ²¡ xhr é‚£ä¹ˆæ‚„æ— å£°æ¯ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>href</span><span class=o>=</span><span class=s1>&#39;http://localhost:8080/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æ­¤ä¸€æ¥ï¼Œå°±æ»¡è¶³äº† <code>SameSite=Lax</code> çš„ç”±é¡¶çº§å¯¼èˆªå¯åŠ¨çš„è¦æ±‚ã€‚</p>
<p>è¿™é‡Œé¢å¤–å†è¯´ä¸€å¥å°±æ˜¯ï¼Œ<code>iframe</code> ä¼¼ä¹ä¹Ÿä¸è¢«è§†ä½œé¡¶çº§å¯¼èˆªï¼Œå› æ­¤<code>&lt;iframe src="..." width="1" height="1">&lt;/iframe></code>ä¹Ÿè¡Œä¸é€šï¼Œä¸ä¼šå¸¦ä¸Š Cookiesã€‚</p>
<p>ç®€å•çœ‹äº†ä¸‹ MDN å¯¹é»˜è®¤ <code>Lax</code> ç­–ç•¥çš„æ”¯æŒæƒ…å†µï¼Œåªæœ‰å°‘æ•°å‡ ä¸ªæµè§ˆå™¨è¿˜æ²¡è·Ÿè¿›äº†ã€‚</p>
<p><img src=/blog/p/get-start-dvwa-03/image-20220425160233505.png width=810 height=701 srcset="/blog/p/get-start-dvwa-03/image-20220425160233505_hu0375771f01931166adb29727ee7ccafb_54993_480x0_resize_box_3.png 480w, /blog/p/get-start-dvwa-03/image-20220425160233505_hu0375771f01931166adb29727ee7ccafb_54993_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220425160233505 class=gallery-image data-flex-grow=115 data-flex-basis=277px></p>
<h3 id=ä»£ç å®¡è®¡>ä»£ç å®¡è®¡</h3>
<p>åˆæ˜¯å¾ˆçŸ­ä¸€æ®µ php ä»£ç ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=o>&lt;?</span><span class=nx>php</span>

<span class=k>if</span><span class=p>(</span> <span class=nx>isset</span><span class=p>(</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;Change&#39;</span> <span class=p>]</span> <span class=p>)</span> <span class=p>)</span> <span class=p>{</span>
    <span class=c1>// Get input
</span><span class=c1></span>    <span class=nv>$pass_new</span>  <span class=o>=</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;password_new&#39;</span> <span class=p>];</span>
    <span class=nv>$pass_conf</span> <span class=o>=</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;password_conf&#39;</span> <span class=p>];</span>

    <span class=c1>// Do the passwords match?
</span><span class=c1></span>    <span class=k>if</span><span class=p>(</span> <span class=nv>$pass_new</span> <span class=o>==</span> <span class=nv>$pass_conf</span> <span class=p>)</span> <span class=p>{</span>
        <span class=c1>// They do!
</span><span class=c1></span>        <span class=nv>$pass_new</span> <span class=o>=</span> <span class=p>((</span><span class=nx>isset</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])</span> <span class=o>&amp;&amp;</span> <span class=nx>is_object</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>]))</span> <span class=o>?</span> <span class=nx>mysqli_real_escape_string</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>],</span>  <span class=nv>$pass_new</span> <span class=p>)</span> <span class=o>:</span> <span class=p>((</span><span class=nx>trigger_error</span><span class=p>(</span><span class=s2>&#34;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&#34;</span><span class=p>,</span> <span class=nx>E_USER_ERROR</span><span class=p>))</span> <span class=o>?</span> <span class=s2>&#34;&#34;</span> <span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>));</span>
        <span class=nv>$pass_new</span> <span class=o>=</span> <span class=nx>md5</span><span class=p>(</span> <span class=nv>$pass_new</span> <span class=p>);</span>

        <span class=c1>// Update the database
</span><span class=c1></span>        <span class=nv>$insert</span> <span class=o>=</span> <span class=s2>&#34;UPDATE `users` SET password = &#39;</span><span class=si>$pass_new</span><span class=s2>&#39; WHERE user = &#39;&#34;</span> <span class=o>.</span> <span class=nx>dvwaCurrentUser</span><span class=p>()</span> <span class=o>.</span> <span class=s2>&#34;&#39;;&#34;</span><span class=p>;</span>
        <span class=nv>$result</span> <span class=o>=</span> <span class=nx>mysqli_query</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>],</span>  <span class=nv>$insert</span> <span class=p>)</span> <span class=k>or</span> <span class=k>die</span><span class=p>(</span> <span class=s1>&#39;&lt;pre&gt;&#39;</span> <span class=o>.</span> <span class=p>((</span><span class=nx>is_object</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>]))</span> <span class=o>?</span> <span class=nx>mysqli_error</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])</span> <span class=o>:</span> <span class=p>((</span><span class=nv>$___mysqli_res</span> <span class=o>=</span> <span class=nx>mysqli_connect_error</span><span class=p>())</span> <span class=o>?</span> <span class=nv>$___mysqli_res</span> <span class=o>:</span> <span class=k>false</span><span class=p>))</span> <span class=o>.</span> <span class=s1>&#39;&lt;/pre&gt;&#39;</span> <span class=p>);</span>

        <span class=c1>// Feedback for the user
</span><span class=c1></span>        <span class=k>echo</span> <span class=s2>&#34;&lt;pre&gt;Password Changed.&lt;/pre&gt;&#34;</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>else</span> <span class=p>{</span>
        <span class=c1>// Issue with passwords matching
</span><span class=c1></span>        <span class=k>echo</span> <span class=s2>&#34;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&#34;</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=p>((</span><span class=nx>is_null</span><span class=p>(</span><span class=nv>$___mysqli_res</span> <span class=o>=</span> <span class=nx>mysqli_close</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])))</span> <span class=o>?</span> <span class=k>false</span> <span class=o>:</span> <span class=nv>$___mysqli_res</span><span class=p>);</span>
<span class=p>}</span>

<span class=cp>?&gt;</span><span class=err>
</span></code></pre></td></tr></table>
</div>
</div><p>é€»è¾‘å¾ˆæ¸…æ™°ä¸å•°å—¦ï¼Œæ³¨æ„åˆ°å‡ ä¸ªç‚¹ï¼š</p>
<ol>
<li>md5 æœªåŠ ç›å“ˆå¸Œä½œä¸ºå¯†ç å­—æ®µä¿å­˜åˆ°æ•°æ®åº“ï¼Œå¾—åˆ°äº†å“ˆå¸Œæœ‰å¯èƒ½è¢«é€†æ¨å‡ºå¯†ç ã€‚</li>
<li>ç›´æ¥æ‹¼äº† <code>dvwaCurrentUser()</code>ï¼Œç›®å‰ä¸æ¸…æ¥šè¿™ä¸ªå‡½æ•°é‡Œæœ‰æ²¡æœ‰åšå¥½è½¬ä¹‰å¤„ç†ï¼Œæ²¡å¤„ç†å¯èƒ½å­˜åœ¨ SQL æ³¨å…¥ã€‚</li>
</ol>
<p>å…¨ç¨‹è¿™ä¸ª <code>$GLOBALS["___mysqli_ston"]</code> åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆç©æ„å„¿è®©æˆ‘æœ‰ç‚¹æ‡µï¼Œæœç´¢äº†ä¸‹å¥½åƒæ˜¯ SQL è¿æ¥ï¼Œç±»ä¼¼ Go ä¸­çš„ <code>sql.DB</code> å¯¹è±¡ï¼ˆæ„ä¼šå¥½å˜›ï¼‰ã€‚</p>
<p>åˆ«çš„é—®é¢˜å°±æ²¡çœ‹å‡ºæ¥äº†ã€‚</p>
<h3 id=æé«˜éš¾åº¦è´¥åŒ—>æé«˜éš¾åº¦ï¼ˆè´¥åŒ—ï¼‰</h3>
<p>ç›´æ¥ä½¿ç”¨ Low éš¾åº¦ä¸‹çš„æ–¹æ³•ï¼Œ<code>window.location.href</code>ï¼Œä¼šæŠ¥é”™ï¼š<code>That request didn't look correct</code>ã€‚</p>
<p>ç®€å•çœ‹ä¸€ä¸‹ Medium éš¾åº¦ä¸‹çš„ä»£ç ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=o>&lt;?</span><span class=nx>php</span>

<span class=k>if</span><span class=p>(</span> <span class=nx>isset</span><span class=p>(</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;Change&#39;</span> <span class=p>]</span> <span class=p>)</span> <span class=p>)</span> <span class=p>{</span>
    <span class=c1>// Checks to see where the request came from
</span><span class=c1></span>    <span class=k>if</span><span class=p>(</span> <span class=nx>stripos</span><span class=p>(</span> <span class=nv>$_SERVER</span><span class=p>[</span> <span class=s1>&#39;HTTP_REFERER&#39;</span> <span class=p>]</span> <span class=p>,</span><span class=nv>$_SERVER</span><span class=p>[</span> <span class=s1>&#39;SERVER_NAME&#39;</span> <span class=p>])</span> <span class=o>!==</span> <span class=k>false</span> <span class=p>)</span> <span class=p>{</span>
        <span class=c1>// Get input
</span><span class=c1></span>        <span class=nv>$pass_new</span>  <span class=o>=</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;password_new&#39;</span> <span class=p>];</span>
        <span class=nv>$pass_conf</span> <span class=o>=</span> <span class=nv>$_GET</span><span class=p>[</span> <span class=s1>&#39;password_conf&#39;</span> <span class=p>];</span>

        <span class=c1>// Do the passwords match?
</span><span class=c1></span>        <span class=k>if</span><span class=p>(</span> <span class=nv>$pass_new</span> <span class=o>==</span> <span class=nv>$pass_conf</span> <span class=p>)</span> <span class=p>{</span>
            <span class=c1>// They do!
</span><span class=c1></span>            <span class=nv>$pass_new</span> <span class=o>=</span> <span class=p>((</span><span class=nx>isset</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])</span> <span class=o>&amp;&amp;</span> <span class=nx>is_object</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>]))</span> <span class=o>?</span> <span class=nx>mysqli_real_escape_string</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>],</span>  <span class=nv>$pass_new</span> <span class=p>)</span> <span class=o>:</span> <span class=p>((</span><span class=nx>trigger_error</span><span class=p>(</span><span class=s2>&#34;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&#34;</span><span class=p>,</span> <span class=nx>E_USER_ERROR</span><span class=p>))</span> <span class=o>?</span> <span class=s2>&#34;&#34;</span> <span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>));</span>
            <span class=nv>$pass_new</span> <span class=o>=</span> <span class=nx>md5</span><span class=p>(</span> <span class=nv>$pass_new</span> <span class=p>);</span>

            <span class=c1>// Update the database
</span><span class=c1></span>            <span class=nv>$insert</span> <span class=o>=</span> <span class=s2>&#34;UPDATE `users` SET password = &#39;</span><span class=si>$pass_new</span><span class=s2>&#39; WHERE user = &#39;&#34;</span> <span class=o>.</span> <span class=nx>dvwaCurrentUser</span><span class=p>()</span> <span class=o>.</span> <span class=s2>&#34;&#39;;&#34;</span><span class=p>;</span>
            <span class=nv>$result</span> <span class=o>=</span> <span class=nx>mysqli_query</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>],</span>  <span class=nv>$insert</span> <span class=p>)</span> <span class=k>or</span> <span class=k>die</span><span class=p>(</span> <span class=s1>&#39;&lt;pre&gt;&#39;</span> <span class=o>.</span> <span class=p>((</span><span class=nx>is_object</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>]))</span> <span class=o>?</span> <span class=nx>mysqli_error</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])</span> <span class=o>:</span> <span class=p>((</span><span class=nv>$___mysqli_res</span> <span class=o>=</span> <span class=nx>mysqli_connect_error</span><span class=p>())</span> <span class=o>?</span> <span class=nv>$___mysqli_res</span> <span class=o>:</span> <span class=k>false</span><span class=p>))</span> <span class=o>.</span> <span class=s1>&#39;&lt;/pre&gt;&#39;</span> <span class=p>);</span>

            <span class=c1>// Feedback for the user
</span><span class=c1></span>            <span class=k>echo</span> <span class=s2>&#34;&lt;pre&gt;Password Changed.&lt;/pre&gt;&#34;</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>else</span> <span class=p>{</span>
            <span class=c1>// Issue with passwords matching
</span><span class=c1></span>            <span class=k>echo</span> <span class=s2>&#34;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&#34;</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=k>else</span> <span class=p>{</span>
        <span class=c1>// Didn&#39;t come from a trusted source
</span><span class=c1></span>        <span class=k>echo</span> <span class=s2>&#34;&lt;pre&gt;That request didn&#39;t look correct.&lt;/pre&gt;&#34;</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=p>((</span><span class=nx>is_null</span><span class=p>(</span><span class=nv>$___mysqli_res</span> <span class=o>=</span> <span class=nx>mysqli_close</span><span class=p>(</span><span class=nv>$GLOBALS</span><span class=p>[</span><span class=s2>&#34;___mysqli_ston&#34;</span><span class=p>])))</span> <span class=o>?</span> <span class=k>false</span> <span class=o>:</span> <span class=nv>$___mysqli_res</span><span class=p>);</span>
<span class=p>}</span>

<span class=cp>?&gt;</span><span class=err>
</span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°ä¸»è¦å˜åŒ–åœ¨äºè¿›å…¥ä¸šåŠ¡å¤„ç†å‰ï¼ŒåŠ ä¸Šäº†ä¸€æ¡åˆ¤æ–­ï¼š<code>if( stripos( $_SERVER[ 'HTTP_REFERER' ] ,$_SERVER[ 'SERVER_NAME' ]) !== false )</code>ã€‚</p>
<p><code>stripos</code> å‡½æ•°æŸ¥æ‰¾å­ä¸²å‡ºç°åœ¨å­—ç¬¦ä¸²é‡Œçš„ä½ç½®ï¼Œæ²¡æ‰¾åˆ°çš„æƒ…å†µä¸‹è¿”å›<code>false</code>ï¼Œè¿™æ¡åˆ¤æ–­çš„æ„æ€æ˜¯åœ¨ <code>HTTP_REFERER</code> é‡ŒæŸ¥æ‰¾ <code>SERVER_NAME</code> æ˜¯å¦å‡ºç°ï¼Œå¦‚æœå‡ºç°æ‰è¿›ä¸€æ­¥å¤„ç†ã€‚æ‰€ä»¥ Medium éš¾åº¦ä¸‹é—®é¢˜å˜æˆäº†æ€ä¹ˆ bypass è¿™ä¸ªåˆ¤æ–­ã€‚</p>
<p>æœç´¢ <code>SERVER_NAME</code> çš„æ–‡æ¡£å¯ä»¥æ‰¾åˆ°è¿™æ ·çš„è¯´æ˜ï¼š</p>
<blockquote>
<p>&lsquo;SERVER_NAME&rsquo;</p>
<p>The name of the server host under which the current script is executing. If the script is running on a virtual host, this will be the value defined for that virtual host.</p>
<blockquote>
<p><strong>Note</strong>: Under Apache 2, you must set <code>UseCanonicalName = On</code> and <code>ServerName</code>. Otherwise, this value reflects the hostname supplied by the client, which can be spoofed. It is not safe to rely on this value in security-dependent contexts.</p>
</blockquote>
</blockquote>
<p>åœ¨ Apache2 ç¯å¢ƒä¸‹ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®é…ç½® <code>UseCanonicalName = On</code>å’Œ<code>ServerName</code>çš„è¯ï¼Œ<code>$_SERVER['SERVER_NAME']</code>çš„å€¼å°±æ˜¯ HTTP è¯·æ±‚å¤´é‡Œçš„ Hostnameã€‚</p>
<p><code>HTTP_REFERER</code> çš„æ–‡æ¡£è¿™æ ·è¯´ï¼š</p>
<blockquote>
<p>&lsquo;HTTP_REFERER&rsquo;</p>
<p>The address of the page (if any) which referred the user agent to the current page. This is set by the user agent. Not all user agents will set this, and some provide the ability to modify HTTP_REFERER as a feature. In short, it cannot really be trusted.</p>
</blockquote>
<p>ä½†é—æ†¾çš„æ˜¯ï¼Œä¸ç®¡ <code>Host</code> è¿˜æ˜¯ <code>Referer</code> éƒ½æ— æ³•ä¿®æ”¹ï¼ˆå—åˆ¶äºæµè§ˆå™¨çš„çº¦æŸï¼‰ï¼Œæ‰€ä»¥å°½ç®¡æ–‡æ¡£é‡Œè¯´å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œä½†åæ­£æˆ‘è¿™ä¼šå„¿æƒ³ä¸å‡ºåˆ©ç”¨æ–¹æ³•ã€‚</p>
<p>äºæ˜¯çœ‹çœ¼å¸®åŠ©æ–‡æ¡£ï¼Œæç¤ºéœ€è¦ç»“åˆ XSS ä¹‹ç±»çš„æ´æ”»ç ´ã€‚è¿™ä¹ˆä¸€è¯´å°±èŒ…å¡é¡¿å¼€äº†ï¼Œè™½ç„¶è¯´æ˜¯ä¸ªç»ƒä¹ é¶åœºä½†ä¹Ÿä¸æ˜¯é¢˜ç›®è¯´CSRFå°±éè¦é¡¶ç€CSRFæ­»ç£•ï¼Œåˆ«çš„æ´ä¸€ä¸ªä¸ç¢°ã€‚ï¼ˆå¤§ä½¬è¯´ä¸å®šèƒ½æ­»ç£•æˆåŠŸï¼Œæˆ‘ä¹Ÿæƒ³å˜å¤§ä½¬å•Š=ã€‚=ï¼‰</p>
<p>è€ƒè™‘å¤šä¸ªæ¼æ´è”åˆåˆ©ç”¨ç¡®å®å¸¸è§ä¹Ÿä¸€å®šè¦å­¦ï¼Œä½†ç°åœ¨æš‚ä¸”è¿˜æ˜¯å…äº†å§=ã€‚=ç´¯æ­»ã€‚åé¢æ… XSS çš„æ—¶å€™å†å›å¤´é¡ºä¾¿æŠŠ Medium éš¾åº¦åšäº†ã€‚</p>
<p>çœ‹äº†çœ¼ High éš¾åº¦ä¸‹åŒæ ·è¦ç»“åˆå¤šä¸ªæ¼æ´åˆ©ç”¨ï¼Œæˆ‘å¯»æ€èƒ½çªç ´ CORS çš„è¯å³ä½¿æœ‰ CSRF Token ä¹Ÿå¥½åŠï¼Œç›´æ¥ xhr æŠŠè¡¨å•é¡µæ‹¿ä¸‹æ¥å°±å¥½ã€‚</p>
<h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>å¥½çš„ï¼Œç°åœ¨ CSRF æ„Ÿè§‰æœ‰ç‚¹éš¾åˆ©ç”¨äº†ã€‚ä¸»è¦è¿˜æ˜¯ç°ä»£æµè§ˆå™¨çš„åŒæºç­–ç•¥è¶Šæ¥è¶Šä¸¥æ ¼ï¼Œå¾€é»˜è®¤å®‰å…¨é æ‹¢ï¼Œè¿­ä»£é€Ÿåº¦å¿«çš„ä¸€æ‰¹ã€‚æµä¼ ä¸‹æ¥çš„åˆ©ç”¨æ–¹æ³•å¦‚ä»Šä¸€è¯•å°±å¯„ï¼ŒåŠç‚¹å±ç”¨æ²¡æœ‰ï¼Œè¿æ­ä¸€ä¸ªèƒ½å¤ç°æ¼æ´çš„ç¯å¢ƒéƒ½éº»çƒ¦çš„ä¸€æ‰¹ï¼ˆæ¯”å¦‚å…·ä½“å“ªä¸ªç‰ˆæœ¬çš„ Chrome ä¿®äº†<code>SameSite</code>ï¼Œå»å“ªå„¿ä¸‹è½½å†å²ç‰ˆæœ¬ï¼Œæå‡ºä¸€å †æµè§ˆå™¨å…±å­˜å·´æ‹‰å·´æ‹‰ï¼‰</p>
<p>ç„¶åå°±å¾ˆéš¾ä¸æƒ³èµ·äº’è”ç½‘ä¸Šä¸åœé‡å¤çš„è§‚ç‚¹äº†ã€‚ä¸ºä»€ä¹ˆä¸è¦åšä¼¸æ‰‹å…šï¼ŸæŠ›å¼€å¯¹å¤§ç¯å¢ƒçš„å½±å“ï¼Œä¼¸æ‰‹å…šä¸€ç›´æœ‰ä¸ªé€šç—…ï¼Œå°±æ˜¯æ²¡æœ‰å­¦ä¹ çš„èƒ½åŠ›ã€‚è¿™é‡Œçš„å­¦ä¹ è¯´çš„æ˜¯ <em>æ”¶é›†ã€æ•´ç†ã€å½’çº³ã€æ€»ç»“ã€åˆ©ç”¨</em> ä¿¡æ¯çš„èƒ½åŠ›ã€‚åœ¨ä¸€ä¸ªé¢†åŸŸç‹¬ç«‹æ¢ç´¢æœªçŸ¥ï¼Œè¿™æ˜¯çœŸæ­£ç‹¬ç«‹çš„æ ‡å¿—ã€‚</p>
<p>è®²çœŸï¼Œå¤ªæ€€å¿µä¸Šå­¦çš„æ—¥å­äº†ï¼Œè„‘å­ç©ºç©ºæ— å¿§æ— è™‘ã€‚çœŸæ­£å‡ºæ¥å·¥ä½œå–åŠ›ä¹‹åæ‰ä¼šæ¸æ¸æ„è¯†åˆ°ä»€ä¹ˆå«ä¸è¿›åˆ™é€€ã€‚æˆ‘è§‰å¾—ä¸å…¶è¯´ä»€ä¹ˆç¤¾ä¼šåœ¨æƒ©ç½šä¸åŠªåŠ›çš„äººï¼Œä¸å¦‚è¯´è¿™ä¸ªç¤¾ä¼šåœ¨æƒ©ç½šæ‰€æœ‰äººã€‚ä¹Ÿä¸è¯¥è¯´æ˜¯ç¤¾ä¼šï¼Œè€Œæ˜¯äººçš„å¤©æ€§ï¼Œè®©äººç”Ÿæ¥å°±è¦å—å°½è‹¦éš¾ã€‚</p>
<p>æ‰¯è¿œäº†ã€‚å°±è¿™æ ·å§ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/security/>security</a>
<a href=/blog/tags/dvwa/>dvwa</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/get-start-dvwa-05/>
<div class=article-details>
<h2 class=article-title>DVWAä¸Šæ‰‹è®°å½•-æ–‡ä»¶ä¸Šä¼ </h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/get-start-dvwa-04/>
<div class=article-details>
<h2 class=article-title>DVWAä¸Šæ‰‹è®°å½•-æ–‡ä»¶åŒ…å«</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/get-start-dvwa-02/>
<div class=article-details>
<h2 class=article-title>DVWAä¸Šæ‰‹è®°å½•-ç®€å•å°è¯•</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/get-start-dvwa-01/>
<div class=article-details>
<h2 class=article-title>DVWAä¸Šæ‰‹è®°å½•-åˆä½“éªŒ</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/redtiger-lab-training-note-2022-05-06/>
<div class=article-details>
<h2 class=article-title>red tiger æ‰“é¶æ—¥å¿—</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"DVWAä¸Šæ‰‹è®°å½•-CSRF",options:{autoCreateIssue:!1,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#å‰è¨€>å‰è¨€</a></li>
<li><a href=#åŸç†>åŸç†</a>
<ol>
<li><a href=#åˆ©ç”¨æ–¹å¼>åˆ©ç”¨æ–¹å¼</a></li>
<li><a href=#å’Œcorsçš„å…³ç³»>å’ŒCORSçš„å…³ç³»</a></li>
<li><a href=#é˜²å¾¡>é˜²å¾¡</a></li>
</ol>
</li>
<li><a href=#è§£é¢˜>è§£é¢˜</a>
<ol>
<li><a href=#ä¿¡æ¯æ”¶é›†>ä¿¡æ¯æ”¶é›†</a></li>
<li><a href=#é¢˜è§£>é¢˜è§£</a></li>
<li><a href=#ä»£ç å®¡è®¡>ä»£ç å®¡è®¡</a></li>
<li><a href=#æé«˜éš¾åº¦è´¥åŒ—>æé«˜éš¾åº¦ï¼ˆè´¥åŒ—ï¼‰</a></li>
</ol>
</li>
<li><a href=#æ€»ç»“>æ€»ç»“</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>