<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‚è€ƒèµ„æ–™å¦‚ä¸‹ Django æ–‡æ¡£ - Model field reference SQLAlchemy ä¸­çš„çº§è”åˆ é™¤ 1. ForeignKey ForeignKeyç”¨äºå¤šå¯¹ä¸€å…³ç³»ï¼Œç›´æ¥å¯¹åº”åˆ°æ•°æ®åº“å¤–é”®çš„æ¦‚å¿µã€‚ä½¿ç”¨ForeignKeyéœ€è¦æŒ‡å®š"><title>Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/django-%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3/>
<link rel=stylesheet href=/blog/scss/style.min.0d9be282caaf69ff0e3f0a40f4d0e5e03f8f60a517138ffd9300e3436ea56fdf.css><script src=https://unpkg.com/dayjs@1.8.21/dayjs.min.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/plugin/relativeTime.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/locale/zh-cn.js></script>
<script>dayjs.locale('zh-cn'),dayjs.extend(dayjs_plugin_relativeTime)</script><meta property="og:title" content="Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£">
<meta property="og:description" content="å‚è€ƒèµ„æ–™å¦‚ä¸‹ Django æ–‡æ¡£ - Model field reference SQLAlchemy ä¸­çš„çº§è”åˆ é™¤ 1. ForeignKey ForeignKeyç”¨äºå¤šå¯¹ä¸€å…³ç³»ï¼Œç›´æ¥å¯¹åº”åˆ°æ•°æ®åº“å¤–é”®çš„æ¦‚å¿µã€‚ä½¿ç”¨ForeignKeyéœ€è¦æŒ‡å®š">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/django-%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="django"><meta property="article:tag" content="python"><meta property="article:published_time" content="2019-03-06T21:11:35+08:00"><meta property="article:modified_time" content="2019-03-06T21:11:35+08:00">
<meta name=twitter:title content="Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£">
<meta name=twitter:description content="å‚è€ƒèµ„æ–™å¦‚ä¸‹ Django æ–‡æ¡£ - Model field reference SQLAlchemy ä¸­çš„çº§è”åˆ é™¤ 1. ForeignKey ForeignKeyç”¨äºå¤šå¯¹ä¸€å…³ç³»ï¼Œç›´æ¥å¯¹åº”åˆ°æ•°æ®åº“å¤–é”®çš„æ¦‚å¿µã€‚ä½¿ç”¨ForeignKeyéœ€è¦æŒ‡å®š">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<li>
<a href=/blog/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span>
</a>
</li>
<li>
<a href=/blog/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/python/>
python
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/django-%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3/>Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2019-03-06T21:11:35+08:00>2019å¹´ 3æœˆ 6æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<blockquote>
<p>å‚è€ƒèµ„æ–™å¦‚ä¸‹</p>
<ul>
<li><a class=link href=https://docs.djangoproject.com/zh-hans/2.1/ref/models/fields/ target=_blank rel=noopener>Django æ–‡æ¡£ - Model field reference</a></li>
<li><a class=link href=https://graycarl.me/2014/03/24/sqlalchemy-cascade-delete.html target=_blank rel=noopener>SQLAlchemy ä¸­çš„çº§è”åˆ é™¤</a></li>
</ul>
</blockquote>
<h2 id=1-foreignkey>1. ForeignKey</h2>
<p><code>ForeignKey</code>ç”¨äºå¤šå¯¹ä¸€å…³ç³»ï¼Œç›´æ¥å¯¹åº”åˆ°æ•°æ®åº“å¤–é”®çš„æ¦‚å¿µã€‚ä½¿ç”¨<code>ForeignKey</code>éœ€è¦æŒ‡å®šå¼•ç”¨çš„ç›®æ ‡è¡¨ï¼Œä¼šè‡ªåŠ¨å…³è”åˆ°ç›®æ ‡è¡¨çš„ä¸»é”®ï¼ˆä¸€èˆ¬æ˜¯<code>id</code>å­—æ®µï¼‰ã€‚</p>
<p>ä¾‹å­å¦‚ä¸‹ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>

<span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>parent</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;Parent&#39;</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span> <span class=p>)</span>
    <span class=c1># ...</span>

<span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=c1># ...</span>
    <span class=k>pass</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯¹æ¯”ä¹‹ sqlalchemyï¼Œä¸€è¡Œ<code>parent=models.ForeignKey(...)</code>åŒ…å«äº† sqlalchemy ä¸­çš„<code>ForeignKey</code>å’Œ<code>relationship</code>ä¸¤éƒ¨åˆ†å†…å®¹ã€‚</p>
<h3 id=11-å‚æ•°on_delete>1.1 å‚æ•°ï¼šon_delete</h3>
<p><code>on_delete</code>æ„ä¸ºå½“<code>ForeignKey</code>å¼•ç”¨çš„å¯¹è±¡è¢«åˆ é™¤æ—¶è¿›è¡Œçš„æ“ä½œã€‚</p>
<p>æœ‰å‡ ä¸ªå¯ä»¥è€ƒè™‘çš„é€‰é¡¹ã€‚</p>
<h4 id=111-modelscascade>1.1.1 models.CASCADE</h4>
<p><code>CASCADE</code>æ„ä¸ºçº§è”ï¼Œ<code>on_delete</code>è®¾ç½®ä¸º<code>CASCADE</code>æ—¶æ„ä¸ºæ‰§è¡Œçº§è”åˆ é™¤ã€‚ä¾æ®æ–‡æ¡£ï¼ŒDjango ä¼šæ¨¡ä»¿ SQL çš„<code>ON DELETE CASCADE</code>ï¼Œå¯¹åŒ…å«äº†<code>ForeignKey</code>çš„å¯¹è±¡æ‰§è¡Œåˆ é™¤ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸ä¼šè°ƒç”¨è¢«çº§è”åˆ é™¤å¯¹è±¡ä¸Šçš„<code>model.delete()</code>ï¼Œä½†æ˜¯ä¼šå‘é€<a class=link href=https://docs.djangoproject.com/zh-hans/2.1/ref/signals/#django.db.models.signals.pre_delete target=_blank rel=noopener><code>pre_delete</code></a>å’Œ<a class=link href=https://docs.djangoproject.com/zh-hans/2.1/ref/signals/#django.db.models.signals.post_delete target=_blank rel=noopener><code>post_delete</code></a>ä¿¡å·ã€‚</p>
<h4 id=1112-modelsprotect>1.1.1.2 models.PROTECT</h4>
<p><code>PROTECT</code>æ„ä¸ºä¿æŠ¤ï¼Œ<code>on_delete</code>è®¾ç½®ä¸º<code>PROTECT</code>æ„å‘³ç€è¦é˜»æ­¢åˆ é™¤æ“ä½œå‘ç”Ÿã€‚åˆ é™¤å…³è”çš„å¯¹è±¡æ—¶ï¼Œ<code>ForeignKey</code>çš„<code>on_delete</code>è®¾ç½®ä¸º<code>PROTECT</code>ä¼šè§¦å‘<code>ProtectedError</code>ã€‚</p>
<h4 id=1113-modelsset_null>1.1.1.3 models.SET_NULL</h4>
<p>å¦‚å…¶åæ‰€è¿°ï¼Œå¦‚æœè¿™ä¸ª<code>ForeignKey</code>æ˜¯ nullable çš„ï¼Œåˆ™å…³è”çš„å¯¹è±¡åˆ é™¤æ—¶å°†å¤–é”®è®¾ç½®ä¸º nullã€‚</p>
<h4 id=1114-modelsset_default>1.1.1.4 models.SET_DEFAULT</h4>
<p>å¦‚å…¶åæ‰€è¿°ï¼Œå¦‚æœè¿™ä¸ª<code>ForeignKey</code>è®¾ç½®äº†<code>DEFAULT</code>ï¼Œåˆ™å…³è”çš„å¯¹è±¡åˆ é™¤æ—¶è®¾ç½®è¿™ä¸ªå¤–é”®ä¸º<code>DEFAULT</code>å€¼ã€‚</p>
<h4 id=1115-modelsset>1.1.1.5 models.SET</h4>
<p>åœ¨å…³è”çš„å¯¹è±¡åˆ é™¤æ—¶ï¼Œè®¾ç½®ä¸ºä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå¯ä»¥èµ‹å€¼ç»™è¿™ä¸ª ForeignKey çš„å¯¹è±¡æˆ–è€…ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ã€‚</p>
<p>å®˜æ–¹ä¾‹å­å¦‚ä¸‹ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.conf</span> <span class=kn>import</span> <span class=n>settings</span>
<span class=kn>from</span> <span class=nn>django.contrib.auth</span> <span class=kn>import</span> <span class=n>get_user_model</span>
<span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>

<span class=k>def</span> <span class=nf>get_sentinel_user</span><span class=p>():</span>
    <span class=k>return</span> <span class=n>get_user_model</span><span class=p>()</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_create</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=s1>&#39;deleted&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>

<span class=k>class</span> <span class=nc>MyModel</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span>
        <span class=n>settings</span><span class=o>.</span><span class=n>AUTH_USER_MODEL</span><span class=p>,</span>
        <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>SET</span><span class=p>(</span><span class=n>get_sentinel_user</span><span class=p>),</span>
    <span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=1116-modelsdo_nothing>1.1.1.6 models.DO_NOTHING</h4>
<p>åº”è¯¥ä¸ç”¨å¤šè¯´äº†å§ã€‚Django ä¸ä¼šåšå¤šä½™çš„äº‹æƒ…ï¼Œä½†æ˜¯å¦‚æœåç«¯çš„æ•°æ®åº“æœåŠ¡æœ‰å¼ºåˆ¶å®Œæ•´æ€§çº¦æŸï¼Œé™¤éä½ åœ¨æ•°æ®åº“ä¸€ç«¯è‡ªå·±å®šä¹‰äº†<code>ON DELETE</code>ï¼Œå¦åˆ™ä¼šè§¦å‘<code>IntegrityError</code>ã€‚</p>
<h3 id=12-å‚æ•°limited_choice_to>1.2 å‚æ•°ï¼šlimited_choice_to</h3>
<p>å¼ºåˆ¶çº¦æŸä¸º django.admin æˆ–è€… ModelForm æ¸²æŸ“æ—¶æä¾›æœ‰é™çš„å¯é€‰é¡¹ã€‚</p>
<p>æ¥å—å‚æ•°ä¸º<code>dict</code>æˆ–è€…<code>Q</code>å¯¹è±¡ã€è¿”å›<code>Q</code>å¯¹è±¡çš„å¯è°ƒç”¨å¯¹è±¡ã€‚</p>
<p>å®˜æ–¹ä¾‹å­ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>staff_member</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span>
    <span class=n>User</span><span class=p>,</span>
    <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>,</span>
    <span class=n>limit_choices_to</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;is_staff&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>},</span>
<span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p>Q å¯¹è±¡æ˜¯ä»€ä¹ˆç©æ„å„¿è¿™ä¸ªæˆ‘ææ˜ç™½äº†å†è¯´&mldr;</p>
<h3 id=13-å‚æ•°related_name>1.3 å‚æ•°ï¼šrelated_name</h3>
<p>è®¾ç½®åå‘å…³è”çš„å­—æ®µåï¼Œå’Œ<code>sqlalchemy</code>çš„<code>backref</code>ç±»ä¼¼ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>parent</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;Parent&#39;</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=n>Parent</span><span class=o>.</span><span class=n>child_set</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> <span class=c1># æœªè®¾ç½® related_name</span>
<span class=n>Parent</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> <span class=c1># è®¾ç½® related_name=children</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=14-å‚æ•°related_query_name>1.4 å‚æ•°ï¼šrelated_query_name</h3>
<p>related_query_name å’Œ related_name ç±»ä¼¼ï¼Œè®¾ç½®åå‘å¼•ç”¨æŸ¥è¯¢æ—¶æ¡ä»¶çš„å‰ç¼€åã€‚ä¸¾ä¾‹æ¥è¯´ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>parent</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;Parent&#39;</span><span class=p>)</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=n>Parent</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>Child__name</span><span class=o>=</span><span class=s1>&#39;æ²™é›•ç½‘å‹&#39;</span><span class=p>)</span> <span class=c1># æœªè®¾ç½® related_query_name</span>
<span class=n>Parent</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>myboy__name</span><span class=o>=</span><span class=s1>&#39;æ²™é›•ç½‘å‹&#39;</span><span class=p>)</span> <span class=c1># è®¾ç½® related_query_name=myboy</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=15-å‚æ•°to_field>1.5 å‚æ•°ï¼što_field</h3>
<p>å¾—åˆ°<code>ForeignKey</code>å…³è”çš„æ¨¡å‹çš„å­—æ®µï¼Œé»˜è®¤æ˜¯ä¸»é”®ï¼Œå¦‚æœæŒ‡å®šçš„ä¸æ˜¯ä¸»é”®é‚£ä¹ˆå¿…é¡»æœ‰<code>unique</code>çº¦æŸæ‰è¡Œã€‚</p>
<h3 id=16-å‚æ•°db_constraint>1.6 å‚æ•°ï¼šdb_constraint</h3>
<p>è¦ä¸è¦åˆ›å»ºæ•°æ®åº“å±‚çº§çš„çº¦æŸï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åç«¯æ•°æ®åº“æœåŠ¡ç¡®ä¿æ•°æ®å®Œæ•´æ€§ä¸å—ç ´åã€‚å¦‚æœè®¾ç½®ä¸º False é‚£ä¹ˆè®¿é—®ä¸å­˜åœ¨çš„å¯¹è±¡æ—¶ä¼šè§¦å‘ DoesNotExists å¼‚å¸¸ã€‚</p>
<h3 id=17-å‚æ•°swappable>1.7 å‚æ•°ï¼šswappable</h3>
<p>ç”¨äºå¤„ç†â€œæˆ‘æœ‰ä¸€ä¸ªæŠ½è±¡ç±»æ¨¡å‹ä½†æ˜¯è¿™ä¸ªæ¨¡å‹æœ‰ä¸€ä¸ªå¤–é”®â€çš„æƒ…å†µï¼Œå…¸å‹å°±æ˜¯<code>AUTH_USER_MODEL</code>ã€‚</p>
<p>ä¸€èˆ¬ä¸ç”¨æ”¹åˆ°ï¼Œè¿™ä¸ªå±æ€§æ§åˆ¶äº†æ•°æ®åº“è¿ç§»æ—¶å¦‚ä½•å¤„ç†è¿™ä¸ªå¤–é”®å…³è”çš„è¡¨ï¼Œæ€»ä¹‹ä¿æŒé»˜è®¤å€¼å°±è¡Œäº†ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½æ”¯æŒäº†ä½¿ç”¨è‡ªå®šä¹‰çš„ç”¨æˆ·æ¨¡å‹æ›¿ä»£ <code>django.auth.models.User</code> ä¹‹ç±»çš„ç©æ„å„¿ã€‚</p>
<h2 id=2-onetoonefield>2. OneToOneField</h2>
<p><code>OneToOneField</code> åŸºæœ¬å°±æ˜¯ä¸€ä¸ªåŠ äº†<code>unique</code>çº¦æŸçš„<code>ForeignKey</code>ã€‚ä½¿ç”¨ä¸Šä¸ ForeignKey ç•¥æœ‰ä¸åŒã€‚</p>
<p>é¦–å…ˆæ˜¯è®¿é—® <code>OneToOneField</code> æ—¶ï¼Œå¾—åˆ°çš„ä¸æ˜¯ <code>QuerySet</code> è€Œæ˜¯ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># ä¼˜ç”Ÿä¼˜è‚²æ”¿ç­–ï¼ˆ</span>
<span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>child</span> <span class=o>=</span> <span class=n>OneToOneField</span><span class=p>(</span><span class=s1>&#39;Child&#39;</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=n>parent</span><span class=o>.</span><span class=n>child</span> <span class=c1># =&gt; å¾—åˆ°ä¸€ä¸ª Child å®ä¾‹</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶æ¬¡æ˜¯åå‘å¼•ç”¨çš„åå­—æ˜¯æ¨¡å‹åå­—å°å†™ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>child</span><span class=o>.</span><span class=n>parent</span> <span class=c1># =&gt; å¾—åˆ°ä¸€ä¸ª Parent å®ä¾‹</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæŒ‡å®š <code>related_name</code> é‚£å°±å’Œ <code>ForeignKey</code> ä¸€ä¸ªè¡¨ç°ã€‚</p>
<h2 id=3-manytomanyfield>3. ManyToManyField</h2>
<p>åŸºæœ¬å’Œ<code>ForeignKey</code>ç›¸åŒã€‚</p>
<h3 id=31-å’Œ-foreignkey-ç›¸åŒçš„å‚æ•°>3.1 å’Œ <code>ForeignKey</code> ç›¸åŒçš„å‚æ•°</h3>
<ul>
<li>related_name</li>
<li>related_query_name</li>
<li>limited_choices_to</li>
<li>db_constraint</li>
<li>swappable</li>
</ul>
<p>limited_choices_to åœ¨æŒ‡å®šè‡ªå®šä¹‰ä¸­é—´è¡¨çš„æƒ…å†µä¸‹æ— æ•ˆã€‚</p>
<h3 id=32-å‚æ•°symmetrical>3.2 å‚æ•°ï¼šsymmetrical</h3>
<p>ç”¨äºå¤„ç†ä¸€ä¸ªè¡¨è‡ªå·±å¯¹è‡ªå·±çš„å¤šå¯¹å¤šå¼•ç”¨å¯¹ç§°æ€§ã€‚</p>
<p>Django çš„é»˜è®¤è¡Œä¸ºæ˜¯ï¼Œæˆ‘æ˜¯ä½ çš„æœ‹å‹ï¼Œé‚£ä¹ˆä½ å°±æ˜¯æˆ‘çš„æœ‹å‹ã€‚</p>
<p>è®¾ç½®äº†è¿™ä¸ªå‚æ•°åˆ™å¼ºè¿« Django æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼Œå…è®¸â€œè¢«æœ‹å‹â€ã€‚</p>
<h3 id=33-å‚æ•°through>3.3 å‚æ•°ï¼šthrough</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDjango ä¼šè‡ªè¡Œåˆ›å»ºä¸­é—´è¡¨ï¼Œè¿™ä¸ªå‚æ•°å¼ºåˆ¶æŒ‡å®šä¸­é—´è¡¨ã€‚</p>
<p>é»˜è®¤ä¸­é—´è¡¨æ¨¡å‹é‡ŒåŒ…å«ä¸‰ä¸ªå­—æ®µã€‚</p>
<ul>
<li>id</li>
<li>&lt;containing_model>_id</li>
<li>&lt;other_model>_id</li>
</ul>
<p>å¦‚æœæ˜¯è‡ªå·±å’Œè‡ªå·±çš„å¤šå¯¹å¤šå…³ç³»ï¼Œåˆ™</p>
<ul>
<li>id</li>
<li>from_&lt;model>_id</li>
<li>to_&lt;model>_id</li>
</ul>
<h3 id=34-å‚æ•°through_fields>3.4 å‚æ•°ï¼šthrough_fields</h3>
<p>å½“è‡ªè¡ŒæŒ‡å®šä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨åˆåŒ…å«äº†å¤šä¸ªå¤–é”®æ—¶ï¼ŒæŒ‡å®šå…³è”çš„å¤–é”®ç”¨ã€‚</p>
<p>ä¸¾ä¾‹ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>ModelA</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>b</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>ModelB</span><span class=p>,</span> <span class=n>through</span><span class=o>=</span><span class=s1>&#39;ModelC&#39;</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>ModelB</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=k>class</span> <span class=nc>ModelC</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>a</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;ModelA&#39;</span><span class=p>)</span>
    <span class=n>b</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;ModelB&#39;</span><span class=p>)</span>
    <span class=n>c</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;ModelA&#39;</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶åœ¨ä¸­é—´è¡¨ä¸­<code>a</code>å’Œ<code>c</code>éƒ½æ˜¯å¯¹<code>ModelA</code>çš„å¤–é”®ï¼Œäº§ç”Ÿäº†æ­§ä¹‰ï¼ŒDjango æ— æ³•è‡ªè¡Œå†³å®šç”¨å“ªä¸ªå¤–é”®æ¥å…³è” AB ä¸¤ä¸ªè¡¨ã€‚</p>
<p>è¿™æ—¶æä¾›å‚æ•°ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>b</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=s1>&#39;ModelB&#39;</span><span class=p>,</span> <span class=n>through</span><span class=o>=</span><span class=s1>&#39;ModelC&#39;</span><span class=p>,</span> <span class=n>through_fields</span><span class=o>=</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>
</code></pre></td></tr></table>
</div>
</div><p><code>ManyToManyField</code> å…³è”ä¸¤ä¸ªè¡¨æ€»æ˜¯ä¸å¯¹ç§°çš„å…³ç³»ï¼ˆæŒ‡æˆ‘æŠŠä½ å½“å…„å¼Ÿï¼Œä½ å´æƒ³å½“æˆ‘çˆ¸çˆ¸è¿™æ ·çš„å…³ç³»ã€‚æ­¤æ—¶â€œæˆ‘â€å¯¹â€œä½ â€çš„â€œå…„å¼Ÿâ€å…³ç³»å°±æ˜¯å•å‘çš„ã€‚ï¼‰ï¼Œè¿™å°±å½¢æˆäº†<strong>æ¥æº</strong>å’Œ<strong>ç›®æ ‡</strong>çš„æ¦‚å¿µã€‚</p>
<p><code>through_fields</code> çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ€»è¢«è®¤ä¸ºæ˜¯<strong>æ¥æº</strong>å­—æ®µï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯<strong>ç›®æ ‡</strong>å­—æ®µã€‚</p>
<h3 id=35-å‚æ•°db_table>3.5 å‚æ•°ï¼šdb_table</h3>
<p>æŒ‡å®š Django åˆ›å»ºçš„ä¸­é—´è¡¨çš„åå­—ï¼Œé»˜è®¤æ ¹æ®ä¸¤ä¸ªè¡¨è¡¨åå’Œ <code>ManyToManyField</code> çš„åå­—å†³å®šã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/django/>django</a>
<a href=/blog/tags/python/>python</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/%E8%BD%BB%E9%87%8F%E7%BA%A7-django-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E6%9C%80%E5%B0%8F%E7%9A%84-django-%E5%BA%94%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>è½»é‡çº§ django é˜…è¯»ç¬”è®°ï¼šæœ€å°çš„ django åº”ç”¨</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/b-tree/>
<div class=article-details>
<h2 class=article-title>Bæ ‘</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/avl-tree/>
<div class=article-details>
<h2 class=article-title>AVLæ ‘</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/pattern-match-in-python310/>
<div class=article-details>
<h2 class=article-title>pattern-match-in-python310</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/flask%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0wsgi/>
<div class=article-details>
<h2 class=article-title>Flaskæºç é˜…è¯»ç¬”è®°ï¼šWSGI</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£",options:{autoCreateIssue:!1,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#1-foreignkey>1. ForeignKey</a>
<ol>
<li><a href=#11-å‚æ•°on_delete>1.1 å‚æ•°ï¼šon_delete</a>
<ol>
<li><a href=#111-modelscascade>1.1.1 models.CASCADE</a></li>
<li><a href=#1112-modelsprotect>1.1.1.2 models.PROTECT</a></li>
<li><a href=#1113-modelsset_null>1.1.1.3 models.SET_NULL</a></li>
<li><a href=#1114-modelsset_default>1.1.1.4 models.SET_DEFAULT</a></li>
<li><a href=#1115-modelsset>1.1.1.5 models.SET</a></li>
<li><a href=#1116-modelsdo_nothing>1.1.1.6 models.DO_NOTHING</a></li>
</ol>
</li>
<li><a href=#12-å‚æ•°limited_choice_to>1.2 å‚æ•°ï¼šlimited_choice_to</a></li>
<li><a href=#13-å‚æ•°related_name>1.3 å‚æ•°ï¼šrelated_name</a></li>
<li><a href=#14-å‚æ•°related_query_name>1.4 å‚æ•°ï¼šrelated_query_name</a></li>
<li><a href=#15-å‚æ•°to_field>1.5 å‚æ•°ï¼što_field</a></li>
<li><a href=#16-å‚æ•°db_constraint>1.6 å‚æ•°ï¼šdb_constraint</a></li>
<li><a href=#17-å‚æ•°swappable>1.7 å‚æ•°ï¼šswappable</a></li>
</ol>
</li>
<li><a href=#2-onetoonefield>2. OneToOneField</a></li>
<li><a href=#3-manytomanyfield>3. ManyToManyField</a>
<ol>
<li><a href=#31-å’Œ-foreignkey-ç›¸åŒçš„å‚æ•°>3.1 å’Œ <code>ForeignKey</code> ç›¸åŒçš„å‚æ•°</a></li>
<li><a href=#32-å‚æ•°symmetrical>3.2 å‚æ•°ï¼šsymmetrical</a></li>
<li><a href=#33-å‚æ•°through>3.3 å‚æ•°ï¼šthrough</a></li>
<li><a href=#34-å‚æ•°through_fields>3.4 å‚æ•°ï¼šthrough_fields</a></li>
<li><a href=#35-å‚æ•°db_table>3.5 å‚æ•°ï¼šdb_table</a></li>
</ol>
</li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>