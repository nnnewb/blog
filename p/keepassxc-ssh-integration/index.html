<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ çªå‘å¥‡æƒ³ï¼Œå…ˆå‰ä¸€ç›´æŠŠå¯†ç å­˜åœ¨ keepassxc é‡Œï¼Œä½† SSH ç§˜é’¥æ˜¯å­˜åœ¨ keepassxc çš„å¤‡æ³¨é‡Œï¼Œç”¨çš„æ—¶å€™è¿˜å¾—å…ˆå¤åˆ¶å‡ºæ¥å»ºä¸ªæ–‡ä»¶ï¼Œè™½ç„¶åªç”¨æŠ˜è…¾ä¸€æ¬¡ä½†è¿˜æ˜¯å«Œéº»çƒ¦ã€‚ äºæ˜¯æƒ³åˆ° keepassxc è‡ªå¸¦"><title>å°é²œkeepassxcçš„sshé›†æˆ</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/keepassxc-ssh-integration/>
<link rel=stylesheet href=/blog/scss/style.min.5c88a5bc75732c20b0a5ccc3be5c148f782b1c20e20b6c73b276723850a33d6b.css><script src=https://unpkg.com/dayjs@1.8.21/dayjs.min.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/plugin/relativeTime.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/locale/zh-cn.js></script>
<script>dayjs.locale('zh-cn'),dayjs.extend(dayjs_plugin_relativeTime)</script><meta property="og:title" content="å°é²œkeepassxcçš„sshé›†æˆ">
<meta property="og:description" content="å‰è¨€ çªå‘å¥‡æƒ³ï¼Œå…ˆå‰ä¸€ç›´æŠŠå¯†ç å­˜åœ¨ keepassxc é‡Œï¼Œä½† SSH ç§˜é’¥æ˜¯å­˜åœ¨ keepassxc çš„å¤‡æ³¨é‡Œï¼Œç”¨çš„æ—¶å€™è¿˜å¾—å…ˆå¤åˆ¶å‡ºæ¥å»ºä¸ªæ–‡ä»¶ï¼Œè™½ç„¶åªç”¨æŠ˜è…¾ä¸€æ¬¡ä½†è¿˜æ˜¯å«Œéº»çƒ¦ã€‚ äºæ˜¯æƒ³åˆ° keepassxc è‡ªå¸¦">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/keepassxc-ssh-integration/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="æ‚è°ˆ"><meta property="article:tag" content="keepassxc"><meta property="article:tag" content="ssh"><meta property="article:published_time" content="2022-04-21T10:27:00+08:00"><meta property="article:modified_time" content="2022-04-21T10:27:00+08:00">
<meta name=twitter:title content="å°é²œkeepassxcçš„sshé›†æˆ">
<meta name=twitter:description content="å‰è¨€ çªå‘å¥‡æƒ³ï¼Œå…ˆå‰ä¸€ç›´æŠŠå¯†ç å­˜åœ¨ keepassxc é‡Œï¼Œä½† SSH ç§˜é’¥æ˜¯å­˜åœ¨ keepassxc çš„å¤‡æ³¨é‡Œï¼Œç”¨çš„æ—¶å€™è¿˜å¾—å…ˆå¤åˆ¶å‡ºæ¥å»ºä¸ªæ–‡ä»¶ï¼Œè™½ç„¶åªç”¨æŠ˜è…¾ä¸€æ¬¡ä½†è¿˜æ˜¯å«Œéº»çƒ¦ã€‚ äºæ˜¯æƒ³åˆ° keepassxc è‡ªå¸¦">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<li>
<a href=/blog/tags><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>æ ‡ç­¾</span>
</a>
</li>
<li>
<a href=/blog/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span>
</a>
</li>
<li>
<a href=/blog/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/%E6%9D%82%E8%B0%88/>
æ‚è°ˆ
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/keepassxc-ssh-integration/>å°é²œkeepassxcçš„sshé›†æˆ</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2022-04-21T10:27:00+08:00>2022å¹´ 4æœˆ 21æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 4 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>çªå‘å¥‡æƒ³ï¼Œå…ˆå‰ä¸€ç›´æŠŠå¯†ç å­˜åœ¨ keepassxc é‡Œï¼Œä½† SSH ç§˜é’¥æ˜¯å­˜åœ¨ keepassxc çš„å¤‡æ³¨é‡Œï¼Œç”¨çš„æ—¶å€™è¿˜å¾—å…ˆå¤åˆ¶å‡ºæ¥å»ºä¸ªæ–‡ä»¶ï¼Œè™½ç„¶åªç”¨æŠ˜è…¾ä¸€æ¬¡ä½†è¿˜æ˜¯å«Œéº»çƒ¦ã€‚</p>
<p>äºæ˜¯æƒ³åˆ° keepassxc è‡ªå¸¦ SSH é›†æˆï¼Œäºæ˜¯ç ”ç©¶äº†ä¸‹æ€ä¹ˆç”¨ SSH é›†æˆåœ¨ keepassxc é‡Œä¿å­˜ç§˜é’¥å¯¹ï¼Œçœæ‰å¤åˆ¶å‡ºç§˜é’¥å†…å®¹åˆ°æ–‡ä»¶é‡Œçš„è¿‡ç¨‹ï¼Œè¿˜æ›´å®‰å…¨ã€‚</p>
<h2 id=è¿‡ç¨‹>è¿‡ç¨‹</h2>
<h3 id=å¹³å°å’Œé€‰å‹>å¹³å°å’Œé€‰å‹</h3>
<p>é¦–å…ˆç¡®å®š keepassxc å’Œ ssh è¿è¡Œçš„å¹³å°ï¼Œkeepassxc æœ¬ä½“æ˜¯æ”¯æŒ Windows/MacOS/Linux ä¸‰ç«¯çš„ï¼Œssh åœ¨Windowsä¸Šå€’æ˜¯æœ‰å‡ ç§ä¸åŒçš„é€‰å‹ã€‚</p>
<p>åœ¨ Windows 10 Build 1809 ç‰ˆæœ¬ä¹‹åï¼ŒWindows å·²ç»å†…ç½®äº† OpenSSH è½¯ä»¶ï¼Œè¿˜åœ¨ç”¨ PuTTY çš„å¯ä»¥çœæ‰ PuTTY äº†ã€‚</p>
<p>æ—§ç‚¹çš„ Windows å¯ä»¥é€‰æ‹© PuTTY æˆ–è€…è£…ä¸€ä¸ªåŸºäº MinGW çš„ OpenSSHï¼Œå¦‚ Git-SCM è‡ªå¸¦çš„ OpenSSH æˆ–è€… MSYS2ã€MinGW64 ä¸€ç±»ã€‚</p>
<h3 id=åŸç†>åŸç†</h3>
<p>keepassxc çš„ ssh é›†æˆæœ¬è´¨æ˜¯ä¸»åŠ¨å¾€ ssh-agent æ·»åŠ ç§˜é’¥ï¼Œssh å‘½ä»¤ä» ssh-agent è¯»åˆ°ç§˜é’¥ï¼Œå°è¯•ç”¨ç§˜é’¥è¿æ¥æœåŠ¡å™¨ã€‚è¡¨ç°å‡ºçš„æ•ˆæœå°±æ˜¯å’Œç›´æ¥æŠŠç§˜é’¥æ”¾åœ¨ <code>.ssh/id_rsa</code> ä¹Ÿæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<p>keepassxc è¿˜æ”¯æŒè§£é”è‡ªåŠ¨æ·»åŠ å’Œé”å®šæ—¶è‡ªåŠ¨åˆ é™¤ï¼Œè¿˜æœ‰è¶…æ—¶è‡ªåŠ¨åˆ é™¤ï¼Œå®‰å…¨æ€§ä¼šç¨å†å¥½ä¸€ç‚¹ï¼Œå¯æƒœ Windows è‡ªå¸¦çš„ OpenSSH ä¸æ”¯æŒä½¿ç”¨ç§˜é’¥æ—¶ç»™ç”¨æˆ·ç¡®è®¤ï¼ˆè§ issue <a class=link href=https://github.com/PowerShell/Win32-OpenSSH/issues/1056 target=_blank rel=noopener>#1056</a>ï¼‰ï¼Œå¯¼è‡´å¼€å¯ keepassxc çš„ç¡®è®¤åŠŸèƒ½æ—¶ä¼šæ·»åŠ ç§˜é’¥å¤±è´¥ã€‚</p>
<p>è‡³äº ssh-agent çš„åŸç†å°±ç•¥è¿‡ä¸æäº†ï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªç§˜é’¥ä»£ç†ï¼Œssh è‡ªåŠ¨é—® ssh-agent æœ‰ä»€ä¹ˆç§˜é’¥å¯ç”¨ï¼Œå°±åƒä¿ç®¡é’¥åŒ™çš„ç®¡å®¶ã€‚</p>
<h3 id=é…ç½®-openssh>é…ç½® OpenSSH</h3>
<p>å‚è€ƒ keepassxc çš„æ–‡æ¡£ï¼Œå…ˆå¯åŠ¨ Windows è‡ªå¸¦çš„ OpenSSH çš„ ssh-agent æœåŠ¡ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>user</span><span class=p>&gt;</span> <span class=nb>Get-Service</span> <span class=nb>ssh-agent</span> <span class=p>|</span> <span class=nb>Set-Service</span> <span class=n>-StartupType</span> <span class=n>Automatic</span>
<span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>user</span><span class=p>&gt;</span> <span class=nb>Start-Service</span> <span class=nb>ssh-agent</span>
</code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ä¸Šé¢çš„å‘½ä»¤éœ€è¦ <strong>ç®¡ç†å‘˜æƒé™</strong> è¿è¡Œã€‚</p>
<p>å°±æ˜¯è¿™æ ·ï¼</p>
<h3 id=é…ç½®-keepassxc>é…ç½® keepassxc</h3>
<p>ä¹‹ååœ¨ keepassxc é‡Œæ‰“å¼€ ssh é›†æˆï¼Œé€‰ä¸­ OpenSSH ä½œä¸ºä»£ç†ã€‚</p>
<p><img src=/blog/p/keepassxc-ssh-integration/sshagent-application-settings.png width=1601 height=1218 srcset="/blog/p/keepassxc-ssh-integration/sshagent-application-settings_huf85379ed477f6ac0dbb86a595d8f10b4_56971_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/sshagent-application-settings_huf85379ed477f6ac0dbb86a595d8f10b4_56971_1024x0_resize_box_3.png 1024w" loading=lazy alt="sshagent application settings" class=gallery-image data-flex-grow=131 data-flex-basis=315px></p>
<p>ç„¶åæ·»åŠ ä¸€ä¸ªå¸¸è§„çš„å¯†ç è®°å½•ï¼Œåœ¨é«˜çº§é‡Œæ·»åŠ ç§˜é’¥æ–‡ä»¶ï¼Œå¹¶åœ¨ SSH é‡Œå¯ç”¨ï¼š</p>
<p><img src=/blog/p/keepassxc-ssh-integration/sshagent-entry-settings.png width=1758 height=1374 srcset="/blog/p/keepassxc-ssh-integration/sshagent-entry-settings_huc6b8a73468d62e299570a0a7d6f50725_56080_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/sshagent-entry-settings_huc6b8a73468d62e299570a0a7d6f50725_56080_1024x0_resize_box_3.png 1024w" loading=lazy alt="sshagent entry settings" class=gallery-image data-flex-grow=127 data-flex-basis=307px></p>
<p>æ³¨æ„å‹¾é€‰ <code>Add key to agent when database is opened/unlocked</code> å’Œ <code>Remove key from agent when database is closed/locked</code>ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹ä¼šè®© keepassxc è§£é”çš„æƒ…å†µä¸‹è‡ªåŠ¨åœ¨åå°æ·»åŠ  SSH ç§˜é’¥åˆ° ssh-agentï¼ŒåŒæ—¶å½“ä½ å…³é—­ keepassxc ä¹‹å SSH å°±æ— æ³•å†ä» ssh-agent æ‹¿åˆ°ç§˜é’¥ï¼Œä½“éªŒä¼šæ›´è‡ªç„¶ã€‚</p>
<p>å¦‚æœä¸å‹¾é€‰è¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨è®¾ç½®äº† SSH ä»£ç†çš„é¡¹ç›®ä¸Šå³å‡»æ·»åŠ åˆ° ssh-agentã€‚</p>
<p><img src=/blog/p/keepassxc-ssh-integration/sshagent-context-menu.png width=1758 height=1265 srcset="/blog/p/keepassxc-ssh-integration/sshagent-context-menu_hu5f860989dfb1f00a09b694a656667942_49439_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/sshagent-context-menu_hu5f860989dfb1f00a09b694a656667942_49439_1024x0_resize_box_3.png 1024w" loading=lazy alt="sshagent context menu" class=gallery-image data-flex-grow=138 data-flex-basis=333px></p>
<p>è¿™ç§æ–¹å¼æ·»åŠ åˆ° ssh-agent çš„ç§˜é’¥ä¸ä¼šè‡ªåŠ¨ä» ssh-agent åˆ é™¤æˆ–è‡ªåŠ¨æ·»åŠ ï¼Œæ¯æ¬¡é‡å¯éƒ½è¦è‡ªå·±å³é”®æ·»åŠ ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<h3 id=æ£€æŸ¥>æ£€æŸ¥</h3>
<p>å¦‚ä½•ç¡®è®¤é…ç½®æ­£ç¡®æ— è¯¯ï¼Ÿ</p>
<p>å¯ä»¥é€šè¿‡å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>åœ¨è®¾ç½®-SSHä»£ç†ç•Œé¢ï¼Œé¡¶éƒ¨æœ‰ä¸ªç»¿æ¡ï¼Œæç¤º â€SSHä»£ç†è¿æ¥å·¥ä½œæ­£å¸¸ï¼â€œ</li>
<li>åœ¨å‘½ä»¤è¡Œè¿è¡Œ<code>ssh-add -l</code>ï¼Œä¼šåˆ—å‡ºä½ åˆšæ·»åŠ çš„ç§˜é’¥ã€‚</li>
<li>å°è¯•<code>ssh</code>è¿æ¥ä½ çš„æœåŠ¡å™¨ï¼Œå…¬é’¥ç™»é™†æˆåŠŸã€‚</li>
</ol>
<p>å¦‚æœ â€œSSH ä»£ç†è¿æ¥å·¥ä½œæ­£å¸¸â€ æ²¡å‡ºç°çš„è¯å¯èƒ½æ˜¯ ssh-agent æœåŠ¡æ²¡å¯åŠ¨æˆ–è€…æœ‰é—®é¢˜ï¼Œå¯ä»¥ <code>stop-service ssh-agent</code> åœæ­¢ <code>ssh-agent</code> è¿™ä¸ªç³»ç»ŸæœåŠ¡åå†åœ¨å‘½ä»¤è¡Œè¿è¡Œ <code>ssh-agent -d</code>ï¼Œè¾“å‡ºè°ƒè¯•æ—¥å¿—ï¼Œçœ‹çœ‹å…·ä½“ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>å¦‚æœ<code>ssh-add -l</code>æ²¡æœ‰è¾“å‡ºï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ£€æŸ¥<code>ssh-agent</code>æ˜¯å¦åœ¨è¿è¡Œï¼Œå¦‚æœåœ¨è¿è¡Œä½†ä¾ç„¶æ²¡æœ‰ï¼Œç”¨<code>-d</code>å‚æ•°å¯åŠ¨ ssh-agent çœ‹çœ‹æ·»åŠ ç§˜é’¥çš„æ­¥éª¤æœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>å¦‚æœ <code>ssh-add -l</code> æœ‰è¾“å‡ºäº†ï¼Œä½† ssh è¿æ¥ä¾ç„¶é—®ä½ è¦å¯†ç ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼š</p>
<ol>
<li>ä½ çš„ ssh ç§˜é’¥æœ‰å¯†ç ä¿æŠ¤ï¼Œä¸€èˆ¬æ˜¯ <code>ssh-keygen</code> çš„æ—¶å€™è®¾ç½®çš„ã€‚</li>
<li>ç§˜é’¥è¢«æ‹’ç»äº†ã€‚</li>
</ol>
<p>æœ‰å¯†ç ä¿æŠ¤çš„ç§˜é’¥ ssh å‘½ä»¤æœ‰æç¤ºï¼Œæ³¨æ„çœ‹ ssh å‘½ä»¤çš„è¾“å‡ºå°±è¡Œã€‚ç§˜é’¥è¢«æ‹’ç»çš„æƒ…å†µè¡¨é¢å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œå¯ä»¥ç”¨ <code>-vvv</code> å‚æ•°å†è¿è¡Œ ssh å‘½ä»¤ï¼Œçœ‹å‘½ä»¤è¾“å‡ºã€‚</p>
<p><img src=/blog/p/keepassxc-ssh-integration/image-20220421101423653.png width=1044 height=157 srcset="/blog/p/keepassxc-ssh-integration/image-20220421101423653_hu955d457efbed342c16ebd2cc7efa854b_176372_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/image-20220421101423653_hu955d457efbed342c16ebd2cc7efa854b_176372_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220421101423653 class=gallery-image data-flex-grow=664 data-flex-basis=1595px></p>
<p><img src=/blog/p/keepassxc-ssh-integration/image-20220421101509008.png width=1029 height=99 srcset="/blog/p/keepassxc-ssh-integration/image-20220421101509008_hufdb8d068113679e23d2947d5c9dd2a58_103423_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/image-20220421101509008_hufdb8d068113679e23d2947d5c9dd2a58_103423_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220421101509008 class=gallery-image data-flex-grow=1039 data-flex-basis=2494px></p>
<p><img src=/blog/p/keepassxc-ssh-integration/image-20220421101612311.png width=900 height=99 srcset="/blog/p/keepassxc-ssh-integration/image-20220421101612311_hu416fe79149793836d529a9d87da9135b_46057_480x0_resize_box_3.png 480w, /blog/p/keepassxc-ssh-integration/image-20220421101612311_hu416fe79149793836d529a9d87da9135b_46057_1024x0_resize_box_3.png 1024w" loading=lazy alt=image-20220421101612311 class=gallery-image data-flex-grow=909 data-flex-basis=2181px></p>
<p>å¦‚æœ <code>will attempt key</code> æ²¡æœ‰å‡ºç° <code>ssh-add -l</code> åˆ—å‡ºçš„ç§˜é’¥ï¼Œè¿˜å¯èƒ½æ˜¯å› ä¸º <code>.ssh/config</code> é‡Œï¼Œç»™ä½ è¦è¿æ¥çš„ Host è®¾ç½®äº† <code>IdentitiesOnly yes</code>ã€‚è¿™ä¸ªè®¾ç½®é¡¹ä¼šå¼ºåˆ¶ ssh åªä½¿ç”¨æœ¬åœ°çš„ <code>.ssh/id_rsa</code> ç­‰ç§é’¥æ–‡ä»¶ã€‚</p>
<p>å¦å¤– <code>.ssh/config</code> é‡Œå¯èƒ½è¿˜æŒ‡å®šäº†åˆ«çš„éªŒè¯æ–¹å¼ä¹Ÿä¼šå¯¼è‡´ä¸ä½¿ç”¨å…¬é’¥ï¼Œè¿™å°±è¦é è‡ªå·±æ£€æŸ¥ <code>.ssh/config</code> æ¥æ’é”™äº†ã€‚</p>
<h3 id=é…ç½®-git>é…ç½® Git</h3>
<p>Windows ä¸‹è¿˜æœ‰ä¸ªå‘ï¼Œåœ¨æäº¤åšå®¢çš„æ—¶å€™æ‰å‘ç°ã€‚ Git-SCM é»˜è®¤ä½¿ç”¨çš„ SSH å‘½ä»¤ä¸æ˜¯ Windows è‡ªå¸¦çš„ OpenSSHã€‚è¿™ä¼šå¯¼è‡´ Git åœ¨æ¨é€çš„æ—¶å€™ä¸ä½¿ç”¨æˆ‘ä»¬æ·»åŠ åˆ° ssh-agent ï¼ˆWindows è‡ªå¸¦çš„ OpenSSH ç‰ˆ ssh-agentï¼‰çš„ç§˜é’¥ï¼Œè€Œæ˜¯ç”¨ Git-SCM è‡ªå¸¦çš„ MinGW ç‰ˆ OpenSSHï¼Œé€ æˆæ¨é€æ—¶æç¤º <code>Permission Denied (publickey)</code> ã€‚</p>
<p>è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œ<code>git config --global core.SshCommand "C:/Windows/System32/OpenSSH/ssh.exe"</code> æŠŠ Windows è‡ªå¸¦çš„ OpenSSH è®¾ç½®æˆ Git é»˜è®¤ä½¿ç”¨çš„ ssh å³å¯ã€‚éœ€è¦æ³¨æ„ <strong>è¿™é‡Œçš„è·¯å¾„ç”¨æ­£æ–œæ <code>/</code>åˆ†éš”ï¼Œä¸è¦ç”¨åæ–œæ <code>\</code></strong> ã€‚</p>
<h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>æ€»çš„æ¥è¯´ç”¨ ssh-agent é…åˆ keepassxc ç© ssh è¿˜æ˜¯å¾ˆèˆ’æœçš„ï¼Œç‰¹åˆ«æ˜¯è¿ç§»èµ·æ¥çš„æ—¶å€™ï¼Œåªè¦åŒæ­¥å’Œå¤‡ä»½ keepassxc çš„æ•°æ®åº“å°±å®Œäº‹ã€‚</p>
<p>keepassxc çš„é™„åŠ æ–‡ä»¶ä¹Ÿéå¸¸é€‚åˆæŠŠ GPG ä¹‹ç±»çš„ç§˜é’¥å¤‡ä»½èµ·æ¥ï¼Œæ¢å·¥ä½œæœºæˆ–è€…è‡ªå·±ç”µè„‘é‡è£…è¿ç§»çš„æ—¶å€™éƒ½èƒ½çœä¸å°‘å¿ƒæ€ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/%E6%9D%82%E8%B0%88/>æ‚è°ˆ</a>
<a href=/blog/tags/keepassxc/>keepassxc</a>
<a href=/blog/tags/ssh/>ssh</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/blog/p/get-start-burpsuite-and-my-skill-tree/>
<div class=article-image>
<img src=/blog/p/get-start-burpsuite-and-my-skill-tree/_hucfaba9479047c85853a2baba76ce1de3_2057374_f6ccd4e19cfa94142b0a0d1d6bd0a4d5.jpg width=250 height=150 loading=lazy alt="Featured image of post BurpSuite å…¥é—¨å’Œæ­£åœ¨åšçš„æŠ€èƒ½æ ‘" data-key=get-start-burpsuite-and-my-skill-tree data-hash="md5-o+EXRh62Vv1wF6hGc8enkg==">
</div>
<div class=article-details>
<h2 class=article-title>BurpSuite å…¥é—¨å’Œæ­£åœ¨åšçš„æŠ€èƒ½æ ‘</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/blog/p/2022-05-16-rain/>
<div class=article-image>
<img src=/blog/p/2022-05-16-rain/_huc91edc65b707447a73f3c0bc82a0cf99_1398098_b93ca92aa2fac81ba630fde67b86e4cf.jpg width=250 height=150 loading=lazy alt="Featured image of post é›¨" data-key=2022-05-16-rain data-hash="md5-/vi9V357IPeAPnGDnkl8lg==">
</div>
<div class=article-details>
<h2 class=article-title>é›¨</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/2022-5-12-one-small-thing/>
<div class=article-details>
<h2 class=article-title>2022å¹´5æœˆ12æ—¥ ä¸€ä»¶å°äº‹</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/diary-2022-05-05/>
<div class=article-details>
<h2 class=article-title>2022å¹´5æœˆ5æ—¥ æœªæ¥è§„åˆ’</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/first-blog-in-2022/>
<div class=article-details>
<h2 class=article-title>2022æ–°å¹´ç¬¬ä¸€ç¯‡åšå®¢</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"å°é²œkeepassxcçš„sshé›†æˆ",options:{autoCreateIssue:!1,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡
ï¼Œç”± <a href=https://nnnewb.github.io/blog/>nnnewb</a> ä¿®æ”¹
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#å‰è¨€>å‰è¨€</a></li>
<li><a href=#è¿‡ç¨‹>è¿‡ç¨‹</a>
<ol>
<li><a href=#å¹³å°å’Œé€‰å‹>å¹³å°å’Œé€‰å‹</a></li>
<li><a href=#åŸç†>åŸç†</a></li>
<li><a href=#é…ç½®-openssh>é…ç½® OpenSSH</a></li>
<li><a href=#é…ç½®-keepassxc>é…ç½® keepassxc</a></li>
<li><a href=#æ£€æŸ¥>æ£€æŸ¥</a></li>
<li><a href=#é…ç½®-git>é…ç½® Git</a></li>
</ol>
</li>
<li><a href=#æ€»ç»“>æ€»ç»“</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>