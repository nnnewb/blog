<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ Bæ ‘å’ŒBæ ‘çš„å˜ä½“ï¼ˆB+æ ‘ï¼‰å› ä¸ºå¯¹ç£ç›˜IO/ç¼“å­˜å‹å¥½çš„åŸå› ï¼Œå¸¸è¢«ç”¨åšæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚
è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯å†™ä¸€ä¸‹Bæ ‘å¦‚ä½•æ’å…¥å’Œæœç´¢ï¼ŒèŠ‚ç‚¹åˆ†è£‚æœºåˆ¶ä»¥åŠå¦‚ä½•è‡ªå¹³è¡¡ã€‚
èŠ‚ç‚¹ç»“æ„ Bæ ‘å’Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘åœ¨èŠ‚ç‚¹ç»“æ„ä¸Šæœ‰å¾ˆå¤§åŒºåˆ«ã€‚Bæ ‘æ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ŒBæ ‘çš„èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªåç»§èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¼šä¿å­˜å¤šä¸ªé”®ã€‚å•ä¸ªèŠ‚ç‚¹æœ€å¤šä¿å­˜Mä¸ªé”®çš„Bæ ‘ç§°ä½œMé˜¶Bæ ‘ã€‚
ä¸€ä¸ªç®€å•çš„ B æ ‘èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ã€‚
class BTreeNode: parent: &amp;#39;BTreeNode&amp;#39; entries: List[int] children: List[&amp;#39;BTreeNode&amp;#39;] Bæ ‘è¦æ±‚é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å°‘åŒ…å«M/2ä¸ªå…ƒç´ ï¼Œéå¶å­èŠ‚ç‚¹çš„ children æ•°é‡æ˜¯ len(entries)+1ã€‚æ ¹èŠ‚ç‚¹ä¸è¦æ±‚æœ€å°‘å…ƒç´ æ•°é‡ï¼Œå…¶ä»–çº¦æŸä¸å˜ã€‚
æ’å…¥èŠ‚ç‚¹ Bæ ‘è¦æ±‚æ–°çš„é”®åªèƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šæ’å…¥ã€‚å¦‚æœå¶å­èŠ‚ç‚¹çš„é”®æ•°é‡è¶…è¿‡äº†ä¸Šé™Mï¼Œåˆ™å¶å­èŠ‚ç‚¹æ‰§è¡Œ åˆ†è£‚ æ“ä½œï¼Œå°†é”®åˆ†æˆä¸‰éƒ¨åˆ†ï¼šä¸­ä½æ•°ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ã€‚
# åˆ†è£‚å‰ [1,2,3,4,5] # åˆ†è£‚å [1,2],3,[4,5] ä¸­ä½æ•°æ’å…¥çˆ¶èŠ‚ç‚¹ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†æˆ–å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹ï¼Œæ’å…¥çˆ¶çº§èŠ‚ç‚¹ã€‚ä»¥æ’å…¥å…ƒç´  1-7 ä¸ºä¾‹ï¼Œå›¾ç¤ºå¦‚ä¸‹ã€‚
å¯¹äºä¸­ä½æ•°åœ¨ entries ä¸­é—´çš„æƒ…å†µä¸ä¼šæ›´éº»çƒ¦ï¼Œåªè¦è®°ä½æ–°èŠ‚ç‚¹ä¿å­˜çš„éƒ½æ˜¯å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œåœ¨entriesæ’å…¥é”®ä¹‹åï¼Œæ‰¾åˆ°å¯¹åº”çš„childrenä¸‹æ ‡æ’å…¥å³å¯ã€‚
def add_child(self, entry, child): &amp;#34;&amp;#34;&amp;#34;éå¶å­èŠ‚ç‚¹æ·»åŠ æ–°å…ƒç´  Args: entry (int): æ–°å…ƒç´  child (BTreeNode): åˆ†è£‚å‡ºçš„æ–°å­©å­ &amp;#34;&amp;#34;&amp;#34; # éå†å¯»æ‰¾æ¯”æ–° entry æ›´å¤§çš„å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–° entry æ·»åŠ åˆ°æœ€å for i, v in enumerate(self.entries): if v &amp;gt; entry: self.children.insert(i+1, child) self.entries.insert(i, entry) self.grow() return self."><title>Bæ ‘</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/b-tree/>
<link rel=stylesheet href=/blog/scss/style.min.b80bf249ce4a22cf55e8d7340a0b37a2f2c10f54f3a9a49cb94b694a2eb0bbea.css><meta property="og:title" content="Bæ ‘">
<meta property="og:description" content="å‰è¨€ Bæ ‘å’ŒBæ ‘çš„å˜ä½“ï¼ˆB+æ ‘ï¼‰å› ä¸ºå¯¹ç£ç›˜IO/ç¼“å­˜å‹å¥½çš„åŸå› ï¼Œå¸¸è¢«ç”¨åšæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚
è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯å†™ä¸€ä¸‹Bæ ‘å¦‚ä½•æ’å…¥å’Œæœç´¢ï¼ŒèŠ‚ç‚¹åˆ†è£‚æœºåˆ¶ä»¥åŠå¦‚ä½•è‡ªå¹³è¡¡ã€‚
èŠ‚ç‚¹ç»“æ„ Bæ ‘å’Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘åœ¨èŠ‚ç‚¹ç»“æ„ä¸Šæœ‰å¾ˆå¤§åŒºåˆ«ã€‚Bæ ‘æ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ŒBæ ‘çš„èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªåç»§èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¼šä¿å­˜å¤šä¸ªé”®ã€‚å•ä¸ªèŠ‚ç‚¹æœ€å¤šä¿å­˜Mä¸ªé”®çš„Bæ ‘ç§°ä½œMé˜¶Bæ ‘ã€‚
ä¸€ä¸ªç®€å•çš„ B æ ‘èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ã€‚
class BTreeNode: parent: &amp;#39;BTreeNode&amp;#39; entries: List[int] children: List[&amp;#39;BTreeNode&amp;#39;] Bæ ‘è¦æ±‚é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å°‘åŒ…å«M/2ä¸ªå…ƒç´ ï¼Œéå¶å­èŠ‚ç‚¹çš„ children æ•°é‡æ˜¯ len(entries)+1ã€‚æ ¹èŠ‚ç‚¹ä¸è¦æ±‚æœ€å°‘å…ƒç´ æ•°é‡ï¼Œå…¶ä»–çº¦æŸä¸å˜ã€‚
æ’å…¥èŠ‚ç‚¹ Bæ ‘è¦æ±‚æ–°çš„é”®åªèƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šæ’å…¥ã€‚å¦‚æœå¶å­èŠ‚ç‚¹çš„é”®æ•°é‡è¶…è¿‡äº†ä¸Šé™Mï¼Œåˆ™å¶å­èŠ‚ç‚¹æ‰§è¡Œ åˆ†è£‚ æ“ä½œï¼Œå°†é”®åˆ†æˆä¸‰éƒ¨åˆ†ï¼šä¸­ä½æ•°ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ã€‚
# åˆ†è£‚å‰ [1,2,3,4,5] # åˆ†è£‚å [1,2],3,[4,5] ä¸­ä½æ•°æ’å…¥çˆ¶èŠ‚ç‚¹ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†æˆ–å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹ï¼Œæ’å…¥çˆ¶çº§èŠ‚ç‚¹ã€‚ä»¥æ’å…¥å…ƒç´  1-7 ä¸ºä¾‹ï¼Œå›¾ç¤ºå¦‚ä¸‹ã€‚
å¯¹äºä¸­ä½æ•°åœ¨ entries ä¸­é—´çš„æƒ…å†µä¸ä¼šæ›´éº»çƒ¦ï¼Œåªè¦è®°ä½æ–°èŠ‚ç‚¹ä¿å­˜çš„éƒ½æ˜¯å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œåœ¨entriesæ’å…¥é”®ä¹‹åï¼Œæ‰¾åˆ°å¯¹åº”çš„childrenä¸‹æ ‡æ’å…¥å³å¯ã€‚
def add_child(self, entry, child): &amp;#34;&amp;#34;&amp;#34;éå¶å­èŠ‚ç‚¹æ·»åŠ æ–°å…ƒç´  Args: entry (int): æ–°å…ƒç´  child (BTreeNode): åˆ†è£‚å‡ºçš„æ–°å­©å­ &amp;#34;&amp;#34;&amp;#34; # éå†å¯»æ‰¾æ¯”æ–° entry æ›´å¤§çš„å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–° entry æ·»åŠ åˆ°æœ€å for i, v in enumerate(self.entries): if v &amp;gt; entry: self.children.insert(i+1, child) self.entries.insert(i, entry) self.grow() return self.">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/b-tree/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="python"><meta property="article:tag" content="æ•°æ®ç»“æ„"><meta property="article:published_time" content="2022-02-14T10:53:00+08:00"><meta property="article:modified_time" content="2022-02-14T10:53:00+08:00">
<meta name=twitter:title content="Bæ ‘">
<meta name=twitter:description content="å‰è¨€ Bæ ‘å’ŒBæ ‘çš„å˜ä½“ï¼ˆB+æ ‘ï¼‰å› ä¸ºå¯¹ç£ç›˜IO/ç¼“å­˜å‹å¥½çš„åŸå› ï¼Œå¸¸è¢«ç”¨åšæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚
è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯å†™ä¸€ä¸‹Bæ ‘å¦‚ä½•æ’å…¥å’Œæœç´¢ï¼ŒèŠ‚ç‚¹åˆ†è£‚æœºåˆ¶ä»¥åŠå¦‚ä½•è‡ªå¹³è¡¡ã€‚
èŠ‚ç‚¹ç»“æ„ Bæ ‘å’Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘åœ¨èŠ‚ç‚¹ç»“æ„ä¸Šæœ‰å¾ˆå¤§åŒºåˆ«ã€‚Bæ ‘æ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ŒBæ ‘çš„èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªåç»§èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¼šä¿å­˜å¤šä¸ªé”®ã€‚å•ä¸ªèŠ‚ç‚¹æœ€å¤šä¿å­˜Mä¸ªé”®çš„Bæ ‘ç§°ä½œMé˜¶Bæ ‘ã€‚
ä¸€ä¸ªç®€å•çš„ B æ ‘èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ã€‚
class BTreeNode: parent: &amp;#39;BTreeNode&amp;#39; entries: List[int] children: List[&amp;#39;BTreeNode&amp;#39;] Bæ ‘è¦æ±‚é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å°‘åŒ…å«M/2ä¸ªå…ƒç´ ï¼Œéå¶å­èŠ‚ç‚¹çš„ children æ•°é‡æ˜¯ len(entries)+1ã€‚æ ¹èŠ‚ç‚¹ä¸è¦æ±‚æœ€å°‘å…ƒç´ æ•°é‡ï¼Œå…¶ä»–çº¦æŸä¸å˜ã€‚
æ’å…¥èŠ‚ç‚¹ Bæ ‘è¦æ±‚æ–°çš„é”®åªèƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šæ’å…¥ã€‚å¦‚æœå¶å­èŠ‚ç‚¹çš„é”®æ•°é‡è¶…è¿‡äº†ä¸Šé™Mï¼Œåˆ™å¶å­èŠ‚ç‚¹æ‰§è¡Œ åˆ†è£‚ æ“ä½œï¼Œå°†é”®åˆ†æˆä¸‰éƒ¨åˆ†ï¼šä¸­ä½æ•°ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ã€‚
# åˆ†è£‚å‰ [1,2,3,4,5] # åˆ†è£‚å [1,2],3,[4,5] ä¸­ä½æ•°æ’å…¥çˆ¶èŠ‚ç‚¹ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†æˆ–å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹ï¼Œæ’å…¥çˆ¶çº§èŠ‚ç‚¹ã€‚ä»¥æ’å…¥å…ƒç´  1-7 ä¸ºä¾‹ï¼Œå›¾ç¤ºå¦‚ä¸‹ã€‚
å¯¹äºä¸­ä½æ•°åœ¨ entries ä¸­é—´çš„æƒ…å†µä¸ä¼šæ›´éº»çƒ¦ï¼Œåªè¦è®°ä½æ–°èŠ‚ç‚¹ä¿å­˜çš„éƒ½æ˜¯å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œåœ¨entriesæ’å…¥é”®ä¹‹åï¼Œæ‰¾åˆ°å¯¹åº”çš„childrenä¸‹æ ‡æ’å…¥å³å¯ã€‚
def add_child(self, entry, child): &amp;#34;&amp;#34;&amp;#34;éå¶å­èŠ‚ç‚¹æ·»åŠ æ–°å…ƒç´  Args: entry (int): æ–°å…ƒç´  child (BTreeNode): åˆ†è£‚å‡ºçš„æ–°å­©å­ &amp;#34;&amp;#34;&amp;#34; # éå†å¯»æ‰¾æ¯”æ–° entry æ›´å¤§çš„å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–° entry æ·»åŠ åˆ°æœ€å for i, v in enumerate(self.entries): if v &amp;gt; entry: self.children.insert(i+1, child) self.entries.insert(i, entry) self.grow() return self.">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/python/>
python
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/b-tree/>Bæ ‘</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022å¹´ 2æœˆ 14æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 2 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>Bæ ‘å’ŒBæ ‘çš„å˜ä½“ï¼ˆB+æ ‘ï¼‰å› ä¸ºå¯¹ç£ç›˜IO/ç¼“å­˜å‹å¥½çš„åŸå› ï¼Œå¸¸è¢«ç”¨åšæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚</p>
<p>è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯å†™ä¸€ä¸‹Bæ ‘å¦‚ä½•æ’å…¥å’Œæœç´¢ï¼ŒèŠ‚ç‚¹åˆ†è£‚æœºåˆ¶ä»¥åŠå¦‚ä½•è‡ªå¹³è¡¡ã€‚</p>
<h2 id=èŠ‚ç‚¹ç»“æ„>èŠ‚ç‚¹ç»“æ„</h2>
<p>Bæ ‘å’Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘åœ¨èŠ‚ç‚¹ç»“æ„ä¸Šæœ‰å¾ˆå¤§åŒºåˆ«ã€‚Bæ ‘æ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ŒBæ ‘çš„èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªåç»§èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¼šä¿å­˜å¤šä¸ªé”®ã€‚å•ä¸ªèŠ‚ç‚¹æœ€å¤šä¿å­˜Mä¸ªé”®çš„Bæ ‘ç§°ä½œMé˜¶Bæ ‘ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„ B æ ‘èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>BTreeNode</span><span class=p>:</span>
    <span class=n>parent</span><span class=p>:</span> <span class=s1>&#39;BTreeNode&#39;</span>
    <span class=n>entries</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>
    <span class=n>children</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=s1>&#39;BTreeNode&#39;</span><span class=p>]</span>
</code></pre></div><p>Bæ ‘è¦æ±‚é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å°‘åŒ…å«<code>M/2</code>ä¸ªå…ƒç´ ï¼Œéå¶å­èŠ‚ç‚¹çš„ <code>children</code> æ•°é‡æ˜¯ <code>len(entries)+1</code>ã€‚æ ¹èŠ‚ç‚¹ä¸è¦æ±‚æœ€å°‘å…ƒç´ æ•°é‡ï¼Œå…¶ä»–çº¦æŸä¸å˜ã€‚</p>
<h2 id=æ’å…¥èŠ‚ç‚¹>æ’å…¥èŠ‚ç‚¹</h2>
<p>Bæ ‘è¦æ±‚æ–°çš„é”®åªèƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸Šæ’å…¥ã€‚å¦‚æœå¶å­èŠ‚ç‚¹çš„é”®æ•°é‡è¶…è¿‡äº†ä¸Šé™<code>M</code>ï¼Œåˆ™å¶å­èŠ‚ç‚¹æ‰§è¡Œ <strong>åˆ†è£‚</strong> æ“ä½œï¼Œå°†é”®åˆ†æˆä¸‰éƒ¨åˆ†ï¼šä¸­ä½æ•°ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># åˆ†è£‚å‰</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>]</span>
<span class=c1># åˆ†è£‚å</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>],</span><span class=mi>3</span><span class=p>,[</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>]</span>
</code></pre></div><p>ä¸­ä½æ•°æ’å…¥çˆ¶èŠ‚ç‚¹ï¼Œå°äºä¸­ä½æ•°çš„éƒ¨åˆ†æˆ–å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹ï¼Œæ’å…¥çˆ¶çº§èŠ‚ç‚¹ã€‚ä»¥æ’å…¥å…ƒç´  1-7 ä¸ºä¾‹ï¼Œå›¾ç¤ºå¦‚ä¸‹ã€‚</p>
<p><img src=/blog/p/b-tree/image-20220214113130112.png width=526 height=214 srcset="/blog/p/b-tree/image-20220214113130112_hu5b12e769ccfd98fac492b0d669d71565_6441_480x0_resize_box_3.png 480w, /blog/p/b-tree/image-20220214113130112_hu5b12e769ccfd98fac492b0d669d71565_6441_1024x0_resize_box_3.png 1024w" loading=lazy alt=å…ƒç´ 1-6 class=gallery-image data-flex-grow=245 data-flex-basis=589px></p>
<p><img src=/blog/p/b-tree/image-20220214113110231.png width=580 height=214 srcset="/blog/p/b-tree/image-20220214113110231_hu367bf5992fa3acb17c83fa3ae5854998_8699_480x0_resize_box_3.png 480w, /blog/p/b-tree/image-20220214113110231_hu367bf5992fa3acb17c83fa3ae5854998_8699_1024x0_resize_box_3.png 1024w" loading=lazy alt=æ’å…¥å…ƒç´ 7 class=gallery-image data-flex-grow=271 data-flex-basis=650px></p>
<p>å¯¹äºä¸­ä½æ•°åœ¨ <code>entries</code> ä¸­é—´çš„æƒ…å†µä¸ä¼šæ›´éº»çƒ¦ï¼Œåªè¦è®°ä½æ–°èŠ‚ç‚¹ä¿å­˜çš„éƒ½æ˜¯å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œåœ¨<code>entries</code>æ’å…¥é”®ä¹‹åï¼Œæ‰¾åˆ°å¯¹åº”çš„<code>children</code>ä¸‹æ ‡æ’å…¥å³å¯ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>add_child</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=n>child</span><span class=p>):</span>
    <span class=s2>&#34;&#34;&#34;éå¶å­èŠ‚ç‚¹æ·»åŠ æ–°å…ƒç´ 
</span><span class=s2>
</span><span class=s2>        Args:
</span><span class=s2>            entry (int): æ–°å…ƒç´ 
</span><span class=s2>            child (BTreeNode): åˆ†è£‚å‡ºçš„æ–°å­©å­
</span><span class=s2>    &#34;&#34;&#34;</span>
    <span class=c1># éå†å¯»æ‰¾æ¯”æ–° entry æ›´å¤§çš„å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–° entry æ·»åŠ åˆ°æœ€å</span>
    <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>v</span> <span class=o>&gt;</span> <span class=n>entry</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=n>child</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>entry</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>grow</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>child</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>grow</span><span class=p>()</span>
</code></pre></div><p>å®Œæ•´ä»£ç ä¼šåœ¨æ–‡æœ«ç»™å‡ºã€‚</p>
<h2 id=è‡ªå¹³è¡¡>è‡ªå¹³è¡¡</h2>
<p>Bæ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡æ ‘ï¼ŒBæ ‘åšåˆ°è‡ªå¹³è¡¡çš„æ–¹å¼æ¯”è¾ƒç‰¹åˆ«ã€‚ä¸‹é¢çš„å†…å®¹éƒ½æ˜¯æˆ‘ä¸ªäººå¯¹Bæ ‘çš„ç†è§£ï¼Œåè§è­¦å‘Šã€‚</p>
<p>ä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘æ’å…¥å…ƒç´ æ—¶ï¼Œä¼šæŠŠå…ƒç´ æ’å…¥åˆ°å¶å­èŠ‚ç‚¹ä¸Šï¼Œå¶å­èŠ‚ç‚¹å°±å˜æˆäº†ä¸­é—´èŠ‚ç‚¹ï¼Œå­æ ‘ä¼šéšç€æ’å…¥çš„å…ƒç´ å¢é•¿è€Œå˜é«˜ï¼Œäºæ˜¯åœ¨å­æ ‘ä¹‹é—´å‡ºç°ä¸å¹³è¡¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘ç”Ÿé•¿æ–¹å‘æ˜¯å‘ä¸‹ï¼Œå¾€å¶å­æ–¹å‘æ‰©å±•ã€‚</p>
<p>ä½†Bæ ‘æ­£å¥½ç›¸åï¼šå¶å­èŠ‚ç‚¹ä¸ä¼šå˜æˆä¸­é—´èŠ‚ç‚¹ï¼Œåªä¼šåˆ†è£‚å…„å¼ŸèŠ‚ç‚¹ï¼Œå‘çˆ¶çº§èŠ‚ç‚¹æ’å…¥é”®ã€‚è€Œçˆ¶çº§èŠ‚ç‚¹ä¹Ÿä¼šå› ä¸ºé”®è¶…è¿‡<code>M</code>è€Œåˆ†è£‚ï¼Œä¸€ç›´åˆ°æ ¹èŠ‚ç‚¹ã€‚æ ¹èŠ‚ç‚¹åˆ†è£‚åˆ™ä¼šäº§ç”Ÿæ–°çš„æ ¹ï¼ŒåŸæ¥çš„æ ¹å˜æˆä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼Œæ ‘çš„é«˜åº¦éšä¹‹ä¸Šå‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒBæ ‘çš„ç”Ÿé•¿é«˜åº¦æ˜¯å‘ä¸Šçš„ï¼Œæ’å…¥æ“ä½œå¯¹æ ‘é«˜åº¦çš„å½±å“æœ€ç»ˆä½“ç°ä¸ºæ ¹èŠ‚ç‚¹çš„åˆ†è£‚ã€‚</p>
<p>åˆ é™¤èŠ‚ç‚¹çš„è§„åˆ™ä¹Ÿè®¾è®¡ä¸ºä¿æŒè¿™ä¸€ç‰¹æ€§ï¼Œåˆ é™¤é”®å¯¹æ ‘é«˜åº¦çš„å½±å“æœ€ç»ˆä¼šä½“ç°ä¸ºæ ¹èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹åˆå¹¶ï¼Œä½¿å¾—æ ‘é«˜åº¦é™ä½ã€‚</p>
<h2 id=æœç´¢>æœç´¢</h2>
<p>Bæ ‘çš„æœç´¢å’ŒäºŒå‰æœç´¢æ ‘å·®ä¸å¤šï¼Œä¸åŒçš„æ˜¯èŠ‚ç‚¹ä¼šè¡¨ç¤ºå¤šä¸ªé”®ï¼Œæ‰€ä»¥äºŒå‰æœç´¢æ ‘ä¸­çš„æ¯”è¾ƒæ“ä½œä¼šå˜æˆåœ¨å¤šä¸ªé”®é‡ŒæŸ¥æ‰¾å€¼ï¼Œå¹¶åœ¨ä¸­é—´èŠ‚ç‚¹æ²¡æ‰¾åˆ°çš„æ—¶å€™é€’å½’æœç´¢å­èŠ‚ç‚¹ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python>    <span class=k>def</span> <span class=nf>search</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entry</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>v</span> <span class=o>==</span> <span class=n>entry</span><span class=p>:</span>
                <span class=k>return</span> <span class=kc>True</span>
            <span class=c1># å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè€Œä¸”å½“å‰å…ƒç´ æ¯”æœç´¢å€¼è¦å¤§äº†</span>
            <span class=c1># å°±ä»å°äºå½“å‰å…ƒç´ çš„å­èŠ‚ç‚¹é‡Œé€’å½’æœç´¢</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>v</span> <span class=o>&gt;</span> <span class=n>entry</span><span class=p>:</span>
                <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
        <span class=c1># æ²¡æœ‰æ¯”æœç´¢çš„é”®å¤§çš„å€¼ï¼Œåˆ™ä»æœ«å°¾çš„å­èŠ‚ç‚¹ï¼ˆå¤§äºæœ¬èŠ‚ç‚¹å…¨éƒ¨é”®ï¼‰é€’å½’æœç´¢</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>False</span>
</code></pre></div><h2 id=åˆ†è£‚å’Œéœ€è¦æ³¨æ„çš„é—®é¢˜>åˆ†è£‚å’Œéœ€è¦æ³¨æ„çš„é—®é¢˜</h2>
<p>åˆ†è£‚èŠ‚ç‚¹å†™èµ·æ¥å¾ˆç®€å•ï¼Œæ¯” AVL æ—‹è½¬è¦å¥½æ‡‚å¾ˆå¤šã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python>    <span class=k>def</span> <span class=nf>grow</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># æ£€æŸ¥å’Œå¤„ç†åˆ†è£‚</span>
        <span class=c1># B-Tree çš„å¢é•¿æ–¹å‘æ˜¯æ¨ªå‘+çºµå‘ï¼Œæ¨ªå‘æ˜¯æ‰©å±•å…„å¼ŸèŠ‚ç‚¹ï¼Œçºµå‘æ˜¯å¾€æ ¹èŠ‚ç‚¹æ–¹å‘ç”Ÿé•¿</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>MAXIMUM_ENTRIES</span><span class=p>:</span>
            <span class=n>middle</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>[</span><span class=n>MIDDLE_ENTRY_IDX</span><span class=p>]</span>
            <span class=n>split_entries</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>[</span><span class=n>MIDDLE_ENTRY_IDX</span><span class=o>+</span><span class=mi>1</span><span class=p>:]</span>
            <span class=n>split_children</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>[</span><span class=n>MIDDLE_CHILD_IDX</span><span class=p>:]</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>entries</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>entries</span><span class=p>[:</span><span class=n>MIDDLE_ENTRY_IDX</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>children</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>[:</span><span class=n>MIDDLE_CHILD_IDX</span><span class=p>]</span>

            <span class=n>split_node</span> <span class=o>=</span> <span class=n>BTreeNode</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>parent</span><span class=p>)</span>
            <span class=n>split_node</span><span class=o>.</span><span class=n>entries</span> <span class=o>=</span> <span class=n>split_entries</span>
            <span class=n>split_node</span><span class=o>.</span><span class=n>children</span> <span class=o>=</span> <span class=n>split_children</span>
            <span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>split_children</span><span class=p>:</span>
                <span class=n>child</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>split_node</span>

            <span class=c1># ä¸­é—´èŠ‚ç‚¹åˆ†è£‚çš„æƒ…å†µ</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>parent</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>add_child</span><span class=p>(</span><span class=n>middle</span><span class=p>,</span> <span class=n>split_node</span><span class=p>)</span>
                <span class=k>return</span>

            <span class=c1># æ ¹èŠ‚ç‚¹åˆ†è£‚ï¼Œç”Ÿæˆæ–°çš„æ ¹èŠ‚ç‚¹</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>BTreeNode</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>
            <span class=n>split_node</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>parent</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>children</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=p>,</span> <span class=n>split_node</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>entries</span> <span class=o>=</span> <span class=p>[</span><span class=n>middle</span><span class=p>]</span>
</code></pre></div><p>ä¸»è¦æ³¨æ„ï¼š</p>
<ol>
<li>é€‰æ‹©åˆé€‚çš„ä¸­ä½æ•°ã€‚å¦‚æœ<code>M</code>æ˜¯å¥‡æ•°ï¼Œ<code>M+1</code>é™¤äºŒæ²¡æœ‰ä½™æ•°ï¼Œä¹Ÿé€‰ä¸å‡ºä¸­ä½æ•°ã€‚</li>
<li>æ–°èŠ‚ç‚¹ï¼ˆ<code>split_node</code>å’Œ<code>split_children</code>ï¼‰éƒ½éœ€è¦é‡æ–°è°ƒæ•´<code>parent</code>å±æ€§ï¼Œä¸è¦æ¼äº†ã€‚</li>
<li>ä¸­é—´èŠ‚ç‚¹çš„åˆ†è£‚è¦å‘ä¸Šæ·»åŠ ä¸€ä¸ª<code>entry</code>å’Œ<code>child</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºé”®å’Œå¤§äºè¿™ä¸ªé”®çš„èŠ‚ç‚¹ã€‚
<ol>
<li>è¿™æ˜¯ä¸ªé€’å½’è¿‡ç¨‹ï¼Œä¸Šçº§èŠ‚ç‚¹ä¹Ÿå¯èƒ½å‘ç”Ÿåˆ†è£‚ï¼Œä¸€ç›´åˆ°æ ¹åˆ†è£‚ã€‚</li>
<li>è¿™ä¸ªè¿‡ç¨‹ä¼šä¿ç•™åŸèŠ‚ç‚¹ï¼ˆ<code>self</code>ï¼‰ï¼Œå¯ä»¥ç†è§£ä¸º<code>children</code>çš„ä¸‹æ ‡<code>i</code>è¡¨ç¤º<code>children[i]</code>è¿™æ£µå­æ ‘æ‰€æœ‰é”®å°äº<code>entries[i]</code>ã€‚<code>children[-1]</code>æ²¡æœ‰å¯¹åº”çš„<code>entries</code>ä¸‹æ ‡ï¼Œè¡¨ç¤ºçš„æ˜¯å¤§äºèŠ‚ç‚¹æ‰€æœ‰é”®çš„å­æ ‘ï¼Œç›¸å½“äºæ˜¯äºŒå‰æœç´¢æ ‘ä¸­çš„å³å­æ ‘ã€‚</li>
</ol>
</li>
<li>æ ¹èŠ‚ç‚¹åˆ†è£‚ä¼šå¯¼è‡´æ ‘çš„æ ¹å‘ç”Ÿæ”¹å˜ï¼Œå®Œæˆæ’å…¥æ“ä½œåéœ€è¦é‡æ–°ç¡®å®šæ ¹èŠ‚ç‚¹æŒ‡é’ˆï¼Œä¸ç„¶ä¼šå¯¼è‡´æœç´¢å‡ºé”™æˆ–å†æ¬¡åˆ†è£‚çš„æ—¶å€™å¾€é”™è¯¯çš„èŠ‚ç‚¹æ·»åŠ é”®ï¼Œç ´åæœç´¢æ ‘çš„æ€§è´¨ã€‚</li>
</ol>
<h2 id=bæ ‘æ€§èƒ½>Bæ ‘æ€§èƒ½</h2>
<p>Bæ ‘çš„æ€§èƒ½ä¼˜åŠ¿æ¥è‡ªæ ‘çš„é«˜åº¦å¢é•¿ç›¸å¯¹æ¯”è¾ƒæ…¢ï¼Œé€‰æ‹©åˆé€‚çš„é˜¶å¯ä»¥å‡å°‘ç£ç›˜IOæ¬¡æ•°ã€‚å¦å¤–å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«å¤šä¸ªé”®ï¼Œæé«˜é”®çš„å‚¨å­˜å¯†åº¦ï¼Œæ›´ç¬¦åˆå±€éƒ¨æ€§åŸç†ï¼Œç›¸å¯¹äºäºŒå‰æœç´¢æ ‘æ¥è¯´å¯¹CPUç¼“å­˜ä¹Ÿæ›´è¾ƒå‹å¥½ã€‚</p>
<p>å¯¹è¿™ä¸ªåœºæ™¯æˆ‘èƒ½æƒ³åˆ°çš„å‡ ä¸ªå…³é”®å› ç´ ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>å†…å­˜ç¼“å­˜ã€‚å°½å¯èƒ½æ¦¨å¹²å¯ç”¨çš„å†…å­˜ï¼Œé¿å…é¢‘ç¹è¿›è¡Œç£ç›˜IOã€‚</li>
<li>å±€éƒ¨æ€§åŸç†ã€‚</li>
</ul>
<p>å…¶ä¸­å±€éƒ¨æ€§åŸç†åˆåˆ†å‡ é¡¹ã€‚</p>
<p>ä¸€ä¸ªæ˜¯å†…å­˜çš„åˆ†é¡µæœºåˆ¶ï¼Œåœ¨å†…å­˜ç´§å¼ çš„æƒ…å†µä¸‹å¦‚æœèŠ‚ç‚¹é›†åˆå¤§å°ä¸æ˜¯ä¸€é¡µçš„æ•´æ•°å€çš„è¯ï¼Œä¼šäº§ç”Ÿæ›´å¤šçš„ç¼ºé¡µå¼‚å¸¸ï¼Œé€ æˆæ›´é¢‘ç¹åœ°è¯»ç›˜ï¼ˆè€ƒè™‘ä½¿ç”¨äº†äº¤æ¢åˆ†åŒºæˆ– windows é¡µæ–‡ä»¶ï¼Œåˆæˆ–è€… <code>mmap</code> ç­‰æ–¹å¼è¯»å–ï¼‰ã€‚</p>
<p>å¦ä¸€ä¸ªæ˜¯CPUçš„é«˜é€Ÿç¼“å­˜ï¼Œå¦‚æœç»“æ„å¡«ä¸æ»¡æˆ–è€…è¶…å‡ºcache line å¤§å°çš„è¯éƒ½ä¼šæœ‰å½±å“ã€‚</p>
<p>å½“ç„¶ï¼Œæœ€åè¿˜æ˜¯å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚ç»™è¿™ç¯‡åšå®¢æ‰¾èµ„æ–™çš„æ—¶å€™çœ‹åˆ°çš„è¿™ç¯‡æ–‡ç« å¾ˆä¸é”™ <a class=link href=http://igoro.com/archive/gallery-of-processor-cache-effects/ target=_blank rel=noopener>gallery of processor cache effects</a>ï¼ŒæŒºå–œæ¬¢çš„ã€‚</p>
<h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>bæ ‘æ˜¯å¤šè·¯æœç´¢æ ‘ã€‚</p>
<p>bæ ‘æ’å…¥èŠ‚ç‚¹æ€»æ˜¯åœ¨å¶å­ï¼Œbæ ‘å‘æ ¹æ–¹å‘ç”Ÿé•¿ã€‚</p>
<p>bæ ‘é€šè¿‡èŠ‚ç‚¹åˆ†è£‚å’Œåˆå¹¶å®ç°è‡ªå¹³è¡¡ã€‚</p>
<p>bæ ‘æœç´¢å’Œä¸€èˆ¬çš„äºŒå‰æœç´¢æ ‘å·®åˆ«ä¸å¤§ã€‚</p>
<p>ä»¥åŠbæ ‘æ€§èƒ½ä¼˜åŠ¿æ¥è‡ªæ ‘æ›´çŸ®ï¼ŒèŠ‚ç‚¹æ›´å°‘ï¼Œé”®æ›´é›†ä¸­ï¼Œç¬¦åˆå±€éƒ¨æ€§åŸç†ï¼Œå‡å°‘ç£ç›˜ioæ¬¡æ•°ï¼Œåˆé€‚çš„é˜¶è®©ç»“æ„å¯¹ç¼“å­˜æ›´å‹å¥½ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/python/>python</a>
<a href=/blog/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>æ•°æ®ç»“æ„</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/avl-tree/>
<div class=article-details>
<h2 class=article-title>AVLæ ‘</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/pattern-match-in-python310/>
<div class=article-details>
<h2 class=article-title>pattern-match-in-python310</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/flask%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0wsgi/>
<div class=article-details>
<h2 class=article-title>Flaskæºç é˜…è¯»ç¬”è®°ï¼šWSGI</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/django-%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5%E8%AF%A6%E8%A7%A3/>
<div class=article-details>
<h2 class=article-title>Django çš„å„ç§å…³ç³»å­—æ®µè¯¦è§£</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/%E8%BD%BB%E9%87%8F%E7%BA%A7-django-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E6%9C%80%E5%B0%8F%E7%9A%84-django-%E5%BA%94%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>è½»é‡çº§ django é˜…è¯»ç¬”è®°ï¼šæœ€å°çš„ django åº”ç”¨</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"Bæ ‘",options:{autoCreateIssue:!0,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.10.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>