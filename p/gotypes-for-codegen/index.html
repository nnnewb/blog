<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ æœ¬ç¯‡åšå®¢ä¸»è¦æƒ³ä»‹ç»ä¸‹ go/types è¿™ä¸ªåŒ…ã€‚
ç›®å‰å…³äº go ä»£ç ç”Ÿæˆæ¯”è¾ƒå¸¸è§çš„æ˜¯åˆ©ç”¨ go/ast ï¼Œç»“åˆ text/template ç”Ÿæˆä»£ç ã€‚è¿™ç§ç”Ÿæˆæ–¹å¼æ˜¾ç„¶æ˜¯æœ‰å±€é™æ€§çš„ï¼šgo/ast è¿™ä¸ªåŒ…åªèƒ½æ‹¿åˆ°è¯­æ³•æ ‘ç»“æ„ï¼Œä½†æ²¡æœ‰ç±»å‹ä¿¡æ¯ã€‚æ¯”å¦‚ var ctx context.Context å¯ä»¥è§£ææˆè¯­æ³•æ ‘èŠ‚ç‚¹ ast.GenDeclï¼Œä½†context.Context åªèƒ½è§£æå‡º ast.SelectorExprï¼Œå¹¶ä¸çŸ¥é“ context.Context æ˜¯ä¸€ä¸ª structã€interfaceè¿˜æ˜¯aliasã€‚
åœ¨é¢å¯¹ç®€å•çš„ä»£ç ç”Ÿæˆæ—¶go/astè¿˜èƒ½é¡¶ä¸€ä¸‹ï¼Œä½†æ›´å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æ ¹æ® struct ç”Ÿæˆ thrift æˆ–è€… protobuf å®šä¹‰ï¼Œgo/ast å°±æœ‰ç‚¹åƒåŠ›ä¸è®¨å¥½äº†ã€‚
å…¥é—¨ æ³¨æ„è¿™å—æ²¡ç…§æ¬å®˜æ–¹çš„ exampleï¼Œå› ä¸ºå®˜æ–¹çš„ example ä¸»è¦æ³¨é‡åœ¨æ€ä¹ˆç”¨ go/types åšç±»å‹æ£€æŸ¥ï¼Œå…³æ³¨ types.Config å’Œ types.Checkerï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæƒ³ç®¡ checker æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å†™ä¸ª codegenï¼Œæƒ³åŠæ³•æ‹¿åˆ°æ›´ä¸°å¯Œçš„ç±»å‹ä¿¡æ¯ã€‚
å› æ­¤ go/types çš„ä½¿ç”¨æ›´å…³æ³¨çš„æ˜¯å…¶ä¸­çš„æ•°æ®ç»“æ„ã€‚
ç±»å‹ç³»ç»Ÿ å…ˆæ¥ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚
package main import ( &amp;#34;flag&amp;#34; &amp;#34;fmt&amp;#34; &amp;#34;go/importer&amp;#34; &amp;#34;go/token&amp;#34; &amp;#34;go/types&amp;#34; &amp;#34;log&amp;#34; ) func main() { var pkgPath string var typ string flag.StringVar(&amp;amp;pkgPath, &amp;#34;package&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;package path&amp;#34;) flag."><title>codegen åˆ©å™¨ go/types</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/gotypes-for-codegen/>
<link rel=stylesheet href=/blog/scss/style.min.b80bf249ce4a22cf55e8d7340a0b37a2f2c10f54f3a9a49cb94b694a2eb0bbea.css><meta property="og:title" content="codegen åˆ©å™¨ go/types">
<meta property="og:description" content="å‰è¨€ æœ¬ç¯‡åšå®¢ä¸»è¦æƒ³ä»‹ç»ä¸‹ go/types è¿™ä¸ªåŒ…ã€‚
ç›®å‰å…³äº go ä»£ç ç”Ÿæˆæ¯”è¾ƒå¸¸è§çš„æ˜¯åˆ©ç”¨ go/ast ï¼Œç»“åˆ text/template ç”Ÿæˆä»£ç ã€‚è¿™ç§ç”Ÿæˆæ–¹å¼æ˜¾ç„¶æ˜¯æœ‰å±€é™æ€§çš„ï¼šgo/ast è¿™ä¸ªåŒ…åªèƒ½æ‹¿åˆ°è¯­æ³•æ ‘ç»“æ„ï¼Œä½†æ²¡æœ‰ç±»å‹ä¿¡æ¯ã€‚æ¯”å¦‚ var ctx context.Context å¯ä»¥è§£ææˆè¯­æ³•æ ‘èŠ‚ç‚¹ ast.GenDeclï¼Œä½†context.Context åªèƒ½è§£æå‡º ast.SelectorExprï¼Œå¹¶ä¸çŸ¥é“ context.Context æ˜¯ä¸€ä¸ª structã€interfaceè¿˜æ˜¯aliasã€‚
åœ¨é¢å¯¹ç®€å•çš„ä»£ç ç”Ÿæˆæ—¶go/astè¿˜èƒ½é¡¶ä¸€ä¸‹ï¼Œä½†æ›´å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æ ¹æ® struct ç”Ÿæˆ thrift æˆ–è€… protobuf å®šä¹‰ï¼Œgo/ast å°±æœ‰ç‚¹åƒåŠ›ä¸è®¨å¥½äº†ã€‚
å…¥é—¨ æ³¨æ„è¿™å—æ²¡ç…§æ¬å®˜æ–¹çš„ exampleï¼Œå› ä¸ºå®˜æ–¹çš„ example ä¸»è¦æ³¨é‡åœ¨æ€ä¹ˆç”¨ go/types åšç±»å‹æ£€æŸ¥ï¼Œå…³æ³¨ types.Config å’Œ types.Checkerï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæƒ³ç®¡ checker æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å†™ä¸ª codegenï¼Œæƒ³åŠæ³•æ‹¿åˆ°æ›´ä¸°å¯Œçš„ç±»å‹ä¿¡æ¯ã€‚
å› æ­¤ go/types çš„ä½¿ç”¨æ›´å…³æ³¨çš„æ˜¯å…¶ä¸­çš„æ•°æ®ç»“æ„ã€‚
ç±»å‹ç³»ç»Ÿ å…ˆæ¥ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚
package main import ( &amp;#34;flag&amp;#34; &amp;#34;fmt&amp;#34; &amp;#34;go/importer&amp;#34; &amp;#34;go/token&amp;#34; &amp;#34;go/types&amp;#34; &amp;#34;log&amp;#34; ) func main() { var pkgPath string var typ string flag.StringVar(&amp;amp;pkgPath, &amp;#34;package&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;package path&amp;#34;) flag.">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/gotypes-for-codegen/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="golang"><meta property="article:tag" content="codegen"><meta property="article:published_time" content="2022-04-11T13:00:00+08:00"><meta property="article:modified_time" content="2022-04-11T13:00:00+08:00">
<meta name=twitter:title content="codegen åˆ©å™¨ go/types">
<meta name=twitter:description content="å‰è¨€ æœ¬ç¯‡åšå®¢ä¸»è¦æƒ³ä»‹ç»ä¸‹ go/types è¿™ä¸ªåŒ…ã€‚
ç›®å‰å…³äº go ä»£ç ç”Ÿæˆæ¯”è¾ƒå¸¸è§çš„æ˜¯åˆ©ç”¨ go/ast ï¼Œç»“åˆ text/template ç”Ÿæˆä»£ç ã€‚è¿™ç§ç”Ÿæˆæ–¹å¼æ˜¾ç„¶æ˜¯æœ‰å±€é™æ€§çš„ï¼šgo/ast è¿™ä¸ªåŒ…åªèƒ½æ‹¿åˆ°è¯­æ³•æ ‘ç»“æ„ï¼Œä½†æ²¡æœ‰ç±»å‹ä¿¡æ¯ã€‚æ¯”å¦‚ var ctx context.Context å¯ä»¥è§£ææˆè¯­æ³•æ ‘èŠ‚ç‚¹ ast.GenDeclï¼Œä½†context.Context åªèƒ½è§£æå‡º ast.SelectorExprï¼Œå¹¶ä¸çŸ¥é“ context.Context æ˜¯ä¸€ä¸ª structã€interfaceè¿˜æ˜¯aliasã€‚
åœ¨é¢å¯¹ç®€å•çš„ä»£ç ç”Ÿæˆæ—¶go/astè¿˜èƒ½é¡¶ä¸€ä¸‹ï¼Œä½†æ›´å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æ ¹æ® struct ç”Ÿæˆ thrift æˆ–è€… protobuf å®šä¹‰ï¼Œgo/ast å°±æœ‰ç‚¹åƒåŠ›ä¸è®¨å¥½äº†ã€‚
å…¥é—¨ æ³¨æ„è¿™å—æ²¡ç…§æ¬å®˜æ–¹çš„ exampleï¼Œå› ä¸ºå®˜æ–¹çš„ example ä¸»è¦æ³¨é‡åœ¨æ€ä¹ˆç”¨ go/types åšç±»å‹æ£€æŸ¥ï¼Œå…³æ³¨ types.Config å’Œ types.Checkerï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæƒ³ç®¡ checker æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å†™ä¸ª codegenï¼Œæƒ³åŠæ³•æ‹¿åˆ°æ›´ä¸°å¯Œçš„ç±»å‹ä¿¡æ¯ã€‚
å› æ­¤ go/types çš„ä½¿ç”¨æ›´å…³æ³¨çš„æ˜¯å…¶ä¸­çš„æ•°æ®ç»“æ„ã€‚
ç±»å‹ç³»ç»Ÿ å…ˆæ¥ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚
package main import ( &amp;#34;flag&amp;#34; &amp;#34;fmt&amp;#34; &amp;#34;go/importer&amp;#34; &amp;#34;go/token&amp;#34; &amp;#34;go/types&amp;#34; &amp;#34;log&amp;#34; ) func main() { var pkgPath string var typ string flag.StringVar(&amp;amp;pkgPath, &amp;#34;package&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;package path&amp;#34;) flag.">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/golang/>
golang
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/gotypes-for-codegen/>codegen åˆ©å™¨ go/types</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022å¹´ 4æœˆ 11æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 3 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>æœ¬ç¯‡åšå®¢ä¸»è¦æƒ³ä»‹ç»ä¸‹ <code>go/types</code> è¿™ä¸ªåŒ…ã€‚</p>
<p>ç›®å‰å…³äº go ä»£ç ç”Ÿæˆæ¯”è¾ƒå¸¸è§çš„æ˜¯åˆ©ç”¨ <code>go/ast</code> ï¼Œç»“åˆ <code>text/template</code> ç”Ÿæˆä»£ç ã€‚è¿™ç§ç”Ÿæˆæ–¹å¼æ˜¾ç„¶æ˜¯æœ‰å±€é™æ€§çš„ï¼š<code>go/ast</code> è¿™ä¸ªåŒ…åªèƒ½æ‹¿åˆ°è¯­æ³•æ ‘ç»“æ„ï¼Œä½†æ²¡æœ‰ç±»å‹ä¿¡æ¯ã€‚æ¯”å¦‚ <code>var ctx context.Context</code> å¯ä»¥è§£ææˆè¯­æ³•æ ‘èŠ‚ç‚¹ <code>ast.GenDecl</code>ï¼Œä½†<code>context.Context</code> åªèƒ½è§£æå‡º <code>ast.SelectorExpr</code>ï¼Œå¹¶ä¸çŸ¥é“ <code>context.Context</code> æ˜¯ä¸€ä¸ª <code>struct</code>ã€<code>interface</code>è¿˜æ˜¯<code>alias</code>ã€‚</p>
<p>åœ¨é¢å¯¹ç®€å•çš„ä»£ç ç”Ÿæˆæ—¶<code>go/ast</code>è¿˜èƒ½é¡¶ä¸€ä¸‹ï¼Œä½†æ›´å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æ ¹æ® <code>struct</code> ç”Ÿæˆ <code>thrift</code> æˆ–è€… <code>protobuf</code> å®šä¹‰ï¼Œ<code>go/ast</code> å°±æœ‰ç‚¹åƒåŠ›ä¸è®¨å¥½äº†ã€‚</p>
<h2 id=å…¥é—¨>å…¥é—¨</h2>
<p>æ³¨æ„è¿™å—æ²¡ç…§æ¬å®˜æ–¹çš„ exampleï¼Œå› ä¸ºå®˜æ–¹çš„ example ä¸»è¦æ³¨é‡åœ¨æ€ä¹ˆç”¨ <code>go/types</code> åšç±»å‹æ£€æŸ¥ï¼Œå…³æ³¨ <code>types.Config</code> å’Œ <code>types.Checker</code>ï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæƒ³ç®¡ <code>checker</code> æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å†™ä¸ª codegenï¼Œæƒ³åŠæ³•æ‹¿åˆ°æ›´ä¸°å¯Œçš„ç±»å‹ä¿¡æ¯ã€‚</p>
<p>å› æ­¤ <code>go/types</code> çš„ä½¿ç”¨æ›´å…³æ³¨çš„æ˜¯å…¶ä¸­çš„æ•°æ®ç»“æ„ã€‚</p>
<h3 id=ç±»å‹ç³»ç»Ÿ>ç±»å‹ç³»ç»Ÿ</h3>
<p>å…ˆæ¥ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;flag&#34;</span>
	<span class=s>&#34;fmt&#34;</span>
	<span class=s>&#34;go/importer&#34;</span>
	<span class=s>&#34;go/token&#34;</span>
	<span class=s>&#34;go/types&#34;</span>
	<span class=s>&#34;log&#34;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=kd>var</span> <span class=nx>pkgPath</span> <span class=kt>string</span>
	<span class=kd>var</span> <span class=nx>typ</span> <span class=kt>string</span>
	<span class=nx>flag</span><span class=p>.</span><span class=nf>StringVar</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>pkgPath</span><span class=p>,</span> <span class=s>&#34;package&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;package path&#34;</span><span class=p>)</span>
	<span class=nx>flag</span><span class=p>.</span><span class=nf>StringVar</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>typ</span><span class=p>,</span> <span class=s>&#34;type&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;type name&#34;</span><span class=p>)</span>
	<span class=nx>flag</span><span class=p>.</span><span class=nf>Parse</span><span class=p>()</span>
	<span class=k>if</span> <span class=nx>pkgPath</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
		<span class=nb>println</span><span class=p>(</span><span class=s>&#34;-package is required&#34;</span><span class=p>)</span>
		<span class=nx>flag</span><span class=p>.</span><span class=nf>Usage</span><span class=p>()</span>
		<span class=k>return</span>
	<span class=p>}</span>
	<span class=k>if</span> <span class=nx>typ</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
		<span class=nb>println</span><span class=p>(</span><span class=s>&#34;-type is required&#34;</span><span class=p>)</span>
		<span class=nx>flag</span><span class=p>.</span><span class=nf>Usage</span><span class=p>()</span>
		<span class=k>return</span>
	<span class=p>}</span>

	<span class=nx>fst</span> <span class=o>:=</span> <span class=nx>token</span><span class=p>.</span><span class=nf>NewFileSet</span><span class=p>()</span>
	<span class=nx>imp</span> <span class=o>:=</span> <span class=nx>importer</span><span class=p>.</span><span class=nf>ForCompiler</span><span class=p>(</span><span class=nx>fst</span><span class=p>,</span> <span class=s>&#34;source&#34;</span><span class=p>,</span> <span class=kc>nil</span><span class=p>)</span>
	<span class=nx>pkg</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>imp</span><span class=p>.</span><span class=nf>Import</span><span class=p>(</span><span class=nx>pkgPath</span><span class=p>)</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
	<span class=p>}</span>

	<span class=nx>typename</span> <span class=o>:=</span> <span class=nx>pkg</span><span class=p>.</span><span class=nf>Scope</span><span class=p>().</span><span class=nf>Lookup</span><span class=p>(</span><span class=nx>typ</span><span class=p>)</span>
	<span class=k>if</span> <span class=nx>typename</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;type %s not found&#34;</span><span class=p>,</span> <span class=nx>typ</span><span class=p>)</span>
	<span class=p>}</span>

	<span class=k>if</span> <span class=nx>named</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>typename</span><span class=p>.</span><span class=nf>Type</span><span class=p>().(</span><span class=o>*</span><span class=nx>types</span><span class=p>.</span><span class=nx>Named</span><span class=p>);</span> <span class=nx>ok</span> <span class=p>{</span>
		<span class=k>switch</span> <span class=nx>named</span><span class=p>.</span><span class=nf>Underlying</span><span class=p>().(</span><span class=kd>type</span><span class=p>)</span> <span class=p>{</span>
		<span class=k>case</span> <span class=o>*</span><span class=nx>types</span><span class=p>.</span><span class=nx>Basic</span><span class=p>:</span>
			<span class=nb>println</span><span class=p>(</span><span class=s>&#34;primitive type&#34;</span><span class=p>)</span>
		<span class=k>case</span> <span class=o>*</span><span class=nx>types</span><span class=p>.</span><span class=nx>Interface</span><span class=p>:</span>
			<span class=nb>println</span><span class=p>(</span><span class=s>&#34;interface type&#34;</span><span class=p>)</span>
		<span class=k>case</span> <span class=o>*</span><span class=nx>types</span><span class=p>.</span><span class=nx>Struct</span><span class=p>:</span>
			<span class=nb>println</span><span class=p>(</span><span class=s>&#34;struct type&#34;</span><span class=p>)</span>
		<span class=k>default</span><span class=p>:</span>
			<span class=k>if</span> <span class=nx>named</span><span class=p>.</span><span class=nf>Obj</span><span class=p>().</span><span class=nf>IsAlias</span><span class=p>()</span> <span class=p>{</span>
				<span class=nb>println</span><span class=p>(</span><span class=s>&#34;is alias type&#34;</span><span class=p>)</span>
				<span class=k>return</span>
			<span class=p>}</span>
			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v&#34;</span><span class=p>,</span> <span class=nx>named</span><span class=p>)</span>
		<span class=p>}</span>
	<span class=p>}</span>
<span class=p>}</span>

</code></pre></div><p>å¾ˆçŸ­ï¼Œæ³¨æ„å‡ ä¸ªæ–°å‡ºç°çš„åŒ…å’ŒAPIï¼š<code>go/importer</code>ã€<code>go/types</code>ã€‚</p>
<p><code>go/importer</code>é¡¾åæ€ä¹‰æ˜¯ä¸€ä¸ªç®¡ç†<code>import</code>åŠŸèƒ½çš„åŒ…ï¼Œgo ä¸æ˜¯ python è¿™æ ·è§£é‡Šæ‰§è¡Œæˆ– Java é‚£æ ·å¯ä»¥çƒ­åŠ è½½ä»£ç çš„æ¨¡å‹ï¼Œ<code>importer</code>åŸºæœ¬æ˜¯ç¼–è¯‘æœŸæ‰ä¼šç”¨åˆ°ã€‚æˆ‘ä»¬ç”¨<code>importer.ForCompiler</code>çš„ç›®çš„æ˜¯æ„é€ ä¸€ä¸ª <code>Importer</code>ï¼Œ <strong>ä»æºä»£ç </strong> æ‹¿åˆ°ç±»å‹ä¿¡æ¯ã€‚</p>
<p>ä»<code>Import</code>è°ƒç”¨æ‹¿åˆ°ä¸€ä¸ª <code>*types.Package</code> ç±»å‹çš„è¿”å›å€¼åï¼Œåˆä½¿ç”¨ <code>Scope().Lookup()</code>ä»è¿™ä¸ªåŒ…ä½œç”¨åŸŸä¸‹æŸ¥æ‰¾æŒ‡å®šçš„ç±»å‹â€”â€”è¿™é‡Œæä¸€å˜´ï¼Œ<code>type xxx struct{}</code>è¿™æ ·çš„è¯­å¥å¯ä»¥æ˜¯å—ä½œç”¨åŸŸçš„ï¼Œ<code>Scope().Lookup()</code>æŸ¥æ‰¾çš„æ˜¯ <strong>åŒ…å†…çš„å…¨å±€ç±»å‹å®šä¹‰</strong> ï¼ŒæŸ¥æ‰¾ç»“æœæ˜¯ä¸€ä¸ª <code>types.Object</code>ï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªæœ‰ç±»å‹çš„å¯¹è±¡â€”â€”æ¯”å¦‚å…¨å±€ <code>var v int</code> è¿™æ ·å£°æ˜çš„ <code>v</code>ã€‚å¯¹äºæŸ¥æ‰¾çš„æ˜¯ç±»å‹çš„æƒ…å†µï¼Œéœ€è¦å…³æ³¨çš„å°±æ˜¯ <code>.Type()</code>è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<p>é¡¾åæ€ä¹‰<code>.Type()</code>è¿”å›å¯¹è±¡çš„ç±»å‹ï¼Œä»£ç é‡Œçš„ type switch åº”è¯¥å¾ˆå¥½åœ°å±•ç¤ºäº†æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<p>å¦å¤–è¿˜è¦æ³¨æ„åˆ° <code>.(*types.Named)</code>ï¼Œè¿™é‡Œæ¶‰åŠä¸€ä¸ª <code>named type</code>æ¦‚å¿µã€‚æ‰€è°“çš„ <code>Named</code> åœ¨ <a class=link href=https://go.dev/ref/spec#Types target=_blank rel=noopener>Go Specification é‡Œæ˜¯è¿™æ ·è§£é‡Šçš„</a>ï¼š</p>
<blockquote>
<p><strong>Predeclared types</strong>, <strong>defined types</strong>, and <strong>type parameters</strong> are called <em>named types</em>. An alias denotes a named type if the type given in the alias declaration is a named type.</p>
</blockquote>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<code>predeclared types</code> æŒ‡çš„æ˜¯å†…ç½®çš„ç±»å‹ï¼Œå¦‚ <code>int</code>ã€<code>byte</code>ã€<code>rune</code>ï¼Œå‚è€ƒé“¾æ¥ <a class=link href=https://go.dev/ref/spec#Predeclared_identifiers target=_blank rel=noopener>predeclares</a> ã€‚è€Œ <code>defined types</code> æŒ‡çš„æ˜¯å½¢å¦‚ <code>type Sample struct {}</code> çš„ç±»å‹å®šä¹‰ï¼Œ<code>type parameters</code> åˆ™æ˜¯ go 1.18 å¼•å…¥çš„æ³›å‹è¯­æ³•ï¼Œä¾‹å¦‚ <code>type Sample[T any] struct {t T}</code> ï¼Œå…¶ä¸­çš„<code>T</code>ä¹Ÿæ˜¯ <code>named type</code>ã€‚</p>
<p>é‚£ä»€ä¹ˆæ ·çš„ä¸æ˜¯ <code>named type</code>å‘¢ï¼Ÿæ¯”å¦‚<code>type Sample = struct {}</code>ï¼Œè¿™é‡Œçš„ <code>Sample</code> å°±ä¸æ˜¯ <code>named type</code>ã€‚æ³¨æ„å‰é¢å¼•æ–‡çš„ååŠå¥ï¼š</p>
<blockquote>
<p>An alias denotes a named type if the type given in the alias declaration is a named type.</p>
</blockquote>
<p>åªæœ‰<code>named type</code>çš„åˆ«åæ‰è¢«è§†ä¸º<code>named type</code>ï¼Œæ‰€ä»¥ <code>type Sample = int</code> æ˜¯ <code>named type</code>ï¼Œä½† <code>type Sample = struct{}</code> æˆ–è€… <code>type Sample = map[string]string</code> éƒ½ä¸æ˜¯ <code>named type</code>ã€‚</p>
<p>å¥½äº†ï¼Œç»•æ™•äº†å°±å¯ä»¥ç»§ç»­ä¸‹ä¸€é˜¶æ®µäº†ï¼Œå¼€å§‹äº†è§£ <code>Field</code> å’Œ <code>Method</code>ã€‚</p>
<h3 id=field>Field</h3>
<p>æˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ <code>case *types.Struct</code> ä¸‹åŠ å…¥å‡ è¡Œå¾ªç¯ã€‚è®°å¾— <code>switch</code>ä¹Ÿæ”¹æˆ<code>switch tp := named.Underlying().(type)</code></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>tp</span><span class=p>.</span><span class=nf>NumFields</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
    <span class=nx>field</span> <span class=o>:=</span> <span class=nx>tp</span><span class=p>.</span><span class=nf>Field</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;field %s %v\n&#34;</span><span class=p>,</span> <span class=nx>field</span><span class=p>.</span><span class=nf>Name</span><span class=p>(),</span> <span class=nx>field</span><span class=p>.</span><span class=nf>Type</span><span class=p>())</span>
<span class=p>}</span>
</code></pre></div><p>åˆä¸€ä¸ªæƒ¯ç”¨æ³•ï¼š<code>NumFields</code> å’Œ <code>Field</code>ã€‚æ³¨æ„<code>Field</code>æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ª <code>*types.Var</code>ï¼Œå¯ä»¥è®¤ä¸ºè¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œè€Œ<code>field.Type()</code>å¾—åˆ°çš„å°±æ˜¯è¿™ä¸ªå˜é‡çš„ç±»å‹ã€‚</p>
<p>æœ‰äº†ç±»å‹æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æœ‰çš„æ”¾çŸ¢ï¼Œå†³å®šå¦‚ä½•ç”Ÿæˆ <code>field</code> å¯¹åº”çš„ä»£ç äº†ã€‚</p>
<h3 id=method>Method</h3>
<p>å¦ä¸€ç§å¸¸è§çš„æƒ…å†µæ˜¯åŸºäº <code>interface</code> ç”Ÿæˆå®ç°ï¼Œæ¯”å¦‚ <code>go-kit</code> é‚£æµ·é‡çš„æ ·æ¿ä»£ç ã€‚</p>
<p>æˆ‘ä»¬ç¨å¾®æ”¹ä¸‹ä¸Šé¢çš„ä»£ç ã€‚</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>tp</span><span class=p>.</span><span class=nf>NumMethods</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
    <span class=nx>method</span> <span class=o>:=</span> <span class=nx>tp</span><span class=p>.</span><span class=nf>Method</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
    <span class=nx>signature</span> <span class=o>:=</span> <span class=nx>method</span><span class=p>.</span><span class=nf>Type</span><span class=p>().(</span><span class=o>*</span><span class=nx>types</span><span class=p>.</span><span class=nx>Signature</span><span class=p>)</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;func (r Sample) %s(&#34;</span><span class=p>,</span> <span class=nx>method</span><span class=p>.</span><span class=nf>Name</span><span class=p>())</span>
    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Params</span><span class=p>().</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
        <span class=nx>param</span> <span class=o>:=</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Params</span><span class=p>().</span><span class=nf>At</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s %v,&#34;</span><span class=p>,</span> <span class=nx>param</span><span class=p>.</span><span class=nf>Name</span><span class=p>(),</span> <span class=nx>param</span><span class=p>.</span><span class=nf>Type</span><span class=p>())</span>
    <span class=p>}</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;)&#34;</span><span class=p>)</span>
    <span class=k>if</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Results</span><span class=p>().</span><span class=nf>Len</span><span class=p>()</span> <span class=p>&gt;</span> <span class=mi>1</span> <span class=p>{</span>
        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34; (&#34;</span><span class=p>)</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Results</span><span class=p>().</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
        <span class=nx>result</span> <span class=o>:=</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Results</span><span class=p>().</span><span class=nf>At</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s %v&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nf>Name</span><span class=p>(),</span> <span class=nx>result</span><span class=p>.</span><span class=nf>Type</span><span class=p>())</span>
        <span class=k>if</span> <span class=nx>i</span><span class=o>+</span><span class=mi>1</span> <span class=p>&lt;</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Params</span><span class=p>().</span><span class=nf>Len</span><span class=p>()</span> <span class=p>{</span>
            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;,&#34;</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=nx>signature</span><span class=p>.</span><span class=nf>Results</span><span class=p>().</span><span class=nf>Len</span><span class=p>()</span> <span class=p>&gt;</span> <span class=mi>1</span> <span class=p>{</span>
        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34; )&#34;</span><span class=p>)</span>
    <span class=p>}</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34; {\n\tpanic(errors.New(\&#34;Not implemented!\&#34;))\n}\n\n&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>å¹¶ä¸å¤æ‚ï¼</p>
<p>éå† interface ä¸‹çš„æ‰€æœ‰æ–¹æ³•ï¼Œç„¶åæŠŠ <code>Params</code> å’Œ <code>Results</code> æŒ¨ä¸ªæ‰“å°å‡ºæ¥ï¼Œå‡½æ•°ä½“é‡Œæ”¾ä¸€ä¸ª <code>panic(errors.New("Not implemented!"))</code>ï¼Œå°±æ˜¯è¿™æ ·ï¼</p>
<p>æœ€åè¾“å‡ºåƒæ˜¯è¿™æ ·ï¼š</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=nx>Sample</span><span class=p>)</span> <span class=nf>FirstName</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
        <span class=nb>panic</span><span class=p>(</span><span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;Not implemented!&#34;</span><span class=p>))</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=nx>Sample</span><span class=p>)</span> <span class=nf>LastName</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
        <span class=nb>panic</span><span class=p>(</span><span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;Not implemented!&#34;</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></div><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>Method</code>è¿”å›çš„æ˜¯ <code>*types.Func</code>ï¼Œä½† <code>Params</code>å’Œ<code>Results</code>å¹¶ä¸æ˜¯<code>types.Func</code>ä¸Šçš„æ–¹æ³•ï¼Œè€Œæ˜¯ <code>types.Signature</code>ã€‚å®˜æ–¹æ–‡æ¡£è¯´ <code>Func</code>çš„<code>Type()</code>è¿”å›çš„å¿…ç„¶æ˜¯ <code>*types.Signature</code>ï¼Œæ‰€ä»¥ç›´æ¥æ–­è¨€ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚</p>
<h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£ <a class=link href=https://github.com/golang/example/tree/master/gotypes target=_blank rel=noopener>gotypes</a></p>
<p>é‡ç‚¹å°±ä¸€ä¸ªï¼šä¸è¦ç”¨ <code>go/types</code> ä¸‹çš„ <code>Config</code> å’Œ <code>Checker</code>ï¼Œç”¨ <code>importer.ForCompiler</code> ä»æºç è·å–ç±»å‹æ•°æ®ã€‚<code>types</code>ç”¨èµ·æ¥ä¸ªäººæ„Ÿè§‰æ¯” <code>go/ast</code> æ–¹ä¾¿ï¼Œç¼ºç‚¹æ˜¯å› ä¸ºå¼•å…¥ç±»å‹ä¼šå¯¼è‡´è§£ææºç å„æ–¹é¢çš„æ¶ˆè€—å¢åŠ ï¼Œç®—æ˜¯ä¸€ä¸ªæˆ‘ä¸ªäººæ¯”è¾ƒåå¥½çš„ trade-off å§ã€‚åœ¨ codegen çš„è¾“å…¥ç±»å‹æ¯”è¾ƒå¤æ‚æ•æ„Ÿçš„æ—¶å€™ï¼Œæ‹¿ <code>go/types</code> æ›¿ä»£ <code>go/ast</code> å¯ä»¥çœä¸‹å¾ˆå¤šå·¥ä½œé‡ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/golang/>golang</a>
<a href=/blog/tags/codegen/>codegen</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/protogen-code-generation/>
<div class=article-details>
<h2 class=article-title>protogenä»£ç ç”Ÿæˆ</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/unsafe-jwt/>
<div class=article-details>
<h2 class=article-title>ä¸å®‰å…¨çš„ jwt</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/refactoring-transaction-and-config-management-note/>
<div class=article-details>
<h2 class=article-title>è®°ä¸€æ¬¡é‡æ„äº‹åŠ¡ç®¡ç†å’Œé…ç½®ç®¡ç†</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/my-opinion-of-gokit-architecture/>
<div class=article-details>
<h2 class=article-title>gokit æ¶æ„ä¹‹æˆ‘è§</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/go-kit-note/>
<div class=article-details>
<h2 class=article-title>go-kit ç¬”è®°</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"codegen åˆ©å™¨ go/types",options:{autoCreateIssue:!0,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.10.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#å‰è¨€>å‰è¨€</a></li>
<li><a href=#å…¥é—¨>å…¥é—¨</a>
<ol>
<li><a href=#ç±»å‹ç³»ç»Ÿ>ç±»å‹ç³»ç»Ÿ</a></li>
<li><a href=#field>Field</a></li>
<li><a href=#method>Method</a></li>
</ol>
</li>
<li><a href=#æ€»ç»“>æ€»ç»“</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>