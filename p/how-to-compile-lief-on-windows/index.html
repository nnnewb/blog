<!doctype html><html lang=zh-cn dir=ltr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰è¨€ æƒ¯ä¾‹å¾—æœ‰ä¸ªå‰è¨€ã€‚ LIEFæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶åˆ†æå’Œæ“ä½œåº“ï¼Œå®˜æ–¹æ¨èçš„æ˜¯ Python ç‰ˆæœ¬ï¼Œç¡®å®æ›´å¥½ç”¨ï¼Œå°±æ˜¯ç±»å‹çš„é—®é¢˜æœ‰ç‚¹å¤šï¼Œè€Œä¸”æ²¡é™„é€ .pyi å¯¼è‡´ä¸å¤§å¥½å†™ã€‚è€Œ"><title>ç¼–è¯‘LIEFçš„å„ç§å§¿åŠ¿</title>
<link rel=canonical href=https://nnnewb.github.io/blog/p/how-to-compile-lief-on-windows/>
<link rel=stylesheet href=/blog/scss/style.min.5c88a5bc75732c20b0a5ccc3be5c148f782b1c20e20b6c73b276723850a33d6b.css><script src=https://unpkg.com/dayjs@1.8.21/dayjs.min.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/plugin/relativeTime.js></script>
<script src=https://unpkg.com/dayjs@1.8.21/locale/zh-cn.js></script>
<script>dayjs.locale('zh-cn'),dayjs.extend(dayjs_plugin_relativeTime)</script><meta property="og:title" content="ç¼–è¯‘LIEFçš„å„ç§å§¿åŠ¿">
<meta property="og:description" content="å‰è¨€ æƒ¯ä¾‹å¾—æœ‰ä¸ªå‰è¨€ã€‚ LIEFæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶åˆ†æå’Œæ“ä½œåº“ï¼Œå®˜æ–¹æ¨èçš„æ˜¯ Python ç‰ˆæœ¬ï¼Œç¡®å®æ›´å¥½ç”¨ï¼Œå°±æ˜¯ç±»å‹çš„é—®é¢˜æœ‰ç‚¹å¤šï¼Œè€Œä¸”æ²¡é™„é€ .pyi å¯¼è‡´ä¸å¤§å¥½å†™ã€‚è€Œ">
<meta property="og:url" content="https://nnnewb.github.io/blog/p/how-to-compile-lief-on-windows/">
<meta property="og:site_name" content="weakptr's ç¬”è®°">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="c++"><meta property="article:tag" content="LIEF"><meta property="article:published_time" content="2021-10-08T16:25:00+08:00"><meta property="article:modified_time" content="2021-10-08T16:25:00+08:00">
<meta name=twitter:title content="ç¼–è¯‘LIEFçš„å„ç§å§¿åŠ¿">
<meta name=twitter:description content="å‰è¨€ æƒ¯ä¾‹å¾—æœ‰ä¸ªå‰è¨€ã€‚ LIEFæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶åˆ†æå’Œæ“ä½œåº“ï¼Œå®˜æ–¹æ¨èçš„æ˜¯ Python ç‰ˆæœ¬ï¼Œç¡®å®æ›´å¥½ç”¨ï¼Œå°±æ˜¯ç±»å‹çš„é—®é¢˜æœ‰ç‚¹å¤šï¼Œè€Œä¸”æ²¡é™„é€ .pyi å¯¼è‡´ä¸å¤§å¥½å†™ã€‚è€Œ">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header>
<figure class=site-avatar>
<a href=/blog>
<img src=/blog/img/avatar_hub37949326d1692892aa1e64434c0dda6_382115_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a>
<span class=emoji>ğŸ‘</span>
</figure>
<div class=site-meta>
<h1 class=site-name><a href=/blog>weakptr's ç¬”è®°</a></h1>
<h2 class=site-description>å¼ƒèˆ¹ï¼</h2>
</div>
</header><ol class=social-menu>
<li>
<a href=https://github.com/nnnewb/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg>
</a>
</li>
</ol><ol class=menu id=main-menu>
<li>
<a href=/blog><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span>
</a>
</li>
<li>
<a href=/blog/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span>
</a>
</li>
<li>
<a href=/blog/archive><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span>
</a>
</li>
<li>
<a href=/blog/categories><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>åˆ†ç±»</span>
</a>
</li>
<li>
<a href=/blog/link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span>
</a>
</li>
<li>
<a href=/blog/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span>
</a>
</li>
<div class=menu-bottom-section>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/blog/categories/c++/>
c++
</a>
</header>
<div class=article-title-wrapper>
<h2 class=article-title>
<a href=/blog/p/how-to-compile-lief-on-windows/>ç¼–è¯‘LIEFçš„å„ç§å§¿åŠ¿</a>
</h2>
</div>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2021-10-08T16:25:00+08:00>2021å¹´ 10æœˆ 8æ—¥</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
é˜…è¯»æ—¶é•¿: 3 åˆ†é’Ÿ
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=å‰è¨€>å‰è¨€</h2>
<p>æƒ¯ä¾‹å¾—æœ‰ä¸ªå‰è¨€ã€‚</p>
<p>LIEFæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶åˆ†æå’Œæ“ä½œåº“ï¼Œå®˜æ–¹æ¨èçš„æ˜¯ Python ç‰ˆæœ¬ï¼Œç¡®å®æ›´å¥½ç”¨ï¼Œå°±æ˜¯ç±»å‹çš„é—®é¢˜æœ‰ç‚¹å¤šï¼Œè€Œä¸”æ²¡é™„é€ <code>.pyi</code> å¯¼è‡´ä¸å¤§å¥½å†™ã€‚è€ŒC++ç‰ˆæœ¬å°±æ²¡è¿™é—®é¢˜ï¼ŒC++ç‰ˆæœ¬æœ‰è‡ªå·±çš„é—®é¢˜=ï¼Œ=</p>
<p>ä¸€ä¸ªæ˜¯å®˜æ–¹æä¾›ä¸‹è½½çš„SDKæ˜¯é™æ€é“¾æ¥çš„ï¼Œç”¨åˆ°SDKçš„ç¨‹åºå¿…é¡»æŒ‡å®š <code>/MT</code> ä¸ç„¶ç¼–è¯‘å™¨å°±ä¼šæŠ±æ€¨è¿è¡Œåº“ä¸åŒ¹é…ã€‚è™½ç„¶çœ‹issueé‡Œå·²ç»æœ‰äººè§£å†³äº†ï¼ˆ<code>-DLIEF_USE_CRT_{DEBUG,RELEASE}=MD/MT</code>ï¼‰ï¼Œä½†CIè¿˜æ˜¯è€æ ·å­ï¼Œåæ­£ç›´æ¥ä¸‹è½½çš„SDKç”¨èµ·æ¥å°±è›‹ç–¼ï¼Œvcpkg å…¨éƒ½æ˜¯ <code>/MD</code> é“¾æ¥çš„ï¼Œæ²¡æ³•é…åˆç”¨ã€‚</p>
<p>æ›´åˆ«æ MinGW äº†ï¼Œå°±æ²¡å®˜æ–¹çš„SDKã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯é—®é¢˜ï¼Œè§£å†³é—®é¢˜çš„æœ€ç®€å•åŠæ³•å°±æ˜¯è‡ªå·±ç¼–è¯‘äº†ã€‚</p>
<h2 id=0x01-visual-c-å·¥å…·é“¾-msbuild>0x01 Visual C++ å·¥å…·é“¾ msbuild</h2>
<p>ä»£ç ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œç”¨ CMake å»ç¼–è¯‘ã€‚ä¸‹é¢çš„å‘½ä»¤éƒ½æ˜¯ Powershell ä¸‹çš„ï¼Œæ³¨æ„æŠ˜è¡Œç”¨çš„æ˜¯åå¼•å· backquoteï¼Œå°±æ˜¯æ³¢æµªå·é‚£ä¸ªé”®ï¼Œå’Œ bash ç”¨ åæ–œæ ä¸ä¸€æ ·ã€‚ç›´æ¥å¤åˆ¶åˆ°å‘½ä»¤è¡Œæ˜¯è·‘ä¸èµ·æ¥çš„ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>..</span> 
	<span class=n>-G</span> <span class=s2>&#34;Visual Studio 2019&#34;</span> <span class=c># Generatorï¼Œä½ çš„å·¥å…·é“¾ï¼Œå¯ä»¥ç”¨ cmake --help æ¥çœ‹çœ‹æœ‰å“ªäº›å¯ç”¨çš„</span>
	<span class=n>-A</span> <span class=n>Win32</span> <span class=c># é€‰æ‹© Visual C++ å·¥å…·é“¾çš„æƒ…å†µä¸‹å¯ä»¥ç”¨ -A Win32 é€‰æ‹©ç¼–è¯‘32ä½ä»£ç ï¼Œæˆ–è€… Win64</span>
	<span class=n>-DCMAKE_BUILD_TYPE</span><span class=p>=</span><span class=n>Debug</span> <span class=c># å¸¸ç”¨çš„ Debug/Release/RelWithDebInfo</span>
	<span class=n>-DLIEF_PYTHON_API</span><span class=p>=</span><span class=n>off</span> <span class=c># ä¸ç¼–è¯‘ Python æ¨¡å—ï¼Œè¿™æ ·å°±ä¸ç”¨è£… Python äº†</span>
	<span class=n>-DLIEF_USE_CRT_DEBUG</span><span class=p>=</span><span class=nb>MD </span><span class=c># ä½¿ç”¨ /MD é“¾æ¥ msvcrt.dll è€Œä¸æ˜¯ libcmt</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™å„¿æœ‰ä¸ªå‘ï¼Œç”¨ Visual Studio è¿™ä¸ª Generator çš„æ—¶å€™ï¼Œè™½ç„¶æŒ‡å®šäº† <code>CMAKE_BUILD_TYPE</code>ï¼Œä½†å®é™…æ²¡ä»€ä¹ˆåµç”¨ï¼Œè¿˜å¾—åœ¨ç¼–è¯‘çš„æ—¶å€™ç»™å‚æ•° <code>--config Debug</code> æ‰ä¼šçœŸçš„æŒ‰ Debug ç¼–è¯‘ã€‚</p>
<p>ç„¶åæ˜¯ç¼–è¯‘å‘½ä»¤ï¼š</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>-</span><span class=n>-build</span> <span class=p>.</span> <span class=p>-</span><span class=n>-config</span> <span class=n>Debug</span> <span class=p>-</span><span class=n>-target</span> <span class=n>LIB_LIEF</span>
</code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤ç”¨å¾®è½¯çš„ msbuild ä¼šèŠ±å¾ˆé•¿æ—¶é—´å»ç¼–è¯‘ï¼Œä¸å«Œéº»çƒ¦çš„è¯å¯ä»¥ç”¨ Ninjaã€‚</p>
<p>ç¼–è¯‘å®Œè¿˜ä¸èƒ½ç”¨ï¼Œè¿˜å¾—å…ˆâ€œå®‰è£…â€åˆ°ä¸€ä¸ªç›®å½•é‡Œã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>-</span><span class=n>-install</span> <span class=p>.</span> <span class=p>-</span><span class=n>-config</span> <span class=n>Debug</span> <span class=p>-</span><span class=n>-prefix</span> <span class=nb>LIEF-msvc</span><span class=n>-debug</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·å°±ä¼šæŠŠå¿…è¦çš„æ–‡ä»¶ç»™å¤åˆ¶åˆ° <code>LIEF-msvc-debug</code> è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œäº†ï¼Œå‚è€ƒ LIEF å®˜æ–¹çš„é›†æˆæ–‡æ¡£ï¼ŒæŠŠ <code>LIEF_DIR</code> è®¾ç½®æˆè¿™ä¸ªæ–‡ä»¶å¤¹çš„è·¯å¾„å°±å¯ä»¥ç”¨å•¦ã€‚</p>
<h2 id=0x02-visual-c-å·¥å…·é“¾-ninja>0x02 Visual C++ å·¥å…·é“¾ ninja</h2>
<p>ä½¿ç”¨ CMake + Ninja çš„æƒ…å†µä¸‹æ²¡æ³•ç”¨ <code>-A</code> å»æ§åˆ¶ç¼–è¯‘32ä½è¿˜æ˜¯64ä½äº†ï¼Œä½ å¾—å…ˆè£…å¥½ Visual C++ æ„å»ºå·¥å…·ï¼Œç„¶åæ‰“å¼€å¼€å‘è€…å‘½ä»¤æç¤ºç¬¦ã€‚</p>
<p><img src=/blog/image/how-to-compile-lief-on-windows/image-20211008160449880.png loading=lazy alt=image-20211008160449880></p>
<p>æ¯”å¦‚æƒ³ç¼–è¯‘32ä½çš„å°±é€‰ <code>x86 native tool command prompt</code> ï¼Œåœ¨è¿™ä¸ªå‘½ä»¤æç¤ºç¬¦é‡Œç”¨ cmake æ„å»ºã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>..</span> <span class=n>-G</span> <span class=n>Ninja</span> <span class=n>-DCMAKE_BUILD_TYPE</span><span class=p>=</span><span class=n>Debug</span> <span class=n>-DLIEF_PYTHON_API</span><span class=p>=</span><span class=n>off</span> <span class=n>-DLIEF_USE_CRT_DEBUG</span><span class=p>=</span><span class=nb>MD
</span><span class=nb></span><span class=n>cmake</span> <span class=p>-</span><span class=n>-build</span> <span class=p>.</span> <span class=p>-</span><span class=n>-target</span> <span class=n>LIB_LIEF</span>
<span class=n>cmake</span> <span class=p>-</span><span class=n>-install</span> <span class=p>.</span> <span class=p>-</span><span class=n>-prefix</span> <span class=nb>LIEF-msvc</span><span class=n>-debug</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä»–å’Œç›´æ¥ç”¨ msvc æ²¡å•¥åŒºåˆ«ã€‚</p>
<h2 id=0x03-mingw-å·¥å…·é“¾-makefile>0x03 MinGW å·¥å…·é“¾ makefile</h2>
<p>MinGW å·¥å…·é“¾å…¶å®å’Œ msvc å·®ä¸å¤ªå¤§ã€‚å…ˆè£… MinGWï¼Œæ¨è msys2ï¼Œmsys2è£…å¥½åè·‘å‘½ä»¤ <code>pacman -Sy mingw-w64-i686-toolchain</code> å°±èƒ½è£…ä¸Š32ä½çš„ç¼–è¯‘å·¥å…·é“¾äº†ï¼ŒåŒ…æ‹¬äº† <code>gcc</code>ã€<code>g++</code>ã€<code>mingw32-make</code> è¿™äº›å¿…è¦çš„ç¨‹åºã€‚</p>
<p>å®Œäº‹åæŠŠ <code>MinGW</code> å·¥å…·é“¾åŠ åˆ° <code>PATH</code> é‡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡å¦‚ä½ æŠŠ msys2 è£…åˆ° <code>C:\msys64</code> ä¸‹çš„è¯ï¼Œé‚£è¦åŠ çš„è·¯å¾„å°±æ˜¯ <code>C:\msys64\mingw32\bin</code>ï¼Œè‡ªå·±çœ‹çœ‹è¦ç”¨çš„ gcc æ”¾åœ¨å“ªå„¿å‘—ã€‚</p>
<p>å¦å¤– <code>LIEF_USE_CRT_DEBUG</code> è¿™å˜é‡ä¹Ÿç”¨ä¸åˆ°äº†ï¼Œ<code>MD</code>è¿˜æ˜¯<code>MT</code> è¿™æ˜¯ä¸“ä¾› MSVC çš„é€‰æ‹©é¢˜ï¼ŒMinGW ä¸ç®¡è¿™ä¸ªã€‚</p>
<p>æ¥ç€å°±å¯ä»¥ç”¨ CMake äº†ã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>..</span> <span class=n>-G</span> <span class=s2>&#34;MinGW Makefiles&#34;</span> <span class=n>-DCMAKE_BUILD_TYPE</span><span class=p>=</span><span class=n>Debug</span> <span class=n>-DLIEF_PYTHON_API</span><span class=p>=</span><span class=n>off</span> <span class=s1>&#39;-DCMAKE_C_FLAGS:STRING=&#34;-m32&#34;&#39;</span> <span class=s1>&#39;-DCMAKE_CXX_FLAGS:STRING=&#34;-m32&#34;&#39;</span>
<span class=n>cmake</span> <span class=p>-</span><span class=n>-build</span> <span class=p>.</span> <span class=p>-</span><span class=n>-target</span> <span class=n>LIB_LIEF</span>
<span class=n>cmake</span> <span class=p>-</span><span class=n>-install</span> <span class=p>.</span> <span class=p>-</span><span class=n>-prefix</span> <span class=nb>LIEF-mingw32</span><span class=n>-debug</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸ç”¨æ‹…å¿ƒ CMake é€‰é”™å·¥å…·é“¾ï¼Œç”¨ <code>MinGW Makefiles</code> çš„æƒ…å†µä¸‹ä¼šä¼˜å…ˆè€ƒè™‘ GCC çš„ã€‚ä¸è¿‡è¿˜æœ‰ä¸ªè€é—®é¢˜ï¼šæ€ä¹ˆé€‰32ä½è¿˜æ˜¯64ä½ã€‚ç­”æ¡ˆæ˜¯è®¾ç½®ä¸‹ <code>C_FLAGS</code> å’Œ <code>CXX_FLAGS</code> è¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼Œè®©ç¼–è¯‘å™¨åŠ ä¸Š <code>-m32</code> è¿™ä¸ªå‚æ•°ï¼Œç¼–è¯‘å‡ºæ¥çš„å°±æ˜¯32ä½ä»£ç äº†ã€‚</p>
<h2 id=0x04-mingw-å·¥å…·é“¾-ninja>0x04 MinGW å·¥å…·é“¾ Ninja</h2>
<p>å’Œ <code>MinGW Makefiles</code> å·®ä¸å¤ªå¤šï¼Œä½†æ˜¯ <code>Ninja</code> æ²¡é‚£ä¹ˆèªæ˜ï¼Œä¸çŸ¥é“è¦ç”¨ä»€ä¹ˆç¼–è¯‘å™¨ï¼Œå¾—æ‰‹åŠ¨æŒ‡å®šã€‚</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=n>cmake</span> <span class=p>..</span> <span class=n>-G</span> <span class=n>Ninja</span> <span class=n>-DCMAKE_BUILD_TYPE</span><span class=p>=</span><span class=n>Debug</span> <span class=n>-DLIEF_PYTHON_API</span><span class=p>=</span><span class=n>off</span> <span class=n>-DCMAKE_C_COMPILER</span><span class=p>=</span><span class=n>gcc</span> <span class=n>-DCMAKE_CXX_COMPILER</span><span class=p>=</span><span class=n>g</span><span class=p>++</span> <span class=s1>&#39;-DCMAKE_C_FLAGS:STRING=&#34;-m32&#34;&#39;</span> <span class=s1>&#39;-DCMAKE_CXX_FLAGS:STRING=&#34;-m32&#34;&#39;</span>
<span class=n>cmake</span> <span class=p>-</span><span class=n>-build</span> <span class=p>.</span> <span class=p>-</span><span class=n>-target</span> <span class=n>LIB_LIEF</span>
<span class=n>cmake</span> <span class=p>-</span><span class=n>-install</span> <span class=p>.</span> <span class=p>-</span><span class=n>-prefix</span> <span class=nb>LIEF-mingw32</span><span class=n>-debug</span>
</code></pre></td></tr></table>
</div>
</div><p>é…ç½®é˜¶æ®µå¤šå‡ºæ¥ä¸¤ä¸ªå‚æ•°ï¼Œ<code>-DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++</code>ï¼Œç›®çš„å°±æ˜¯å‘Šè¯‰ CMake æ”¾æœºçµç‚¹ï¼Œç”¨ <code>gcc/g++</code> ç¼–è¯‘å™¨ï¼Œåˆ«çæ•´ã€‚</p>
<h2 id=æ€»ç»“>æ€»ç»“</h2>
<p>ä¹Ÿå°±è¿™ä¹ˆå›äº‹å§ã€‚</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/blog/tags/c++/>c++</a>
<a href=/blog/tags/lief/>LIEF</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ç›¸å…³æ–‡ç« </h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/blog/p/how-branch-prediction-effects-executoin-performance-and-security/>
<div class=article-details>
<h2 class=article-title>åˆ†æ”¯é¢„æµ‹å¯¹æ‰§è¡Œæ•ˆç‡å’Œå®‰å…¨çš„å½±å“</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/cpu-cache-page-fault-and-false-sharing/>
<div class=article-details>
<h2 class=article-title>CPUç¼“å­˜ã€ç¼ºé¡µå’Œä¼ªå…±äº«</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/%E5%9C%A8c-%E4%B8%AD%E5%B5%8C%E5%85%A5python%E8%A7%A3%E9%87%8A%E5%99%A8/>
<div class=article-details>
<h2 class=article-title>åœ¨C++ä¸­åµŒå…¥Pythonè§£é‡Šå™¨</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/gamehollywood-%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/>
<div class=article-details>
<h2 class=article-title>GameHollywood é¢è¯•ç¬”è®°</h2>
</div>
</a>
</article>
<article>
<a href=/blog/p/%E5%8F%AF%E9%87%8D%E5%85%A5%E5%92%8C%E5%BC%82%E6%AD%A5%E5%AE%89%E5%85%A8/>
<div class=article-details>
<h2 class=article-title>å¯é‡å…¥å’Œå¼‚æ­¥å®‰å…¨</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<link rel=stylesheet href=https://unpkg.com/vssue/dist/vssue.min.css>
<div id=vssue></div>
<script src=https://unpkg.com/vue@2.6.14/dist/vue.runtime.min.js></script>
<script src=https://unpkg.com/vssue@1.4.8/dist/vssue.github.min.js></script>
<script>new Vue({el:"#vssue",render:a=>a("Vssue",{props:{title:"ç¼–è¯‘LIEFçš„å„ç§å§¿åŠ¿",options:{autoCreateIssue:!1,owner:"nnnewb",repo:"blog",clientId:"285910fdc1567a1a23e3",clientSecret:"f00da5438d9ac82c4a86024866c7a916ae411edc"}}})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 weakptr's ç¬”è®°
</section>
<section class=powerby>
GitHub Pages <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡
ï¼Œç”± <a href=https://nnnewb.github.io/blog/>nnnewb</a> ä¿®æ”¹
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">ç›®å½•</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#å‰è¨€>å‰è¨€</a></li>
<li><a href=#0x01-visual-c-å·¥å…·é“¾-msbuild>0x01 Visual C++ å·¥å…·é“¾ msbuild</a></li>
<li><a href=#0x02-visual-c-å·¥å…·é“¾-ninja>0x02 Visual C++ å·¥å…·é“¾ ninja</a></li>
<li><a href=#0x03-mingw-å·¥å…·é“¾-makefile>0x03 MinGW å·¥å…·é“¾ makefile</a></li>
<li><a href=#0x04-mingw-å·¥å…·é“¾-ninja>0x04 MinGW å·¥å…·é“¾ Ninja</a></li>
<li><a href=#æ€»ç»“>æ€»ç»“</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>